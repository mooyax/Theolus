
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Building.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Terrain.ts top-level load

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Actor.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Goblin.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[Import Debug] Raid: function, Combat: function, Wander: function

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Game.ts top-level load

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould remove dead sheep during manager update
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 1] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5ÂÄã„ÅÆÊ¥ûÁ™ü„ÇíÁîüÊàê‰∏≠...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.094752, 0.630665) -> Grid(15, 100) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.984992, 0.438909) -> Grid(157, 70) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.578381, 0.802090) -> Grid(92, 128) rngState=undefined
[GoblinManager] Ê¥ûÁ™üÁîüÊàêÂÆå‰∫Ü: 0/5 (Ë©¶Ë°åÂõûÊï∞: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.
Resetting SheepManager...
SheepManager Refactored: Initialized with Entity-based Sheep. IDENTIFIER: UNIQUE_LOG_STAMP_12345

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould remove dead sheep during manager update
[22m[39mResetting SheepManager...

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould regenerate sheep when population is low
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould regenerate sheep when population is low
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 2] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5ÂÄã„ÅÆÊ¥ûÁ™ü„ÇíÁîüÊàê‰∏≠...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.347050, 0.580944) -> Grid(55, 92) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.617085, 0.372289) -> Grid(98, 59) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.007047, 0.658189) -> Grid(1, 105) rngState=undefined
[GoblinManager] Ê¥ûÁ™üÁîüÊàêÂÆå‰∫Ü: 0/5 (Ë©¶Ë°åÂõûÊï∞: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.
Resetting SheepManager...
SheepManager Refactored: Initialized with Entity-based Sheep. IDENTIFIER: UNIQUE_LOG_STAMP_12345

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould regenerate sheep when population is low
[22m[39mResetting SheepManager...

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 3] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5ÂÄã„ÅÆÊ¥ûÁ™ü„ÇíÁîüÊàê‰∏≠...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.525808, 0.114761) -> Grid(84, 18) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.466633, 0.673985) -> Grid(74, 107) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.559721, 0.792343) -> Grid(89, 126) rngState=undefined
[GoblinManager] Ê¥ûÁ™üÁîüÊàêÂÆå‰∫Ü: 0/5 (Ë©¶Ë°åÂõûÊï∞: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.
Resetting SheepManager...
SheepManager Refactored: Initialized with Entity-based Sheep. IDENTIFIER: UNIQUE_LOG_STAMP_12345

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39m[Entity 0] CONSTRUCTOR START: type=unit at 10,10
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:player Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:player Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0
[Entity 1] CONSTRUCTOR START: type=sheep at 11,11
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 2] CONSTRUCTOR START: type=sheep at 40,40
[Entity 2] Calling registerEntity...
[Entity 2] registerEntity returned.
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

 [31m‚ùØ[39m src/tests/SheepHuntingFix.test.js [2m([22m[2m3 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 66[2mms[22m[39m
[31m     [31m√ó[31m should remove dead sheep during manager update[39m[32m 24[2mms[22m[39m
[31m     [31m√ó[31m should regenerate sheep when population is low[39m[32m 30[2mms[22m[39m
     [32m‚úì[39m should ignore dead sheep in hunter targeting[32m 11[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m   Start at [22m 19:51:43
[2m   Duration [22m 1.51s[2m (transform 610ms, setup 89ms, import 714ms, tests 66ms, environment 453ms)[22m

