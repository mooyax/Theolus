
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/ManualPriority.test.js > Manual Request Priority and Preemption > should allow manual request to preempt CombatState
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/NightManualWork.test.js > Night Manual Work Priority > should continue MANUAL job when night falls
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/ManualPriority.test.js > Manual Request Priority and Preemption > should allow manual request to preempt CombatState
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:1

stdout | src/tests/NightManualWork.test.js > Night Manual Work Priority > should continue MANUAL job when night falls
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:0

stdout | src/tests/ManualPriority.test.js > Manual Request Priority and Preemption > should allow manual request to preempt SleepState
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/NightManualWork.test.js > Night Manual Work Priority > should release AUTO job when night falls
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/ManualPriority.test.js > Manual Request Priority and Preemption > should allow manual request to preempt SleepState
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:0
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:0

stdout | src/tests/ManualPriority.test.js > Manual Request Priority and Preemption > should NOT allow auto request to preempt CombatState
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/ManualPriority.test.js > Manual Request Priority and Preemption > should NOT allow auto request to preempt CombatState
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:1

stdout | src/tests/NightManualWork.test.js > Night Manual Work Priority > should release AUTO job when night falls
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:0

stdout | src/tests/NightManualWork.test.js > Night Manual Work Priority > should prefer MANUAL job over sleep in UnitWanderState at night
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

 ç¬¨ãƒ»src/tests/ManualPriority.test.js (3 tests) 17ms
stdout | src/tests/NightManualWork.test.js > Night Manual Work Priority > should prefer MANUAL job over sleep in UnitWanderState at night
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:0
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:0

stdout | src/tests/NightManualWork.test.js > Night Manual Work Priority > should go to sleep if only AUTO jobs available at night
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/NightManualWork.test.js > Night Manual Work Priority > should go to sleep if only AUTO jobs available at night
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:0
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:0

 ç¬¨ãƒ»src/tests/NightManualWork.test.js (4 tests) 22ms
stdout | src/tests/SaveLoadRestoration.test.js > Save/Load Job Restoration > should restore unit ID and re-link to JobState correctly
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Game] Request Added: raise at (12,12) ID:req_0
[Game] forceAssignRequest FOUND Unit 55 (DistSq:8). Scanned:1
[Game] Request req_0 assigned/switched to Unit 55
Saving Game Data: {
  slotId: [33m1[39m,
  timestamp: [33m1767623824419[39m,
  resources: { grain: [33m10[39m, fish: [33m10[39m, meat: [33m10[39m },
  gameTime: [33m8[39m,
  gameTotalTime: [33m0[39m,
  currentSeasonIndex: [90mundefined[39m,
  daysPassed: [90mundefined[39m,
  terrain: {
    logicalWidth: [33m160[39m,
    logicalDepth: [33m160[39m,
    version: [33m2[39m,
    h: [
      [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-4[39m, [33m-3[39m, [33m-2[39m, [33m-1[39m,  [33m0[39m,  [33m1[39m,  [33m2[39m,  [33m4[39m,  [33m5[39m,
       [33m6[39m,  [33m6[39m,  [33m6[39m,  [33m6[39m,  [33m6[39m,  [33m7[39m,  [33m8[39m,  [33m8[39m,  [33m9[39m, [33m10[39m, [33m11[39m, [33m12[39m,
      [33m12[39m, [33m12[39m, [33m11[39m, [33m10[39m, [33m10[39m,  [33m9[39m,  [33m8[39m,  [33m8[39m,  [33m8[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,
       [33m6[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m8[39m,  [33m8[39m,  [33m9[39m,  [33m9[39m, [33m10[39m, [33m10[39m,
       [33m9[39m,  [33m9[39m,  [33m8[39m,  [33m7[39m,  [33m6[39m,  [33m5[39m,  [33m4[39m,  [33m3[39m,  [33m2[39m,  [33m1[39m, [33m-0[39m, [33m-1[39m,
      [33m-2[39m, [33m-3[39m, [33m-3[39m, [33m-4[39m, [33m-4[39m, [33m-4[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-5[39m, [33m-5[39m, [33m-4[39m, [33m-3[39m, [33m-3[39m, [33m-2[39m, [33m-2[39m, [33m-1[39m, [33m-1[39m,  [33m0[39m,  [33m1[39m,  [33m1[39m,
       [33m2[39m,  [33m4[39m,  [33m5[39m,  [33m6[39m,  [33m7[39m,  [33m8[39m,  [33m9[39m, [33m10[39m, [33m11[39m, [33m12[39m, [33m13[39m, [33m14[39m,
      [33m14[39m, [33m14[39m, [33m14[39m, [33m14[39m,
      ... 25500 more items
    ],
    n: [
      [33m-0.01[39m,     [33m0[39m,  [33m0.01[39m,     [33m0[39m,  [33m0.01[39m,  [33m0.01[39m,     [33m0[39m, [33m-0.01[39m, [33m-0.02[39m,
      [33m-0.01[39m,     [33m0[39m,    [33m-0[39m,    [33m-0[39m,    [33m-0[39m,  [33m0.01[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.02[39m,
          [33m0[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.01[39m,     [33m0[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.01[39m,  [33m0.02[39m,
       [33m0.02[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.01[39m, [33m-0.01[39m,     [33m0[39m,    [33m-0[39m,
         [33m-0[39m,  [33m0.02[39m,  [33m0.01[39m, [33m-0.02[39m,    [33m-0[39m,  [33m0.01[39m,  [33m0.01[39m,     [33m0[39m,  [33m0.02[39m,
      [33m-0.01[39m, [33m-0.01[39m,  [33m0.01[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.02[39m,  [33m0.02[39m,
      [33m-0.01[39m,    [33m-0[39m,    [33m-0[39m, [33m-0.01[39m,    [33m-0[39m, [33m-0.01[39m, [33m-0.01[39m,  [33m0.02[39m, [33m-0.01[39m,
      [33m-0.02[39m, [33m-0.01[39m, [33m-0.02[39m, [33m-0.02[39m,  [33m0.01[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.02[39m,
      [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.01[39m, [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m,  [33m0.01[39m,     [33m0[39m,
          [33m0[39m, [33m-0.01[39m, [33m-0.02[39m,  [33m0.02[39m,    [33m-0[39m, [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.01[39m,
       [33m0.02[39m, [33m-0.02[39m,  [33m0.01[39m,     [33m0[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.01[39m,  [33m0.01[39m,  [33m0.02[39m,
       [33m0.01[39m,
      ... 25500 more items
    ],
    b: [],
    m: [
       [33m0.8[39m, [33m0.79[39m, [33m0.75[39m, [33m0.71[39m, [33m0.67[39m, [33m0.63[39m, [33m0.61[39m, [33m0.58[39m, [33m0.56[39m, [33m0.52[39m,
      [33m0.49[39m, [33m0.46[39m, [33m0.44[39m, [33m0.43[39m, [33m0.43[39m, [33m0.42[39m, [33m0.41[39m, [33m0.39[39m, [33m0.36[39m, [33m0.34[39m,
      [33m0.31[39m,  [33m0.3[39m, [33m0.29[39m, [33m0.29[39m, [33m0.29[39m, [33m0.29[39m, [33m0.31[39m, [33m0.33[39m, [33m0.34[39m, [33m0.36[39m,
      [33m0.38[39m, [33m0.39[39m,  [33m0.4[39m, [33m0.39[39m, [33m0.36[39m, [33m0.33[39m, [33m0.31[39m, [33m0.31[39m, [33m0.31[39m, [33m0.31[39m,
      [33m0.31[39m, [33m0.31[39m, [33m0.32[39m, [33m0.34[39m, [33m0.35[39m, [33m0.36[39m, [33m0.37[39m, [33m0.38[39m,  [33m0.4[39m, [33m0.41[39m,
      [33m0.42[39m, [33m0.44[39m, [33m0.46[39m, [33m0.49[39m, [33m0.53[39m, [33m0.56[39m, [33m0.59[39m, [33m0.61[39m, [33m0.63[39m, [33m0.65[39m,
      [33m0.67[39m, [33m0.69[39m,  [33m0.7[39m, [33m0.71[39m, [33m0.72[39m, [33m0.71[39m, [33m0.68[39m, [33m0.65[39m, [33m0.61[39m, [33m0.58[39m,
      [33m0.56[39m, [33m0.53[39m, [33m0.52[39m,  [33m0.5[39m, [33m0.48[39m, [33m0.46[39m, [33m0.45[39m, [33m0.44[39m, [33m0.45[39m, [33m0.44[39m,
      [33m0.44[39m, [33m0.43[39m, [33m0.42[39m, [33m0.43[39m, [33m0.43[39m, [33m0.42[39m, [33m0.42[39m, [33m0.42[39m, [33m0.41[39m, [33m0.41[39m,
      [33m0.39[39m, [33m0.39[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m,
      ... 25500 more items
    ]
  },
  units: [
    {
      id: [33m55[39m,
      gridX: [33m10[39m,
      gridZ: [33m10[39m,
      age: [33m20[39m,
      lifespan: [33m81.35738412647754[39m,
      isDead: [33mfalse[39m,
      isFinished: [90mundefined[39m,
      isMoving: [33mtrue[39m,
      targetX: [33m0[39m,
      targetZ: [33m0[39m,
      moveStartTime: [33m0[39m,
      moveDuration: [33m2.1313708498984765[39m,
      startGridX: [33m10[39m,
      startGridZ: [33m10[39m,
      targetGridX: [33m11[39m,
      targetGridZ: [33m11[39m,
      isSpecial: [33mfalse[39m,
      role: [32m'worker'[39m,
      hp: [33m36[39m,
      maxHp: [33m36[39m,
      damage: [33m4[39m,
      xp: [33m0[39m,
      level: [33m1[39m,
      name: [90mundefined[39m,
      homeBaseGridX: [90mundefined[39m,
      homeBaseGridZ: [90mundefined[39m,
      squadId: [1mnull[22m,
      targetRequestId: [32m'req_manual_1'[39m
    }
  ],
  goblinManager: {},
  camera: {
    position: { x: [33m20[39m, y: [33m20[39m, z: [33m20[39m },
    zoom: [33m1[39m,
    target: { x: [90mundefined[39m, y: [90mundefined[39m, z: [90mundefined[39m }
  },
  requests: [
    {
      id: [32m'req_manual_1'[39m,
      type: [32m'raise'[39m,
      x: [33m12[39m,
      z: [33m12[39m,
      status: [32m'assigned'[39m,
      assignedTo: [33m55[39m,
      createdAt: [33m0[39m,
      isManual: [33mtrue[39m
    }
  ]
}
Saved to slot 1 (Compressed). Size: 24661 chars (Original: 308244)
Load Started...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should save game data correctly
Saving Game Data: {
  slotId: [33m1[39m,
  timestamp: [33m1767623824480[39m,
  resources: { grain: [33m100[39m, fish: [33m50[39m, meat: [33m25[39m },
  gameTime: [33m12[39m,
  gameTotalTime: [33m0[39m,
  currentSeasonIndex: [90mundefined[39m,
  daysPassed: [90mundefined[39m,
  terrain: {
    logicalWidth: [33m160[39m,
    logicalDepth: [33m160[39m,
    version: [33m2[39m,
    h: [
      [33m13[39m, [33m13[39m, [33m13[39m, [33m12[39m, [33m11[39m, [33m10[39m,  [33m9[39m,  [33m9[39m,  [33m8[39m,  [33m8[39m,  [33m7[39m,  [33m6[39m,
       [33m6[39m,  [33m5[39m,  [33m5[39m,  [33m4[39m,  [33m3[39m,  [33m3[39m,  [33m4[39m,  [33m4[39m,  [33m4[39m,  [33m4[39m,  [33m3[39m,  [33m3[39m,
       [33m2[39m,  [33m2[39m,  [33m1[39m,  [33m1[39m,  [33m0[39m, [33m-0[39m, [33m-1[39m, [33m-1[39m, [33m-1[39m, [33m-1[39m, [33m-0[39m,  [33m1[39m,
       [33m2[39m,  [33m3[39m,  [33m3[39m,  [33m3[39m,  [33m4[39m,  [33m3[39m,  [33m3[39m,  [33m3[39m,  [33m2[39m,  [33m2[39m,  [33m2[39m,  [33m2[39m,
       [33m2[39m,  [33m2[39m,  [33m2[39m,  [33m2[39m,  [33m2[39m,  [33m1[39m,  [33m1[39m, [33m-0[39m, [33m-0[39m, [33m-1[39m, [33m-1[39m, [33m-1[39m,
      [33m-1[39m, [33m-2[39m, [33m-2[39m, [33m-2[39m, [33m-2[39m, [33m-2[39m, [33m-1[39m, [33m-1[39m,  [33m0[39m,  [33m1[39m,  [33m2[39m,  [33m3[39m,
       [33m3[39m,  [33m4[39m,  [33m4[39m,  [33m5[39m,  [33m5[39m,  [33m5[39m,  [33m6[39m,  [33m6[39m,  [33m6[39m,  [33m5[39m,  [33m5[39m,  [33m5[39m,
       [33m4[39m,  [33m4[39m,  [33m3[39m,  [33m3[39m,  [33m3[39m,  [33m2[39m,  [33m2[39m,  [33m2[39m,  [33m2[39m,  [33m2[39m,  [33m1[39m,  [33m1[39m,
       [33m1[39m,  [33m1[39m,  [33m1[39m,  [33m2[39m,
      ... 25500 more items
    ],
    n: [
       [33m0.01[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.01[39m, [33m-0.02[39m,    [33m-0[39m, [33m-0.02[39m,
         [33m-0[39m,     [33m0[39m, [33m-0.01[39m,  [33m0.01[39m,    [33m-0[39m,    [33m-0[39m,  [33m0.01[39m, [33m-0.01[39m,     [33m0[39m,
       [33m0.01[39m,  [33m0.01[39m,     [33m0[39m, [33m-0.01[39m,  [33m0.02[39m,    [33m-0[39m, [33m-0.02[39m,  [33m0.02[39m,  [33m0.01[39m,
          [33m0[39m,  [33m0.01[39m, [33m-0.01[39m,  [33m0.01[39m,  [33m0.02[39m,  [33m0.02[39m,    [33m-0[39m,  [33m0.02[39m,  [33m0.02[39m,
       [33m0.02[39m, [33m-0.01[39m, [33m-0.01[39m,  [33m0.02[39m, [33m-0.01[39m, [33m-0.01[39m, [33m-0.01[39m,     [33m0[39m,  [33m0.01[39m,
      [33m-0.01[39m, [33m-0.02[39m,  [33m0.02[39m, [33m-0.02[39m,    [33m-0[39m, [33m-0.01[39m,  [33m0.02[39m,    [33m-0[39m, [33m-0.02[39m,
      [33m-0.02[39m, [33m-0.01[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.02[39m,  [33m0.01[39m, [33m-0.01[39m,  [33m0.01[39m,
         [33m-0[39m,  [33m0.01[39m, [33m-0.01[39m,    [33m-0[39m,    [33m-0[39m, [33m-0.02[39m,    [33m-0[39m,  [33m0.02[39m,    [33m-0[39m,
       [33m0.01[39m, [33m-0.01[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.02[39m,
      [33m-0.02[39m,  [33m0.02[39m,     [33m0[39m,     [33m0[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.01[39m, [33m-0.02[39m,     [33m0[39m,
         [33m-0[39m,     [33m0[39m, [33m-0.01[39m, [33m-0.02[39m,  [33m0.02[39m, [33m-0.02[39m,    [33m-0[39m,  [33m0.02[39m,  [33m0.02[39m,
      [33m-0.02[39m,
      ... 25500 more items
    ],
    b: [],
    m: [
      [33m0.23[39m, [33m0.24[39m, [33m0.26[39m, [33m0.29[39m, [33m0.32[39m, [33m0.35[39m, [33m0.38[39m, [33m0.41[39m, [33m0.44[39m, [33m0.45[39m,
      [33m0.47[39m, [33m0.48[39m,  [33m0.5[39m, [33m0.52[39m, [33m0.54[39m, [33m0.55[39m, [33m0.56[39m, [33m0.58[39m,  [33m0.6[39m, [33m0.61[39m,
      [33m0.62[39m, [33m0.62[39m, [33m0.62[39m, [33m0.63[39m, [33m0.63[39m, [33m0.64[39m, [33m0.64[39m, [33m0.64[39m, [33m0.64[39m, [33m0.65[39m,
      [33m0.67[39m, [33m0.68[39m, [33m0.69[39m, [33m0.68[39m, [33m0.67[39m, [33m0.65[39m, [33m0.65[39m, [33m0.66[39m, [33m0.68[39m, [33m0.69[39m,
      [33m0.69[39m, [33m0.68[39m, [33m0.67[39m, [33m0.65[39m, [33m0.63[39m, [33m0.63[39m, [33m0.62[39m, [33m0.61[39m, [33m0.61[39m, [33m0.61[39m,
       [33m0.6[39m, [33m0.58[39m, [33m0.57[39m, [33m0.57[39m, [33m0.57[39m, [33m0.57[39m, [33m0.57[39m, [33m0.58[39m,  [33m0.6[39m, [33m0.62[39m,
      [33m0.63[39m, [33m0.64[39m, [33m0.64[39m, [33m0.63[39m, [33m0.62[39m, [33m0.63[39m, [33m0.63[39m, [33m0.64[39m, [33m0.63[39m, [33m0.61[39m,
      [33m0.58[39m, [33m0.57[39m, [33m0.56[39m, [33m0.57[39m, [33m0.58[39m,  [33m0.6[39m, [33m0.62[39m, [33m0.63[39m, [33m0.64[39m, [33m0.63[39m,
      [33m0.63[39m, [33m0.62[39m, [33m0.61[39m,  [33m0.6[39m, [33m0.58[39m, [33m0.56[39m, [33m0.54[39m, [33m0.52[39m, [33m0.51[39m, [33m0.49[39m,
      [33m0.47[39m, [33m0.46[39m, [33m0.44[39m, [33m0.44[39m, [33m0.44[39m, [33m0.44[39m, [33m0.44[39m, [33m0.44[39m, [33m0.42[39m, [33m0.41[39m,
      ... 25500 more items
    ]
  },
  units: [],
  goblinManager: {},
  camera: {
    position: { x: [33m20[39m, y: [33m20[39m, z: [33m20[39m },
    zoom: [33m1[39m,
    target: { x: [90mundefined[39m, y: [90mundefined[39m, z: [90mundefined[39m }
  },
  requests: []
}
Saved to slot 1 (Compressed). Size: 24835 chars (Original: 309905)

stdout | src/tests/SaveLoadRestoration.test.js > Save/Load Job Restoration > should restore unit ID and re-link to JobState correctly
Loading slot 1, Raw length: 24661
Load: Decompressed successfully.
Parsed Data for slot 1: {
  timestamp: [33m1767623824428[39m,
  data: {
    slotId: [33m1[39m,
    timestamp: [33m1767623824419[39m,
    resources: { grain: [33m10[39m, fish: [33m10[39m, meat: [33m10[39m },
    gameTime: [33m8[39m,
    gameTotalTime: [33m0[39m,
    terrain: {
      logicalWidth: [33m160[39m,
      logicalDepth: [33m160[39m,
      version: [33m2[39m,
      h: [36m[Array][39m,
      n: [36m[Array][39m,
      b: [],
      m: [36m[Array][39m
    },
    units: [ [36m[Object][39m ],
    goblinManager: {},
    camera: { position: [36m[Object][39m, zoom: [33m1[39m, target: {} },
    requests: [ [36m[Object][39m ]
  }
}
Load Game: Data found {
  slotId: [33m1[39m,
  timestamp: [33m1767623824419[39m,
  resources: { grain: [33m10[39m, fish: [33m10[39m, meat: [33m10[39m },
  gameTime: [33m8[39m,
  gameTotalTime: [33m0[39m,
  terrain: {
    logicalWidth: [33m160[39m,
    logicalDepth: [33m160[39m,
    version: [33m2[39m,
    h: [
      [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-4[39m, [33m-3[39m, [33m-2[39m, [33m-1[39m,  [33m0[39m,  [33m1[39m,  [33m2[39m,  [33m4[39m,  [33m5[39m,
       [33m6[39m,  [33m6[39m,  [33m6[39m,  [33m6[39m,  [33m6[39m,  [33m7[39m,  [33m8[39m,  [33m8[39m,  [33m9[39m, [33m10[39m, [33m11[39m, [33m12[39m,
      [33m12[39m, [33m12[39m, [33m11[39m, [33m10[39m, [33m10[39m,  [33m9[39m,  [33m8[39m,  [33m8[39m,  [33m8[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,
       [33m6[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m8[39m,  [33m8[39m,  [33m9[39m,  [33m9[39m, [33m10[39m, [33m10[39m,
       [33m9[39m,  [33m9[39m,  [33m8[39m,  [33m7[39m,  [33m6[39m,  [33m5[39m,  [33m4[39m,  [33m3[39m,  [33m2[39m,  [33m1[39m,  [33m0[39m, [33m-1[39m,
      [33m-2[39m, [33m-3[39m, [33m-3[39m, [33m-4[39m, [33m-4[39m, [33m-4[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-5[39m, [33m-5[39m, [33m-4[39m, [33m-3[39m, [33m-3[39m, [33m-2[39m, [33m-2[39m, [33m-1[39m, [33m-1[39m,  [33m0[39m,  [33m1[39m,  [33m1[39m,
       [33m2[39m,  [33m4[39m,  [33m5[39m,  [33m6[39m,  [33m7[39m,  [33m8[39m,  [33m9[39m, [33m10[39m, [33m11[39m, [33m12[39m, [33m13[39m, [33m14[39m,
      [33m14[39m, [33m14[39m, [33m14[39m, [33m14[39m,
      ... 25500 more items
    ],
    n: [
      [33m-0.01[39m,     [33m0[39m,  [33m0.01[39m,     [33m0[39m,  [33m0.01[39m,  [33m0.01[39m,     [33m0[39m, [33m-0.01[39m, [33m-0.02[39m,
      [33m-0.01[39m,     [33m0[39m,     [33m0[39m,     [33m0[39m,     [33m0[39m,  [33m0.01[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.02[39m,
          [33m0[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.01[39m,     [33m0[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.01[39m,  [33m0.02[39m,
       [33m0.02[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.01[39m, [33m-0.01[39m,     [33m0[39m,     [33m0[39m,
          [33m0[39m,  [33m0.02[39m,  [33m0.01[39m, [33m-0.02[39m,     [33m0[39m,  [33m0.01[39m,  [33m0.01[39m,     [33m0[39m,  [33m0.02[39m,
      [33m-0.01[39m, [33m-0.01[39m,  [33m0.01[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.02[39m,  [33m0.02[39m,
      [33m-0.01[39m,     [33m0[39m,     [33m0[39m, [33m-0.01[39m,     [33m0[39m, [33m-0.01[39m, [33m-0.01[39m,  [33m0.02[39m, [33m-0.01[39m,
      [33m-0.02[39m, [33m-0.01[39m, [33m-0.02[39m, [33m-0.02[39m,  [33m0.01[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.02[39m,
      [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.01[39m, [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m,  [33m0.01[39m,     [33m0[39m,
          [33m0[39m, [33m-0.01[39m, [33m-0.02[39m,  [33m0.02[39m,     [33m0[39m, [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.01[39m,
       [33m0.02[39m, [33m-0.02[39m,  [33m0.01[39m,     [33m0[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.01[39m,  [33m0.01[39m,  [33m0.02[39m,
       [33m0.01[39m,
      ... 25500 more items
    ],
    b: [],
    m: [
       [33m0.8[39m, [33m0.79[39m, [33m0.75[39m, [33m0.71[39m, [33m0.67[39m, [33m0.63[39m, [33m0.61[39m, [33m0.58[39m, [33m0.56[39m, [33m0.52[39m,
      [33m0.49[39m, [33m0.46[39m, [33m0.44[39m, [33m0.43[39m, [33m0.43[39m, [33m0.42[39m, [33m0.41[39m, [33m0.39[39m, [33m0.36[39m, [33m0.34[39m,
      [33m0.31[39m,  [33m0.3[39m, [33m0.29[39m, [33m0.29[39m, [33m0.29[39m, [33m0.29[39m, [33m0.31[39m, [33m0.33[39m, [33m0.34[39m, [33m0.36[39m,
      [33m0.38[39m, [33m0.39[39m,  [33m0.4[39m, [33m0.39[39m, [33m0.36[39m, [33m0.33[39m, [33m0.31[39m, [33m0.31[39m, [33m0.31[39m, [33m0.31[39m,
      [33m0.31[39m, [33m0.31[39m, [33m0.32[39m, [33m0.34[39m, [33m0.35[39m, [33m0.36[39m, [33m0.37[39m, [33m0.38[39m,  [33m0.4[39m, [33m0.41[39m,
      [33m0.42[39m, [33m0.44[39m, [33m0.46[39m, [33m0.49[39m, [33m0.53[39m, [33m0.56[39m, [33m0.59[39m, [33m0.61[39m, [33m0.63[39m, [33m0.65[39m,
      [33m0.67[39m, [33m0.69[39m,  [33m0.7[39m, [33m0.71[39m, [33m0.72[39m, [33m0.71[39m, [33m0.68[39m, [33m0.65[39m, [33m0.61[39m, [33m0.58[39m,
      [33m0.56[39m, [33m0.53[39m, [33m0.52[39m,  [33m0.5[39m, [33m0.48[39m, [33m0.46[39m, [33m0.45[39m, [33m0.44[39m, [33m0.45[39m, [33m0.44[39m,
      [33m0.44[39m, [33m0.43[39m, [33m0.42[39m, [33m0.43[39m, [33m0.43[39m, [33m0.42[39m, [33m0.42[39m, [33m0.42[39m, [33m0.41[39m, [33m0.41[39m,
      [33m0.39[39m, [33m0.39[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m, [33m0.38[39m,
      ... 25500 more items
    ]
  },
  units: [
    {
      id: [33m55[39m,
      gridX: [33m10[39m,
      gridZ: [33m10[39m,
      age: [33m20[39m,
      lifespan: [33m81.35738412647754[39m,
      isDead: [33mfalse[39m,
      isMoving: [33mtrue[39m,
      targetX: [33m0[39m,
      targetZ: [33m0[39m,
      moveStartTime: [33m0[39m,
      moveDuration: [33m2.1313708498984765[39m,
      startGridX: [33m10[39m,
      startGridZ: [33m10[39m,
      targetGridX: [33m11[39m,
      targetGridZ: [33m11[39m,
      isSpecial: [33mfalse[39m,
      role: [32m'worker'[39m,
      hp: [33m36[39m,
      maxHp: [33m36[39m,
      damage: [33m4[39m,
      xp: [33m0[39m,
      level: [33m1[39m,
      squadId: [1mnull[22m,
      targetRequestId: [32m'req_manual_1'[39m
    }
  ],
  goblinManager: {},
  camera: { position: { x: [33m20[39m, y: [33m20[39m, z: [33m20[39m }, zoom: [33m1[39m, target: {} },
  requests: [
    {
      id: [32m'req_manual_1'[39m,
      type: [32m'raise'[39m,
      x: [33m12[39m,
      z: [33m12[39m,
      status: [32m'assigned'[39m,
      assignedTo: [33m55[39m,
      createdAt: [33m0[39m,
      isManual: [33mtrue[39m
    }
  ]
}
Clearing 0 projectiles...

stdout | src/tests/SaveLoadRestoration.test.js > Save/Load Job Restoration > should restore unit ID and re-link to JobState correctly
[DEBUG] Terrain.setSeason: Changing from undefined to Spring
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Game] Restoring 1 requests...
[Game] Re-linked Unit 55 to Request req_manual_1
[Game] Restored Camera Zoom: 1

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
Load Started...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
Loading slot 1, Raw length: 100
Load: Decompressed successfully.
Parsed Data for slot 1: {
  timestamp: [33m1767623825252[39m,
  data: {
    resources: { grain: [33m999[39m, fish: [33m888[39m },
    gameTime: [33m6[39m,
    terrain: { logicalWidth: [33m10[39m, logicalDepth: [33m10[39m, grid: [], buildings: [] },
    units: [],
    camera: { position: [36m[Object][39m, target: [36m[Object][39m }
  }
}
Load Game: Data found {
  resources: { grain: [33m999[39m, fish: [33m888[39m },
  gameTime: [33m6[39m,
  terrain: { logicalWidth: [33m10[39m, logicalDepth: [33m10[39m, grid: [], buildings: [] },
  units: [],
  camera: { position: { x: [33m0[39m, y: [33m0[39m, z: [33m0[39m }, target: { x: [33m0[39m, y: [33m0[39m, z: [33m0[39m } }
}
Clearing 0 projectiles...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[DEBUG] Terrain.setSeason: Changing from undefined to Spring
[Game] Restored Camera Zoom: 1

stdout | src/tests/SaveLoadRestoration.test.js > Save/Load Job Restoration > should reset ghost-assigned requests during load
Load Started...

stdout | src/tests/SaveLoadRestoration.test.js > Save/Load Job Restoration > should reset ghost-assigned requests during load
Loading slot 1, Raw length: 114
Load: Decompressed successfully.
Parsed Data for slot 1: {
  timestamp: [33m1767623825402[39m,
  data: {
    resources: {},
    gameTime: [33m12[39m,
    terrain: { logicalWidth: [33m80[39m, logicalDepth: [33m80[39m, grid: [], buildings: [] },
    units: [],
    requests: [ [36m[Object][39m ]
  }
}
Load Game: Data found {
  resources: {},
  gameTime: [33m12[39m,
  terrain: { logicalWidth: [33m80[39m, logicalDepth: [33m80[39m, grid: [], buildings: [] },
  units: [],
  requests: [
    {
      id: [32m'req_ghost'[39m,
      type: [32m'raise'[39m,
      x: [33m5[39m,
      z: [33m5[39m,
      status: [32m'assigned'[39m,
      assignedTo: [33m99[39m,
      isManual: [33mtrue[39m
    }
  ]
}
Clearing 0 projectiles...

stdout | src/tests/SaveLoadRestoration.test.js > Save/Load Job Restoration > should reset ghost-assigned requests during load
[DEBUG] Terrain.setSeason: Changing from undefined to Spring
[Game] Restoring 1 requests...
[Game] Ghost Assignment Cleaned: Request req_ghost (assigned to 99) reset to pending.

 ç¬¨ãƒ»src/tests/SaveLoadRestoration.test.js (2 tests) 1702ms
     ç¬¨ãƒ»should restore unit ID and re-link to JobState correctly  923ms
     ç¬¨ãƒ»should reset ghost-assigned requests during load  776ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
Load Started...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
Loading slot 1, Raw length: 110
Load: Decompressed successfully.
Parsed Data for slot 1: {
  timestamp: [33m1767623826180[39m,
  data: {
    resources: {},
    gameTime: [33m10[39m,
    terrain: { logicalWidth: [33m80[39m, grid: [], buildings: [] },
    units: [],
    requests: [ [36m[Object][39m, [36m[Object][39m ]
  }
}
Load Game: Data found {
  resources: {},
  gameTime: [33m10[39m,
  terrain: { logicalWidth: [33m80[39m, grid: [], buildings: [] },
  units: [],
  requests: [
    { id: [32m'req_1'[39m, type: [32m'raise'[39m, x: [33m5[39m, z: [33m5[39m, status: [32m'pending'[39m },
    { id: [32m'req_2'[39m, type: [32m'lower'[39m, x: [33m10[39m, z: [33m10[39m, status: [32m'completed'[39m }
  ]
}
Clearing 0 projectiles...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Terrain] Deserializing Legacy Format...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[DEBUG] Terrain.setSeason: Changing from undefined to Spring
[Game] Restoring 2 requests...

 ç¬¨ãƒ»src/tests/SaveLoad.test.js (3 tests) 2503ms
     ç¬¨ãƒ»should save game data correctly  661ms
     ç¬¨ãƒ»should load game data correctly  893ms
     ç¬¨ãƒ»should restore request markers with correct renderOrder  947ms

 Test Files  4 passed (4)
      Tests  12 passed (12)
   Start at  23:37:02
   Duration  4.23s (transform 1.00s, setup 197ms, import 1.66s, tests 4.24s, environment 3.40s)

