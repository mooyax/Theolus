
 RUN  v4.0.15 C:/Users/mooya/develop/test

stderr | src/tests/StuckReassignment.test.js
[DEBUG] Actor.ts loaded

stdout | src/tests/StuckReassignment.test.js
[Import Debug] Raid: function, Combat: function, Wander: function

stdout | src/tests/StuckReassignment.test.js > Stuck/Throttled Job Reassignment > should release job if throttled and not moving for 45s
[GoblinManager] 5蛟九・豢樒ｪ溘ｒ逕滓・荳ｭ...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.183422, 0.750976) -> Grid(29, 120) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.452286, 0.662695) -> Grid(72, 106) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.506214, 0.349624) -> Grid(80, 55) rngState=undefined
[GoblinManager] 豢樒ｪ溽函謌仙ｮ御ｺ・ 0/5 (隧ｦ陦悟屓謨ｰ: 5000)

stderr | src/tests/StuckReassignment.test.js > Stuck/Throttled Job Reassignment > should release job if throttled and not moving for 45s
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
stdout | src/tests/StuckReassignment.test.js > Stuck/Throttled Job Reassignment > should release job if throttled and not moving for 45s
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:70,70 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:70,70
[UnitCore.js] Unit Construction Finished ID:0
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[Entity 1] Calling updatePosition...
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[Entity 1] updatePosition returned.
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:1
[Game] Request Added: raise at (80,80) ID:req_0
[Unit 0] State Change: Wander -> Job
[Actor 0]smartMove: triggers pathfinding.Dist: 14.1 Time:0.0 Last:0.0 Throttle:1.00 Action:Approaching Job 
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobState] Unit Stuck for 5s. Abandoning Job. DistSq: 200.0
[Unit 0] State Change: Job -> Wander
[Unit 0] State Change: Wander -> Job
[Unit 0] State Change: Job -> Job
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobState] Unit Stuck for 5s. Abandoning Job. DistSq: 200.0
[Unit 0] State Change: Job -> Wander
[Unit 0] State Change: Wander -> Job
[Unit 0] State Change: Job -> Job
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobState] Unit Stuck for 5s. Abandoning Job. DistSq: 200.0
[Unit 0] State Change: Job -> Wander
[Unit 0] State Change: Wander -> Job
[Unit 0] State Change: Job -> Job
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobState] Unit Stuck for 5s. Abandoning Job. DistSq: 200.0
[Unit 0] State Change: Job -> Wander
[Unit 0] State Change: Wander -> Job
[Unit 0] State Change: Job -> Job
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned
[JobCheck] Unit:0 Req:req_0 Assigned:0 Status:assigned

[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00
[JobState update] id:0 act:Approaching Job mv:false pf:false stk:0.00

stdout | src/tests/StuckReassignment.test.js > Stuck/Throttled Job Reassignment > should release job if throttled and not moving for 45s
[Game] Dispose called for Game Instance.

 笶ｯ src/tests/StuckReassignment.test.js (1 test | 1 failed) 31ms
     ﾃ・should release job if throttled and not moving for 45s 30ms

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ Failed Tests 1 竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ

 FAIL  src/tests/StuckReassignment.test.js > Stuck/Throttled Job Reassignment > should release job if throttled and not moving for 45s
AssertionError: expected 'assigned' to be 'pending' // Object.is equality

Expected: "pending"
Received: "assigned"

 笶ｯ src/tests/StuckReassignment.test.js:100:28

     98| 
     99|         // Unit1 should have RELEASED the job and NOT picked it up yet窶ｦ
    100|         expect(req.status).toBe('pending');
       |                            ^
    101|         expect(req.assignedTo).toBeNull();
    102|         expect(unit1.targetRequest).toBeNull();

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[1/1]竡ｯ

 Test Files  1 failed (1)
      Tests  1 failed (1)
   Start at  15:41:02
   Duration  1.23s (transform 504ms, setup 71ms, import 567ms, tests 31ms, environment 404ms)

