
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/RequestLifecycle.test.js[2m > [22m[2mGame Request Lifecycle[2m > [22m[2mshould tag new requests with createdAt timestamp
[22m[39mGame constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 91,158. Force:false
[Terrain] Building Added: cave at (91, 158) Size:1x1. Total: 1
GoblinManager: Cave registered at 91,158 
[GoblinManager] Clan clan_cave_91_158 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 45,24. Force:false
[Terrain] Building Added: cave at (45, 24) Size:1x1. Total: 2
GoblinManager: Cave registered at 45,24 
[GoblinManager] Clan clan_cave_45_24 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 7,10. Force:false
[Terrain] Building Added: cave at (7, 10) Size:1x1. Total: 3
GoblinManager: Cave registered at 7,10 
[GoblinManager] Clan clan_cave_7_10 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 11,143. Force:false
[Terrain] Building Added: cave at (11, 143) Size:1x1. Total: 4
GoblinManager: Cave registered at 11,143 
[GoblinManager] Clan clan_cave_11_143 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 69,155. Force:false
[Terrain] Building Added: cave at (69, 155) Size:1x1. Total: 5
GoblinManager: Cave registered at 69,155 
[GoblinManager] Clan clan_cave_69_155 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/RequestLifecycle.test.js[2m > [22m[2mGame Request Lifecycle[2m > [22m[2mshould cleanup expired pending requests
[22m[39mGame constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 21,55. Force:false
[Terrain] Building Added: cave at (21, 55) Size:1x1. Total: 1
GoblinManager: Cave registered at 21,55 
[GoblinManager] Clan clan_cave_21_55 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 155,29. Force:false
[Terrain] Building Added: cave at (155, 29) Size:1x1. Total: 2
GoblinManager: Cave registered at 155,29 
[GoblinManager] Clan clan_cave_155_29 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 146,49. Force:false
[Terrain] Building Added: cave at (146, 49) Size:1x1. Total: 3
GoblinManager: Cave registered at 146,49 
[GoblinManager] Clan clan_cave_146_49 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 158,156. Force:false
[Terrain] Building Added: cave at (158, 156) Size:1x1. Total: 4
GoblinManager: Cave registered at 158,156 
[GoblinManager] Clan clan_cave_158_156 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 78,132. Force:false
[Terrain] Building Added: cave at (78, 132) Size:1x1. Total: 5
GoblinManager: Cave registered at 78,132 
[GoblinManager] Clan clan_cave_78_132 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 14 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/RequestLifecycle.test.js[2m > [22m[2mGame Request Lifecycle[2m > [22m[2mshould NOT cleanup assigned requests even if old
[22m[39mGame constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 32,101. Force:false
[Terrain] Building Added: cave at (32, 101) Size:1x1. Total: 1
GoblinManager: Cave registered at 32,101 
[GoblinManager] Clan clan_cave_32_101 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 130,156. Force:false
[Terrain] Building Added: cave at (130, 156) Size:1x1. Total: 2
GoblinManager: Cave registered at 130,156 
[GoblinManager] Clan clan_cave_130_156 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 117,76. Force:false
[Terrain] Building Added: cave at (117, 76) Size:1x1. Total: 3
GoblinManager: Cave registered at 117,76 
[GoblinManager] Clan clan_cave_117_76 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 155,77. Force:false
[Terrain] Building Added: cave at (155, 77) Size:1x1. Total: 4
GoblinManager: Cave registered at 155,77 
[GoblinManager] Clan clan_cave_155_77 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 106,158. Force:false
[Terrain] Building Added: cave at (106, 158) Size:1x1. Total: 5
GoblinManager: Cave registered at 106,158 
[GoblinManager] Clan clan_cave_106_158 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 7 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/RequestLifecycle.test.js[2m > [22m[2mGame Request Lifecycle[2m > [22m[2mshould cancel request via Proximity Search
[22m[39mGame constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 98,75. Force:false
[Terrain] Building Added: cave at (98, 75) Size:1x1. Total: 1
GoblinManager: Cave registered at 98,75 
[GoblinManager] Clan clan_cave_98_75 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 71,126. Force:false
[Terrain] Building Added: cave at (71, 126) Size:1x1. Total: 2
GoblinManager: Cave registered at 71,126 
[GoblinManager] Clan clan_cave_71_126 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 43,125. Force:false
[Terrain] Building Added: cave at (43, 125) Size:1x1. Total: 3
GoblinManager: Cave registered at 43,125 
[GoblinManager] Clan clan_cave_43_125 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 36,71. Force:false
[Terrain] Building Added: cave at (36, 71) Size:1x1. Total: 4
GoblinManager: Cave registered at 36,71 
[GoblinManager] Clan clan_cave_36_71 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 49,49. Force:false
[Terrain] Building Added: cave at (49, 49) Size:1x1. Total: 5
GoblinManager: Cave registered at 49,49 
[GoblinManager] Clan clan_cave_49_49 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 8 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/RequestLifecycle.test.js[2m > [22m[2mGame Request Lifecycle[2m > [22m[2mshould prioritize nearest request when cancelling
[22m[39mGame constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 130,42. Force:false
[Terrain] Building Added: cave at (130, 42) Size:1x1. Total: 1
GoblinManager: Cave registered at 130,42 
[GoblinManager] Clan clan_cave_130_42 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 8,119. Force:false
[Terrain] Building Added: cave at (8, 119) Size:1x1. Total: 2
GoblinManager: Cave registered at 8,119 
[GoblinManager] Clan clan_cave_8_119 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 29,156. Force:false
[Terrain] Building Added: cave at (29, 156) Size:1x1. Total: 3
GoblinManager: Cave registered at 29,156 
[GoblinManager] Clan clan_cave_29_156 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 77,0. Force:false
[Terrain] Building Added: cave at (77, 0) Size:1x1. Total: 4
GoblinManager: Cave registered at 77,0 
[GoblinManager] Clan clan_cave_77_0 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 144,42. Force:false
[Terrain] Building Added: cave at (144, 42) Size:1x1. Total: 5
GoblinManager: Cave registered at 144,42 
[GoblinManager] Clan clan_cave_144_42 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 9 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

 [31mç¬¶ï½¯[39m src/tests/RequestLifecycle.test.js [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 979[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should tag new requests with createdAt timestamp[39m[32m 300[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should cleanup expired pending requests[39m[32m 204[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should NOT cleanup assigned requests even if old[39m[32m 160[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should cancel request via Proximity Search[39m[32m 166[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should prioritize nearest request when cancelling[39m[32m 147[2mms[22m[39m

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Failed Tests 5 ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

 FAIL  src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should tag new requests with createdAt timestamp
 FAIL  src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cleanup expired pending requests
 FAIL  src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should NOT cleanup assigned requests even if old
 FAIL  src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cancel request via Proximity Search
 FAIL  src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should prioritize nearest request when cancelling
TypeError: this.wrapper.appendChild is not a function
 ç¬¶ï½¯ new Compass src/Compass.js:22:22
     20|         this.canvas.width = 60; // Resized from 100
     21|         this.canvas.height = 60;
     22|         this.wrapper.appendChild(this.canvas);
       |                      ^
     23| 
     24|         this.ctx = this.canvas.getContext('2d');
 ç¬¶ï½¯ new Game src/Game.js:155:24
 ç¬¶ï½¯ src/tests/RequestLifecycle.test.js:228:16

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[1/5]ç«¡ï½¯


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[90m (5)[39m
[2m   Start at [22m 22:35:20
[2m   Duration [22m 2.29s[2m (transform 351ms, setup 37ms, import 478ms, tests 979ms, environment 557ms)[22m

