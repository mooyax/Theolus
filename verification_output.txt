
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/BuildingDefense.test.js
[22m[39m[DEBUG] Actor.ts loaded

[90mstdout[2m | src/tests/GroupCombat.test.js
[22m[39m[DEBUG] Actor.ts loaded

[90mstdout[2m | src/tests/GroupCombat.test.js
[22m[39m[DEBUG] Goblin.ts loaded

[90mstdout[2m | src/tests/BuildingDefense.test.js
[22m[39m[DEBUG] Goblin.ts loaded

[90mstdout[2m | src/tests/GroupCombat.test.js
[22m[39m[DEBUG] Building.ts loaded

[90mstdout[2m | src/tests/WinLossCondition.test.js
[22m[39m[DEBUG] Building.ts loaded

[90mstdout[2m | src/tests/WinLossCondition.test.js
[22m[39m[DEBUG] Terrain.ts top-level load

[90mstdout[2m | src/tests/BuildingDefense.test.js[2m > [22m[2mBuilding Defense Logic[2m > [22m[2mGoblins deal population damage to player buildings
[22m[39m[Entity 0] CONSTRUCTOR START: type=goblin at 12,12
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Actor 0] CHANGE STATE: None -> Wander Request:null 
Goblin Raid: House population reduced. Rem: 9 

[90mstdout[2m | src/tests/BuildingDefense.test.js[2m > [22m[2mBuilding Defense Logic[2m > [22m[2mGoblins deal structural damage to empty player buildings
[22m[39m[Entity 1] CONSTRUCTOR START: type=goblin at 12,12
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

[90mstdout[2m | src/tests/BuildingDefense.test.js[2m > [22m[2mBuilding Defense Logic[2m > [22m[2mGoblins destroy player buildings when HP reaches 0
[22m[39m[Entity 2] CONSTRUCTOR START: type=goblin at 12,12
[Entity 2] Calling registerEntity...
[Entity 2] registerEntity returned.
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Goblin destroyed Building house (Legacy)!
Goblin 2 destroyed house !

[90mstdout[2m | src/tests/BuildingDefense.test.js[2m > [22m[2mBuilding Defense Logic[2m > [22m[2mBuildings retaliate against melee goblins
[22m[39m[Entity 3] CONSTRUCTOR START: type=goblin at 11,11
[Entity 3] Calling registerEntity...
[Entity 3] registerEntity returned.
[Entity 3] Calling updatePosition...
[Entity 3] updatePosition returned.
[DIAG] Actor Created ID: 3
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Goblin Raid: House population reduced. Rem: 9 

[90mstdout[2m | src/tests/BuildingDefense.test.js[2m > [22m[2mBuilding Defense Logic[2m > [22m[2mTowers have massive retaliation
[22m[39m[Entity 4] CONSTRUCTOR START: type=goblin at 11,11
[Entity 4] Calling registerEntity...
[Entity 4] registerEntity returned.
[Entity 4] Calling updatePosition...
[Entity 4] updatePosition returned.
[DIAG] Actor Created ID: 4
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Goblin Raid: House population reduced. Rem: 4 

[90mstdout[2m | src/tests/GroupCombat.test.js
[22m[39m[DEBUG] Terrain.ts top-level load

[90mstdout[2m | src/tests/BuildingDefense.test.js[2m > [22m[2mBuilding Defense Logic[2m > [22m[2mNo retaliation for distant attackers (Shamans)
[22m[39m[Entity 5] CONSTRUCTOR START: type=goblin at 15,15
[Entity 5] Calling registerEntity...
[Entity 5] registerEntity returned.
[Entity 5] Calling updatePosition...
[Entity 5] updatePosition returned.
[DIAG] Actor Created ID: 5
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Goblin Raid: House population reduced. Rem: 7 

[90mstdout[2m | src/tests/BuildingDefense.test.js[2m > [22m[2mBuilding Defense Logic[2m > [22m[2mGoblins can target buildings with 0 population but > 0 structural HP
[22m[39m[Entity 6] CONSTRUCTOR START: type=goblin at 12,12
[Entity 6] Calling registerEntity...
[Entity 6] registerEntity returned.
[Entity 6] Calling updatePosition...
[Entity 6] updatePosition returned.
[DIAG] Actor Created ID: 6
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

[90mstdout[2m | src/tests/BuildingDefense.test.js[2m > [22m[2mBuilding Defense Logic[2m > [22m[2mStandard HP logic for Goblin buildings
[22m[39m[Entity 7] CONSTRUCTOR START: type=unit at 20,20
[Entity 7] Calling registerEntity...
[Entity 7] registerEntity returned.
[Entity 7] Calling updatePosition...
[Entity 7] updatePosition returned.
[DIAG] Actor Created ID: 7
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:knight Pos:20,20 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:knight Pos:20,20
[UnitCore.js] Unit Construction Finished ID:0

 [32mç¬¨ãƒ»[39m src/tests/BuildingDefense.test.js [2m([22m[2m8 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | src/tests/WinLossCondition.test.js
[22m[39m[DEBUG] Actor.ts loaded

[90mstdout[2m | src/tests/GroupCombat.test.js
[22m[39m[Import Debug] Raid: function, Combat: function, Wander: function

[90mstdout[2m | src/tests/WinLossCondition.test.js
[22m[39m[DEBUG] Goblin.ts loaded

[90mstdout[2m | src/tests/WinLossCondition.test.js
[22m[39m[Import Debug] Raid: function, Combat: function, Wander: function

[90mstdout[2m | src/tests/WinLossCondition.test.js
[22m[39m[DEBUG] Game.ts top-level load

[90mstdout[2m | src/tests/GroupCombat.test.js
[22m[39m[DEBUG] Game.ts top-level load

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario: 5 Goblins vs 3 Workers (Close Match / Goblin Edge)
[22m[39m
[Scenario 1] 5 Goblins vs 3 Workers
[Entity 0] CONSTRUCTOR START: type=unit at 10,10
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0
[Entity 1] CONSTRUCTOR START: type=unit at 11,10
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:1 Role:worker Pos:11,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:11,10
[UnitCore.js] Unit Construction Finished ID:1
[Entity 2] CONSTRUCTOR START: type=unit at 12,10
[Entity 2] Calling registerEntity...
[Entity 2] registerEntity returned.
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:2 Role:worker Pos:12,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:12,10
[UnitCore.js] Unit Construction Finished ID:2
[Entity 3] CONSTRUCTOR START: type=goblin at 15,15
[Entity 3] Calling registerEntity...
[Entity 3] registerEntity returned.
[Entity 3] Calling updatePosition...
[Entity 3] updatePosition returned.
[DIAG] Actor Created ID: 3
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 4] CONSTRUCTOR START: type=goblin at 16,15
[Entity 4] Calling registerEntity...
[Entity 4] registerEntity returned.
[Entity 4] Calling updatePosition...
[Entity 4] updatePosition returned.
[DIAG] Actor Created ID: 4
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 5] CONSTRUCTOR START: type=goblin at 17,15
[Entity 5] Calling registerEntity...
[Entity 5] registerEntity returned.
[Entity 5] Calling updatePosition...
[Entity 5] updatePosition returned.
[DIAG] Actor Created ID: 5
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 6] CONSTRUCTOR START: type=goblin at 18,15
[Entity 6] Calling registerEntity...
[Entity 6] registerEntity returned.
[Entity 6] Calling updatePosition...
[Entity 6] updatePosition returned.
[DIAG] Actor Created ID: 6
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 7] CONSTRUCTOR START: type=goblin at 19,15
[Entity 7] Calling registerEntity...
[Entity 7] registerEntity returned.
[Entity 7] Calling updatePosition...
[Entity 7] updatePosition returned.
[DIAG] Actor Created ID: 7
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Actor 3] Resetting Unreachable (Target changed or initializing)
[Actor 4] Resetting Unreachable (Target changed or initializing)
[Actor 5] Resetting Unreachable (Target changed or initializing)
[Actor 6] Resetting Unreachable (Target changed or initializing)
[Actor 7] Resetting Unreachable (Target changed or initializing)
[Actor 3] Resetting Unreachable (Target changed or initializing)
[Actor 4] Resetting Unreachable (Target changed or initializing)
[Actor 5] Resetting Unreachable (Target changed or initializing)
[Actor 6] Resetting Unreachable (Target changed or initializing)
[Actor 7] Resetting Unreachable (Target changed or initializing)
Goblin hit Unit! Dmg: 15 UnitHP: 38 
Unit hit Goblin! Dmg: 12 GoblinHP: 38
Unit hit Goblin! Dmg: 12 GoblinHP: 26.001666666666665
Unit hit Goblin! Dmg: 12 GoblinHP: 14.001666666666665
Goblin hit Unit! Dmg: 15 UnitHP: 23 
Unit hit Goblin! Dmg: 12 GoblinHP: 2.0183333333333344
Unit hit Goblin! Dmg: 12 GoblinHP: -9.979999999999999
Goblin hit Unit! Dmg: 15 UnitHP: 8 
Unit hit Goblin! Dmg: 12 GoblinHP: 38
Unit hit Goblin! Dmg: 12 GoblinHP: 26.011666666666656
Unit hit Goblin! Dmg: 12 GoblinHP: 14.013333333333321
Unit 2 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 15 UnitHP: 0 
Unit hit Goblin! Dmg: 12 GoblinHP: -3.981666666666678
Unit hit Goblin! Dmg: 12 GoblinHP: 38
Unit hit Goblin! Dmg: 12 GoblinHP: 26.004999999999995
Unit hit Goblin! Dmg: 12 GoblinHP: 14.018333333333317
Unit hit Goblin! Dmg: 12 GoblinHP: 2.0233333333333174
Unit hit Goblin! Dmg: 12 GoblinHP: -9.96333333333335
Unit hit Goblin! Dmg: 12 GoblinHP: 38
Unit hit Goblin! Dmg: 12 GoblinHP: 26.011666666666656
Unit hit Goblin! Dmg: 12 GoblinHP: 14.018333333333317
Unit hit Goblin! Dmg: 12 GoblinHP: 2.029999999999985
Unit hit Goblin! Dmg: 12 GoblinHP: -9.963333333333349
Unit hit Goblin! Dmg: 12 GoblinHP: 38
Unit hit Goblin! Dmg: 12 GoblinHP: 26.00666666666666
Unit hit Goblin! Dmg: 12 GoblinHP: 14.018333333333317
Unit hit Goblin! Dmg: 12 GoblinHP: 2.0249999999999844
Unit hit Goblin! Dmg: 12 GoblinHP: -9.96333333333335
Survivors -> Units: 2, Goblins: 0
[Actor 3] Pathfinding SUCCESS: Got 1 nodes to 12.3,10.5
[Actor 3] Resetting Unreachable (Target changed or initializing)
[Entity 3] startMove -> isMoving:true. Target:12.3,10.5 StartTime:0.0000
[Actor 4] Pathfinding SUCCESS: Got 1 nodes to 12.3,10.5
[Actor 4] Resetting Unreachable (Target changed or initializing)
[Entity 4] startMove -> isMoving:true. Target:12.3,10.5 StartTime:0.0000
[Actor 5] Pathfinding SUCCESS: Got 1 nodes to 12.3,10.5
[Actor 5] Resetting Unreachable (Target changed or initializing)
[Entity 5] startMove -> isMoving:true. Target:12.3,10.5 StartTime:0.0000
[Actor 6] Pathfinding SUCCESS: Got 1 nodes to 12.3,10.5
[Actor 6] Resetting Unreachable (Target changed or initializing)
[Entity 6] startMove -> isMoving:true. Target:12.3,10.5 StartTime:0.0000
[Actor 7] Pathfinding SUCCESS: Got 1 nodes to 12.3,10.5
[Actor 7] Resetting Unreachable (Target changed or initializing)
[Entity 7] startMove -> isMoving:true. Target:12.3,10.5 StartTime:0.0000

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario: 3 Knights vs 10 Goblins (Knights Stomp)
[22m[39mDisposing detached game instance

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario: 3 Knights vs 10 Goblins (Knights Stomp)
[22m[39m
[Scenario 2] 3 Knights vs 10 Goblins
[Entity 8] CONSTRUCTOR START: type=unit at 10,10
[Entity 8] Calling registerEntity...
[Entity 8] registerEntity returned.
[Entity 8] Calling updatePosition...
[Entity 8] updatePosition returned.
[DIAG] Actor Created ID: 8
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:3 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:3 Role:knight Pos:10,10
[UnitCore.js] Unit Construction Finished ID:3
[Entity 9] CONSTRUCTOR START: type=unit at 11,10
[Entity 9] Calling registerEntity...
[Entity 9] registerEntity returned.
[Entity 9] Calling updatePosition...
[Entity 9] updatePosition returned.
[DIAG] Actor Created ID: 9
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:4 Role:knight Pos:11,10 Special:false
[UnitCore.js] Unit Created ID:4 Role:knight Pos:11,10
[UnitCore.js] Unit Construction Finished ID:4
[Entity 10] CONSTRUCTOR START: type=unit at 12,10
[Entity 10] Calling registerEntity...
[Entity 10] registerEntity returned.
[Entity 10] Calling updatePosition...
[Entity 10] updatePosition returned.
[DIAG] Actor Created ID: 10
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:5 Role:knight Pos:12,10 Special:false
[UnitCore.js] Unit Created ID:5 Role:knight Pos:12,10
[UnitCore.js] Unit Construction Finished ID:5
[Entity 11] CONSTRUCTOR START: type=goblin at 12,12
[Entity 11] Calling registerEntity...
[Entity 11] registerEntity returned.
[Entity 11] Calling updatePosition...
[Entity 11] updatePosition returned.
[DIAG] Actor Created ID: 11
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 12] CONSTRUCTOR START: type=goblin at 12,12
[Entity 12] Calling registerEntity...
[Entity 12] registerEntity returned.
[Entity 12] Calling updatePosition...
[Entity 12] updatePosition returned.
[DIAG] Actor Created ID: 12
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 13] CONSTRUCTOR START: type=goblin at 12,12
[Entity 13] Calling registerEntity...
[Entity 13] registerEntity returned.
[Entity 13] Calling updatePosition...
[Entity 13] updatePosition returned.
[DIAG] Actor Created ID: 13
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 14] CONSTRUCTOR START: type=goblin at 12,12
[Entity 14] Calling registerEntity...
[Entity 14] registerEntity returned.
[Entity 14] Calling updatePosition...
[Entity 14] updatePosition returned.
[DIAG] Actor Created ID: 14
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 15] CONSTRUCTOR START: type=goblin at 12,12
[Entity 15] Calling registerEntity...
[Entity 15] registerEntity returned.
[Entity 15] Calling updatePosition...
[Entity 15] updatePosition returned.
[DIAG] Actor Created ID: 15
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 16] CONSTRUCTOR START: type=goblin at 12,12
[Entity 16] Calling registerEntity...
[Entity 16] registerEntity returned.
[Entity 16] Calling updatePosition...
[Entity 16] updatePosition returned.
[DIAG] Actor Created ID: 16
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 17] CONSTRUCTOR START: type=goblin at 12,12
[Entity 17] Calling registerEntity...
[Entity 17] registerEntity returned.
[Entity 17] Calling updatePosition...
[Entity 17] updatePosition returned.
[DIAG] Actor Created ID: 17
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 18] CONSTRUCTOR START: type=goblin at 12,12
[Entity 18] Calling registerEntity...
[Entity 18] registerEntity returned.
[Entity 18] Calling updatePosition...
[Entity 18] updatePosition returned.
[DIAG] Actor Created ID: 18
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 19] CONSTRUCTOR START: type=goblin at 12,12
[Entity 19] Calling registerEntity...
[Entity 19] registerEntity returned.
[Entity 19] Calling updatePosition...
[Entity 19] updatePosition returned.
[DIAG] Actor Created ID: 19
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 20] CONSTRUCTOR START: type=goblin at 12,12
[Entity 20] Calling registerEntity...
[Entity 20] registerEntity returned.
[Entity 20] Calling updatePosition...
[Entity 20] updatePosition returned.
[DIAG] Actor Created ID: 20
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Goblin hit Unit! Dmg: 15 UnitHP: 998 
Goblin hit Unit! Dmg: 15 UnitHP: 983 
Goblin hit Unit! Dmg: 15 UnitHP: 968 
Goblin hit Unit! Dmg: 15 UnitHP: 953 
Goblin hit Unit! Dmg: 15 UnitHP: 938 
Goblin hit Unit! Dmg: 15 UnitHP: 923 
Goblin hit Unit! Dmg: 15 UnitHP: 908 
Goblin hit Unit! Dmg: 15 UnitHP: 893 
Goblin hit Unit! Dmg: 15 UnitHP: 878 
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Goblin hit Unit! Dmg: 15 UnitHP: 863 
Goblin hit Unit! Dmg: 15 UnitHP: 848 
Goblin hit Unit! Dmg: 15 UnitHP: 833 
Goblin hit Unit! Dmg: 15 UnitHP: 818 
Goblin hit Unit! Dmg: 15 UnitHP: 803 
Goblin hit Unit! Dmg: 15 UnitHP: 788 
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Goblin hit Unit! Dmg: 15 UnitHP: 773 
Goblin hit Unit! Dmg: 15 UnitHP: 758 
Goblin hit Unit! Dmg: 15 UnitHP: 743 
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Unit hit Goblin! Dmg: 300 GoblinHP: -250
Survivors -> Knights: 3, Goblins: 0

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario: 3 Goblins vs 1 House (House Defends)
[22m[39mDisposing detached game instance

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario: 3 Goblins vs 1 House (House Defends)
[22m[39m
[Scenario 3] 3 Goblins vs 1 House
[Entity 21] CONSTRUCTOR START: type=goblin at 11,11
[Entity 21] Calling registerEntity...
[Entity 21] registerEntity returned.
[Entity 21] Calling updatePosition...
[Entity 21] updatePosition returned.
[DIAG] Actor Created ID: 21
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 22] CONSTRUCTOR START: type=goblin at 11,11
[Entity 22] Calling registerEntity...
[Entity 22] registerEntity returned.
[Entity 22] Calling updatePosition...
[Entity 22] updatePosition returned.
[DIAG] Actor Created ID: 22
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 23] CONSTRUCTOR START: type=goblin at 11,11
[Entity 23] Calling registerEntity...
[Entity 23] registerEntity returned.
[Entity 23] Calling updatePosition...
[Entity 23] updatePosition returned.
[DIAG] Actor Created ID: 23
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Goblin Raid: House population reduced. Rem: 9 
Goblin Raid: House population reduced. Rem: 8 
Goblin Raid: House population reduced. Rem: 7 
Goblin Raid: House population reduced. Rem: 6 
Goblin(normal) died.ID:21 
Goblin Raid: House population reduced. Rem: 5 
Goblin(normal) died.ID:22 
Goblin Raid: House population reduced. Rem: 4 
Goblin Raid: House population reduced. Rem: 3 
Goblin(normal) died.ID:23 
Survivors -> Goblins: 0, House Pop: 3

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario: 5 Goblins vs 1 House (House Destroyed)
[22m[39mDisposing detached game instance

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario: 5 Goblins vs 1 House (House Destroyed)
[22m[39m
[Scenario 4] 5 Goblins vs 1 House (Pop 5)
[Entity 24] CONSTRUCTOR START: type=goblin at 11,11
[Entity 24] Calling registerEntity...
[Entity 24] registerEntity returned.
[Entity 24] Calling updatePosition...
[Entity 24] updatePosition returned.
[DIAG] Actor Created ID: 24
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 25] CONSTRUCTOR START: type=goblin at 11,11
[Entity 25] Calling registerEntity...
[Entity 25] registerEntity returned.
[Entity 25] Calling updatePosition...
[Entity 25] updatePosition returned.
[DIAG] Actor Created ID: 25
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 26] CONSTRUCTOR START: type=goblin at 11,11
[Entity 26] Calling registerEntity...
[Entity 26] registerEntity returned.
[Entity 26] Calling updatePosition...
[Entity 26] updatePosition returned.
[DIAG] Actor Created ID: 26
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 27] CONSTRUCTOR START: type=goblin at 11,11
[Entity 27] Calling registerEntity...
[Entity 27] registerEntity returned.
[Entity 27] Calling updatePosition...
[Entity 27] updatePosition returned.
[DIAG] Actor Created ID: 27
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 28] CONSTRUCTOR START: type=goblin at 11,11
[Entity 28] Calling registerEntity...
[Entity 28] registerEntity returned.
[Entity 28] Calling updatePosition...
[Entity 28] updatePosition returned.
[DIAG] Actor Created ID: 28
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Goblin Raid: House population reduced. Rem: 4 
Goblin Raid: House population reduced. Rem: 3 
Goblin Raid: House population reduced. Rem: 2 
Goblin Raid: House population reduced. Rem: 1 
Goblin Raid: House population reduced. Rem: 0 
Goblin destroyed Building house (Legacy)!
Goblin 25 destroyed house !
Survivors -> Goblins: 5, House Pop: 0

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 5: King vs 1 Knight (Knight Wins)
[22m[39mDisposing detached game instance

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 5: King vs 1 Knight (Knight Wins)
[22m[39m
[Scenario 5] King vs 1 Knight
[Entity 29] CONSTRUCTOR START: type=unit at 10,10
[Entity 29] Calling registerEntity...
[Entity 29] registerEntity returned.
[Entity 29] Calling updatePosition...
[Entity 29] updatePosition returned.
[DIAG] Actor Created ID: 29
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:6 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:6 Role:knight Pos:10,10
[UnitCore.js] Unit Construction Finished ID:6
[Entity 30] CONSTRUCTOR START: type=goblin at 15,15
[Entity 30] Calling registerEntity...
[Entity 30] registerEntity returned.
[Entity 30] Calling updatePosition...
[Entity 30] updatePosition returned.
[DIAG] Actor Created ID: 30
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Actor 30] Resetting Unreachable (Target changed or initializing)
[Actor 30] Resetting Unreachable (Target changed or initializing)
Goblin hit Unit! Dmg: 80 UnitHP: 922 
Unit hit Goblin! Dmg: 300 GoblinHP: 1354
Goblin hit Unit! Dmg: 80 UnitHP: 842 
Unit hit Goblin! Dmg: 300 GoblinHP: 1054.0183333333346
Goblin hit Unit! Dmg: 80 UnitHP: 762 
Unit hit Goblin! Dmg: 300 GoblinHP: 754.0366666666691
Goblin hit Unit! Dmg: 80 UnitHP: 682 
Unit hit Goblin! Dmg: 300 GoblinHP: 454.05500000000245
Unit hit Goblin! Dmg: 300 GoblinHP: 154.07333333333577
Goblin hit Unit! Dmg: 80 UnitHP: 602 
Unit hit Goblin! Dmg: 300 GoblinHP: -145.90833333333092
Survivor: Knight (HP 602) vs King (Dead)
[Actor 30] Pathfinding SUCCESS: Got 1 nodes to 10.5,10.5
[Actor 30] Resetting Unreachable (Target changed or initializing)
[Entity 30] startMove -> isMoving:true. Target:10.5,10.5 StartTime:0.0000

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 6: King vs 20 Workers (Workers Swarm)
[22m[39mDisposing detached game instance

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 6: King vs 20 Workers (Workers Swarm)
[22m[39m
[Scenario 6] King vs 20 Workers
[Entity 31] CONSTRUCTOR START: type=goblin at 15,15
[Entity 31] Calling registerEntity...
[Entity 31] registerEntity returned.
[Entity 31] Calling updatePosition...
[Entity 31] updatePosition returned.
[DIAG] Actor Created ID: 31
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 32] CONSTRUCTOR START: type=unit at 12,12
[Entity 32] Calling registerEntity...
[Entity 32] registerEntity returned.
[Entity 32] Calling updatePosition...
[Entity 32] updatePosition returned.
[DIAG] Actor Created ID: 32
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:7 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:7
[Entity 33] CONSTRUCTOR START: type=unit at 12,12
[Entity 33] Calling registerEntity...
[Entity 33] registerEntity returned.
[Entity 33] Calling updatePosition...
[Entity 33] updatePosition returned.
[DIAG] Actor Created ID: 33
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:8 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:8 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:8
[Entity 34] CONSTRUCTOR START: type=unit at 12,12
[Entity 34] Calling registerEntity...
[Entity 34] registerEntity returned.
[Entity 34] Calling updatePosition...
[Entity 34] updatePosition returned.
[DIAG] Actor Created ID: 34
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:9 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:9 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:9
[Entity 35] CONSTRUCTOR START: type=unit at 12,12
[Entity 35] Calling registerEntity...
[Entity 35] registerEntity returned.
[Entity 35] Calling updatePosition...
[Entity 35] updatePosition returned.
[DIAG] Actor Created ID: 35
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:10 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:10 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:10
[Entity 36] CONSTRUCTOR START: type=unit at 12,12
[Entity 36] Calling registerEntity...
[Entity 36] registerEntity returned.
[Entity 36] Calling updatePosition...
[Entity 36] updatePosition returned.
[DIAG] Actor Created ID: 36
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:11 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:11 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:11
[Entity 37] CONSTRUCTOR START: type=unit at 12,12
[Entity 37] Calling registerEntity...
[Entity 37] registerEntity returned.
[Entity 37] Calling updatePosition...
[Entity 37] updatePosition returned.
[DIAG] Actor Created ID: 37
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:12 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:12 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:12
[Entity 38] CONSTRUCTOR START: type=unit at 12,12
[Entity 38] Calling registerEntity...
[Entity 38] registerEntity returned.
[Entity 38] Calling updatePosition...
[Entity 38] updatePosition returned.
[DIAG] Actor Created ID: 38
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:13 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:13 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:13
[Entity 39] CONSTRUCTOR START: type=unit at 12,12
[Entity 39] Calling registerEntity...
[Entity 39] registerEntity returned.
[Entity 39] Calling updatePosition...
[Entity 39] updatePosition returned.
[DIAG] Actor Created ID: 39
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:14 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:14 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:14
[Entity 40] CONSTRUCTOR START: type=unit at 12,12
[Entity 40] Calling registerEntity...
[Entity 40] registerEntity returned.
[Entity 40] Calling updatePosition...
[Entity 40] updatePosition returned.
[DIAG] Actor Created ID: 40
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:15 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:15 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:15
[Entity 41] CONSTRUCTOR START: type=unit at 12,12
[Entity 41] Calling registerEntity...
[Entity 41] registerEntity returned.
[Entity 41] Calling updatePosition...
[Entity 41] updatePosition returned.
[DIAG] Actor Created ID: 41
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:16 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:16 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:16
[Entity 42] CONSTRUCTOR START: type=unit at 12,12
[Entity 42] Calling registerEntity...
[Entity 42] registerEntity returned.
[Entity 42] Calling updatePosition...
[Entity 42] updatePosition returned.
[DIAG] Actor Created ID: 42
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:17 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:17 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:17
[Entity 43] CONSTRUCTOR START: type=unit at 12,12
[Entity 43] Calling registerEntity...
[Entity 43] registerEntity returned.
[Entity 43] Calling updatePosition...
[Entity 43] updatePosition returned.
[DIAG] Actor Created ID: 43
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:18 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:18 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:18
[Entity 44] CONSTRUCTOR START: type=unit at 12,12
[Entity 44] Calling registerEntity...
[Entity 44] registerEntity returned.
[Entity 44] Calling updatePosition...
[Entity 44] updatePosition returned.
[DIAG] Actor Created ID: 44
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:19 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:19 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:19
[Entity 45] CONSTRUCTOR START: type=unit at 12,12
[Entity 45] Calling registerEntity...
[Entity 45] registerEntity returned.
[Entity 45] Calling updatePosition...
[Entity 45] updatePosition returned.
[DIAG] Actor Created ID: 45
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:20 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:20 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:20
[Entity 46] CONSTRUCTOR START: type=unit at 12,12
[Entity 46] Calling registerEntity...
[Entity 46] registerEntity returned.
[Entity 46] Calling updatePosition...
[Entity 46] updatePosition returned.
[DIAG] Actor Created ID: 46
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:21 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:21 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:21
[Entity 47] CONSTRUCTOR START: type=unit at 12,12
[Entity 47] Calling registerEntity...
[Entity 47] registerEntity returned.
[Entity 47] Calling updatePosition...
[Entity 47] updatePosition returned.
[DIAG] Actor Created ID: 47
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:22 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:22 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:22
[Entity 48] CONSTRUCTOR START: type=unit at 12,12
[Entity 48] Calling registerEntity...
[Entity 48] registerEntity returned.
[Entity 48] Calling updatePosition...
[Entity 48] updatePosition returned.
[DIAG] Actor Created ID: 48
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:23 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:23 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:23
[Entity 49] CONSTRUCTOR START: type=unit at 12,12
[Entity 49] Calling registerEntity...
[Entity 49] registerEntity returned.
[Entity 49] Calling updatePosition...
[Entity 49] updatePosition returned.
[DIAG] Actor Created ID: 49
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:24 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:24 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:24
[Entity 50] CONSTRUCTOR START: type=unit at 12,12
[Entity 50] Calling registerEntity...
[Entity 50] registerEntity returned.
[Entity 50] Calling updatePosition...
[Entity 50] updatePosition returned.
[DIAG] Actor Created ID: 50
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:25 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:25 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:25
[Entity 51] CONSTRUCTOR START: type=unit at 12,12
[Entity 51] Calling registerEntity...
[Entity 51] registerEntity returned.
[Entity 51] Calling updatePosition...
[Entity 51] updatePosition returned.
[DIAG] Actor Created ID: 51
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:26 Role:worker Pos:12,12 Special:false
[UnitCore.js] Unit Created ID:26 Role:worker Pos:12,12
[UnitCore.js] Unit Construction Finished ID:26
Unit 7 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 80 UnitHP: 0 
Unit hit Goblin! Dmg: 12 GoblinHP: 1587
Unit hit Goblin! Dmg: 12 GoblinHP: 1575
Unit hit Goblin! Dmg: 12 GoblinHP: 1563
Unit hit Goblin! Dmg: 12 GoblinHP: 1551
Unit hit Goblin! Dmg: 12 GoblinHP: 1539
Unit hit Goblin! Dmg: 12 GoblinHP: 1527
Unit hit Goblin! Dmg: 12 GoblinHP: 1515
Unit hit Goblin! Dmg: 12 GoblinHP: 1503
Unit hit Goblin! Dmg: 12 GoblinHP: 1491
Unit hit Goblin! Dmg: 12 GoblinHP: 1479
Unit hit Goblin! Dmg: 12 GoblinHP: 1467
Unit hit Goblin! Dmg: 12 GoblinHP: 1455
Unit hit Goblin! Dmg: 12 GoblinHP: 1443
Unit hit Goblin! Dmg: 12 GoblinHP: 1431
Unit hit Goblin! Dmg: 12 GoblinHP: 1419
Unit hit Goblin! Dmg: 12 GoblinHP: 1407
Unit hit Goblin! Dmg: 12 GoblinHP: 1395
Unit hit Goblin! Dmg: 12 GoblinHP: 1383
Unit hit Goblin! Dmg: 12 GoblinHP: 1371
Unit 8 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 80 UnitHP: 0 
Unit hit Goblin! Dmg: 12 GoblinHP: 1353.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1341.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1329.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1317.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1305.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1293.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1281.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1269.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1257.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1245.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1233.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1221.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1209.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1197.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1185.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1173.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1161.0183333333346
Unit hit Goblin! Dmg: 12 GoblinHP: 1149.0183333333346
Unit 9 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 80 UnitHP: 0 
Unit hit Goblin! Dmg: 12 GoblinHP: 1131.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1119.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1107.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1095.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1083.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1071.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1059.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1047.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1035.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1023.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 1011.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 999.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 987.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 975.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 963.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 951.0366666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 939.0366666666691
Unit 10 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 80 UnitHP: 0 
Unit hit Goblin! Dmg: 12 GoblinHP: 921.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 909.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 897.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 885.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 873.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 861.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 849.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 837.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 825.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 813.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 801.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 789.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 777.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 765.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 753.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 741.0550000000025
Unit hit Goblin! Dmg: 12 GoblinHP: 729.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 717.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 705.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 693.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 681.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 669.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 657.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 645.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 633.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 621.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 609.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 597.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 585.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 573.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 561.0733333333358
Unit hit Goblin! Dmg: 12 GoblinHP: 549.0733333333358
Unit 11 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 80 UnitHP: 0 
Unit hit Goblin! Dmg: 12 GoblinHP: 531.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 519.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 507.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 495.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 483.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 471.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 459.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 447.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 435.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 423.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 411.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 399.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 387.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 375.0916666666691
Unit hit Goblin! Dmg: 12 GoblinHP: 363.0916666666691
Unit 12 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 80 UnitHP: 0 
Unit hit Goblin! Dmg: 12 GoblinHP: 345.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 333.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 321.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 309.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 297.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 285.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 273.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 261.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 249.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 237.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 225.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 213.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 201.1100000000024
Unit hit Goblin! Dmg: 12 GoblinHP: 189.1100000000024
Unit 13 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 80 UnitHP: 0 
Unit hit Goblin! Dmg: 12 GoblinHP: 171.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 159.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 147.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 135.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 123.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 111.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 99.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 87.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 75.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 63.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 51.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 39.12833333333572
Unit hit Goblin! Dmg: 12 GoblinHP: 27.128333333335718
Unit 14 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 80 UnitHP: 0 
[GoblinCombat 31] Target Unit Dead. Switching to Raid.
Unit hit Goblin! Dmg: 12 GoblinHP: 9.146666666669034
Unit hit Goblin! Dmg: 12 GoblinHP: -2.8533333333309656
Survivors -> Workers: 12, King: Dead

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 7: Shaman vs 1 Worker (Shaman Snipes)
[22m[39mDisposing detached game instance

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 7: Shaman vs 1 Worker (Shaman Snipes)
[22m[39m
[Scenario 7] Shaman vs 1 Worker
[Entity 52] CONSTRUCTOR START: type=unit at 10,10
[Entity 52] Calling registerEntity...
[Entity 52] registerEntity returned.
[Entity 52] Calling updatePosition...
[Entity 52] updatePosition returned.
[DIAG] Actor Created ID: 52
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:27 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:27 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:27
[Entity 53] CONSTRUCTOR START: type=goblin at 18,18
[Entity 53] Calling registerEntity...
[Entity 53] registerEntity returned.
[Entity 53] Calling updatePosition...
[Entity 53] updatePosition returned.
[DIAG] Actor Created ID: 53
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Actor 53] Resetting Unreachable (Target changed or initializing)
Goblin hit Unit! Dmg: 35 UnitHP: 19 
Unit hit Goblin! Dmg: 12 GoblinHP: 68
Unit 27 (worker) DIED. R.I.P.
Goblin hit Unit! Dmg: 35 UnitHP: 0 
Survivor: Shaman
[Actor 53] Pathfinding SUCCESS: Got 1 nodes to 10.8,10.8
[Entity 53] startMove -> isMoving:true. Target:10.8,10.8 StartTime:0.0000

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 8: King vs House (King Smashes)
[22m[39mDisposing detached game instance

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 8: King vs House (King Smashes)
[22m[39m
[Scenario 8] King vs House
[Entity 54] CONSTRUCTOR START: type=goblin at 12,12
[Entity 54] Calling registerEntity...
[Entity 54] registerEntity returned.
[Entity 54] Calling updatePosition...
[Entity 54] updatePosition returned.
[DIAG] Actor Created ID: 54
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Goblin Raid: House population reduced. Rem: 2 
Goblin Raid: House population reduced. Rem: -6 
Goblin destroyed Building house (Legacy)!
Goblin 54 destroyed house !
King Status: HP 1666.0816666666722, House Destroyed

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 9: 3 Goblins vs Building Class House (House Defends)
[22m[39mDisposing detached game instance

[90mstdout[2m | src/tests/GroupCombat.test.js[2m > [22m[2mGroup Combat Simulations[2m > [22m[2mScenario 9: 3 Goblins vs Building Class House (House Defends)
[22m[39m
[Scenario 9] 3 Goblins vs Building Class (Defense Check)
[Entity 55] CONSTRUCTOR START: type=building at 10,10
[Entity 55] Calling registerEntity...
[Entity 55] registerEntity returned.
[Entity 55] Calling updatePosition...
[Entity 55] updatePosition returned.
[Entity 56] CONSTRUCTOR START: type=goblin at 11,11
[Entity 56] Calling registerEntity...
[Entity 56] registerEntity returned.
[Entity 56] Calling updatePosition...
[Entity 56] updatePosition returned.
[DIAG] Actor Created ID: 56
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 57] CONSTRUCTOR START: type=goblin at 11,11
[Entity 57] Calling registerEntity...
[Entity 57] registerEntity returned.
[Entity 57] Calling updatePosition...
[Entity 57] updatePosition returned.
[DIAG] Actor Created ID: 57
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 58] CONSTRUCTOR START: type=goblin at 11,11
[Entity 58] Calling registerEntity...
[Entity 58] registerEntity returned.
[Entity 58] Calling updatePosition...
[Entity 58] updatePosition returned.
[DIAG] Actor Created ID: 58
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
Goblin(normal) died.ID:56 
[Building 55] takeDamage ENTER: amount=15, hp=100
[Building] house(55) took 15 dmg. Pop: 9. Retaliation: 36
[Goblin 56] AttackBuilding Result - BldgType: house, HP: 85, Pop: 9, isDestroyed: false 
Goblin(normal) died.ID:57 
[Building 55] takeDamage ENTER: amount=15, hp=85
[Building] house(55) took 15 dmg. Pop: 8. Retaliation: 32
[Goblin 57] AttackBuilding Result - BldgType: house, HP: 70, Pop: 8, isDestroyed: false 
Goblin(normal) died.ID:58 
[Building 55] takeDamage ENTER: amount=15, hp=70
[Building] house(55) took 15 dmg. Pop: 7. Retaliation: 28
[Goblin 58] AttackBuilding Result - BldgType: house, HP: 55, Pop: 7, isDestroyed: false 
[Scenario 9] Survivors -> Goblins: 0, House Pop: 7

stderr | src/tests/GroupCombat.test.js > Group Combat Simulations > Scenario 9: 3 Goblins vs Building Class House (House Defends)
[Goblin.js] Dying due to low height: 0 at 11,11 
[Goblin.js] Dying due to low height: 0 at 11,11 
[Goblin.js] Dying due to low height: 0 at 11,11 

 [32mç¬¨ãƒ»[39m src/tests/GroupCombat.test.js [2m([22m[2m9 tests[22m[2m)[22m[32m 35[2mms[22m[39m
[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould return "loss" when player units and buildings are all gone
[22m[39m[Terrain] Constructor. updatePopulation type: function
[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 1] Assigning terrainOverride to this.terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=0
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.244715, 0.634756) -> Grid(39, 101) rngState=0
[Entity 0] CONSTRUCTOR START: type=building at 39,101
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
GoblinManager: Cave registered at 39,101 
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.151285, 0.592590) -> Grid(24, 94) rngState=0
[Entity 1] CONSTRUCTOR START: type=building at 24,94
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
GoblinManager: Cave registered at 24,94 
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.639262, 0.738415) -> Grid(102, 118) rngState=0
[Entity 2] CONSTRUCTOR START: type=building at 102,118
[Entity 2] Calling registerEntity...
[Entity 2] registerEntity returned.
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
GoblinManager: Cave registered at 102,118 
[Entity 3] CONSTRUCTOR START: type=building at 152,47
[Entity 3] Calling registerEntity...
[Entity 3] registerEntity returned.
[Entity 3] Calling updatePosition...
[Entity 3] updatePosition returned.
GoblinManager: Cave registered at 152,47 
[Entity 4] CONSTRUCTOR START: type=building at 134,131
[Entity 4] Calling registerEntity...
[Entity 4] registerEntity returned.
[Entity 4] Calling updatePosition...
[Entity 4] updatePosition returned.
GoblinManager: Cave registered at 134,131 
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 5/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5)
GoblinManager: Force spawning Debug Goblin
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould return "loss" when player units and buildings are all gone
[22m[39m[Entity 5] CONSTRUCTOR START: type=building at 10,10
[Entity 5] Calling registerEntity...
[Entity 5] registerEntity returned.
[Entity 5] Calling updatePosition...
[Entity 5] updatePosition returned.
[Game] evaluateWinLoss: Player assets zero. Units:0 Buildings:0

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould NOT return "loss" if player still has a building
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.
[Terrain] Dispose called.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould NOT return "loss" if player still has a building
[22m[39m[Terrain] Constructor. updatePopulation type: function
[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 2] Assigning terrainOverride to this.terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=0
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.277942, 0.056637) -> Grid(44, 9) rngState=0
[Entity 6] CONSTRUCTOR START: type=building at 44,9
[Entity 6] Calling registerEntity...
[Entity 6] registerEntity returned.
[Entity 6] Calling updatePosition...
[Entity 6] updatePosition returned.
GoblinManager: Cave registered at 44,9 
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.540748, 0.481783) -> Grid(86, 77) rngState=0
[Entity 7] CONSTRUCTOR START: type=building at 86,77
[Entity 7] Calling registerEntity...
[Entity 7] registerEntity returned.
[Entity 7] Calling updatePosition...
[Entity 7] updatePosition returned.
GoblinManager: Cave registered at 86,77 
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.587161, 0.954460) -> Grid(93, 152) rngState=0
[Entity 8] CONSTRUCTOR START: type=building at 93,152
[Entity 8] Calling registerEntity...
[Entity 8] registerEntity returned.
[Entity 8] Calling updatePosition...
[Entity 8] updatePosition returned.
GoblinManager: Cave registered at 93,152 
[Entity 9] CONSTRUCTOR START: type=building at 65,134
[Entity 9] Calling registerEntity...
[Entity 9] registerEntity returned.
[Entity 9] Calling updatePosition...
[Entity 9] updatePosition returned.
GoblinManager: Cave registered at 65,134 
[Entity 10] CONSTRUCTOR START: type=building at 151,155
[Entity 10] Calling registerEntity...
[Entity 10] registerEntity returned.
[Entity 10] Calling updatePosition...
[Entity 10] updatePosition returned.
GoblinManager: Cave registered at 151,155 
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 5/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5)
GoblinManager: Force spawning Debug Goblin
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould NOT return "loss" if player still has a building
[22m[39m[Entity 11] CONSTRUCTOR START: type=building at 5,5
[Entity 11] Calling registerEntity...
[Entity 11] registerEntity returned.
[Entity 11] Calling updatePosition...
[Entity 11] updatePosition returned.
[Entity 12] CONSTRUCTOR START: type=building at 10,10
[Entity 12] Calling registerEntity...
[Entity 12] registerEntity returned.
[Entity 12] Calling updatePosition...
[Entity 12] updatePosition returned.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould return "loss" even if ancient ruins exist (they should be neutral)
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.
[Terrain] Dispose called.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould return "loss" even if ancient ruins exist (they should be neutral)
[22m[39m[Terrain] Constructor. updatePopulation type: function
[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 3] Assigning terrainOverride to this.terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=0
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.427823, 0.119488) -> Grid(68, 19) rngState=0
[Entity 13] CONSTRUCTOR START: type=building at 68,19
[Entity 13] Calling registerEntity...
[Entity 13] registerEntity returned.
[Entity 13] Calling updatePosition...
[Entity 13] updatePosition returned.
GoblinManager: Cave registered at 68,19 
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.763252, 0.113118) -> Grid(122, 18) rngState=0
[Entity 14] CONSTRUCTOR START: type=building at 122,18
[Entity 14] Calling registerEntity...
[Entity 14] registerEntity returned.
[Entity 14] Calling updatePosition...
[Entity 14] updatePosition returned.
GoblinManager: Cave registered at 122,18 
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.262418, 0.064888) -> Grid(41, 10) rngState=0
[Entity 15] CONSTRUCTOR START: type=building at 41,10
[Entity 15] Calling registerEntity...
[Entity 15] registerEntity returned.
[Entity 15] Calling updatePosition...
[Entity 15] updatePosition returned.
GoblinManager: Cave registered at 41,10 
[Entity 16] CONSTRUCTOR START: type=building at 38,47
[Entity 16] Calling registerEntity...
[Entity 16] registerEntity returned.
[Entity 16] Calling updatePosition...
[Entity 16] updatePosition returned.
GoblinManager: Cave registered at 38,47 
[Entity 17] CONSTRUCTOR START: type=building at 34,126
[Entity 17] Calling registerEntity...
[Entity 17] registerEntity returned.
[Entity 17] Calling updatePosition...
[Entity 17] updatePosition returned.
GoblinManager: Cave registered at 34,126 
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 5/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5)
GoblinManager: Force spawning Debug Goblin
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould return "loss" even if ancient ruins exist (they should be neutral)
[22m[39m[Entity 18] CONSTRUCTOR START: type=building at 2,2
[Entity 18] Calling registerEntity...
[Entity 18] registerEntity returned.
[Entity 18] Calling updatePosition...
[Entity 18] updatePosition returned.
[Entity 19] CONSTRUCTOR START: type=building at 10,10
[Entity 19] Calling registerEntity...
[Entity 19] registerEntity returned.
[Entity 19] Calling updatePosition...
[Entity 19] updatePosition returned.
[Game] evaluateWinLoss: Player assets zero. Units:0 Buildings:0

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould NOT kill goblin instantly when attacking a farm (Retaliation Bug)
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.
[Terrain] Dispose called.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould NOT kill goblin instantly when attacking a farm (Retaliation Bug)
[22m[39m[Terrain] Constructor. updatePopulation type: function
[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 4] Assigning terrainOverride to this.terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=0
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.693023, 0.380932) -> Grid(110, 60) rngState=0
[Entity 20] CONSTRUCTOR START: type=building at 110,60
[Entity 20] Calling registerEntity...
[Entity 20] registerEntity returned.
[Entity 20] Calling updatePosition...
[Entity 20] updatePosition returned.
GoblinManager: Cave registered at 110,60 
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.477905, 0.596596) -> Grid(76, 95) rngState=0
[Entity 21] CONSTRUCTOR START: type=building at 76,95
[Entity 21] Calling registerEntity...
[Entity 21] registerEntity returned.
[Entity 21] Calling updatePosition...
[Entity 21] updatePosition returned.
GoblinManager: Cave registered at 76,95 
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.264719, 0.970135) -> Grid(42, 155) rngState=0
[Entity 22] CONSTRUCTOR START: type=building at 42,155
[Entity 22] Calling registerEntity...
[Entity 22] registerEntity returned.
[Entity 22] Calling updatePosition...
[Entity 22] updatePosition returned.
GoblinManager: Cave registered at 42,155 
[Entity 23] CONSTRUCTOR START: type=building at 143,145
[Entity 23] Calling registerEntity...
[Entity 23] registerEntity returned.
[Entity 23] Calling updatePosition...
[Entity 23] updatePosition returned.
GoblinManager: Cave registered at 143,145 
[Entity 24] CONSTRUCTOR START: type=building at 93,105
[Entity 24] Calling registerEntity...
[Entity 24] registerEntity returned.
[Entity 24] Calling updatePosition...
[Entity 24] updatePosition returned.
GoblinManager: Cave registered at 93,105 
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 5/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5)
GoblinManager: Force spawning Debug Goblin
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould NOT kill goblin instantly when attacking a farm (Retaliation Bug)
[22m[39m[Entity 25] CONSTRUCTOR START: type=building at 5,5
[Entity 25] Calling registerEntity...
[Entity 25] registerEntity returned.
[Entity 25] Calling updatePosition...
[Entity 25] updatePosition returned.
[Building 25] takeDamage ENTER: amount=10, hp=80
[Building] farm(25) took 10 dmg. Pop: 99. Retaliation: 0

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould return "win" when all enemies (goblins, caves, huts, units) are gone
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.
[Terrain] Dispose called.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould return "win" when all enemies (goblins, caves, huts, units) are gone
[22m[39m[Terrain] Constructor. updatePopulation type: function
[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 5] Assigning terrainOverride to this.terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=0
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.202089, 0.740400) -> Grid(32, 118) rngState=0
[Entity 26] CONSTRUCTOR START: type=building at 32,118
[Entity 26] Calling registerEntity...
[Entity 26] registerEntity returned.
[Entity 26] Calling updatePosition...
[Entity 26] updatePosition returned.
GoblinManager: Cave registered at 32,118 
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.698587, 0.955155) -> Grid(111, 152) rngState=0
[Entity 27] CONSTRUCTOR START: type=building at 111,152
[Entity 27] Calling registerEntity...
[Entity 27] registerEntity returned.
[Entity 27] Calling updatePosition...
[Entity 27] updatePosition returned.
GoblinManager: Cave registered at 111,152 
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.004992, 0.539831) -> Grid(0, 86) rngState=0
[Entity 28] CONSTRUCTOR START: type=building at 0,86
[Entity 28] Calling registerEntity...
[Entity 28] registerEntity returned.
[Entity 28] Calling updatePosition...
[Entity 28] updatePosition returned.
GoblinManager: Cave registered at 0,86 
[Entity 29] CONSTRUCTOR START: type=building at 147,124
[Entity 29] Calling registerEntity...
[Entity 29] registerEntity returned.
[Entity 29] Calling updatePosition...
[Entity 29] updatePosition returned.
GoblinManager: Cave registered at 147,124 
[Entity 30] CONSTRUCTOR START: type=building at 88,95
[Entity 30] Calling registerEntity...
[Entity 30] registerEntity returned.
[Entity 30] Calling updatePosition...
[Entity 30] updatePosition returned.
GoblinManager: Cave registered at 88,95 
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 5/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5)
GoblinManager: Force spawning Debug Goblin
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould return "win" when all enemies (goblins, caves, huts, units) are gone
[22m[39m[Game] evaluateWinLoss: Enemy assets zero. Goblins:0 Caves:0 enemyBuildings:0 enemyUnits:0

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould correctly restore enemy faction for caves and huts during deserialization
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.
[Terrain] Dispose called.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould correctly restore enemy faction for caves and huts during deserialization
[22m[39m[Terrain] Constructor. updatePopulation type: function
[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 6] Assigning terrainOverride to this.terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=0
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.752703, 0.588872) -> Grid(120, 94) rngState=0
[Entity 31] CONSTRUCTOR START: type=building at 120,94
[Entity 31] Calling registerEntity...
[Entity 31] registerEntity returned.
[Entity 31] Calling updatePosition...
[Entity 31] updatePosition returned.
GoblinManager: Cave registered at 120,94 
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.031976, 0.718354) -> Grid(5, 114) rngState=0
[Entity 32] CONSTRUCTOR START: type=building at 5,114
[Entity 32] Calling registerEntity...
[Entity 32] registerEntity returned.
[Entity 32] Calling updatePosition...
[Entity 32] updatePosition returned.
GoblinManager: Cave registered at 5,114 
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.305596, 0.096280) -> Grid(48, 15) rngState=0
[Entity 33] CONSTRUCTOR START: type=building at 48,15
[Entity 33] Calling registerEntity...
[Entity 33] registerEntity returned.
[Entity 33] Calling updatePosition...
[Entity 33] updatePosition returned.
GoblinManager: Cave registered at 48,15 
[Entity 34] CONSTRUCTOR START: type=building at 83,113
[Entity 34] Calling registerEntity...
[Entity 34] registerEntity returned.
[Entity 34] Calling updatePosition...
[Entity 34] updatePosition returned.
GoblinManager: Cave registered at 83,113 
[Entity 35] CONSTRUCTOR START: type=building at 84,66
[Entity 35] Calling registerEntity...
[Entity 35] registerEntity returned.
[Entity 35] Calling updatePosition...
[Entity 35] updatePosition returned.
GoblinManager: Cave registered at 84,66 
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 5/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5)
GoblinManager: Force spawning Debug Goblin
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould correctly restore enemy faction for caves and huts during deserialization
[22m[39m[Entity 36] CONSTRUCTOR START: type=building at 10,10
[Entity 36] Calling registerEntity...
[Entity 36] registerEntity returned.
[Entity 36] Calling updatePosition...
[Entity 36] updatePosition returned.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould correctly restore enemy faction for caves and huts during deserialization
[22m[39m[Entity 37] CONSTRUCTOR START: type=building at 20,20
[Entity 37] Calling registerEntity...
[Entity 37] registerEntity returned.
[Entity 37] Calling updatePosition...
[Entity 37] updatePosition returned.

[90mstdout[2m | src/tests/WinLossCondition.test.js[2m > [22m[2mWin/Loss Condition Logic[2m > [22m[2mshould correctly restore enemy faction for caves and huts during deserialization
[22m[39m[Entity 38] CONSTRUCTOR START: type=building at 5,5
[Entity 38] Calling registerEntity...
[Entity 38] registerEntity returned.
[Entity 38] Calling updatePosition...
[Entity 38] updatePosition returned.

 [32mç¬¨ãƒ»[39m src/tests/WinLossCondition.test.js [2m([22m[2m6 tests[22m[2m)[22m[33m 2993[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should return "loss" when player units and buildings are all gone [33m 371[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should NOT return "loss" if player still has a building [33m 304[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should return "loss" even if ancient ruins exist (they should be neutral) [33m 451[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should NOT kill goblin instantly when attacking a farm (Retaliation Bug) [33m 636[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should return "win" when all enemies (goblins, caves, huts, units) are gone [33m 514[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should correctly restore enemy faction for caves and huts during deserialization [33m 716[2mms[22m[39m

[2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[32m23 passed[39m[22m[90m (23)[39m
[2m   Start at [22m 18:11:23
[2m   Duration [22m 4.30s[2m (transform 1.18s, setup 267ms, import 1.49s, tests 3.05s, environment 1.41s)[22m

