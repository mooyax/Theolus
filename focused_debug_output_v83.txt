
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/ReproductionJitabata.test.js > Jitabata Bug Reproduction (Interrupt Loop) > should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should initialize with age 20
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should increment age when updateLogic is called
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should increment age when updateLogic is called
[Unit Debug] AgeID:1 Delta:10 Rate:0.2 Age:20.00->22.00

stdout | src/tests/ReproductionJitabata.test.js > Jitabata Bug Reproduction (Interrupt Loop) > should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug] AgeID:0 Delta:0.016 Rate:0.02 Age:20.00->20.00
[Test] Frame 1 Post-logic isMoving: true, action: Fighting
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug] AgeID:0 Delta:0.016 Rate:0.02 Age:20.00->20.00
[Test] Frame 2 Post-logic isMoving: true, action: Fighting

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should die when age exceeds lifespan
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should die when age exceeds lifespan
[Unit Debug] AgeID:2 Delta:1 Rate:0.2 Age:49.90->50.10

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should age slower for Knights and Wizards (0.02 rate)
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should age slower for Knights and Wizards (0.02 rate)
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,0
[UnitCore.js] Unit Created ID:5 Role:wizard Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:5 Role:wizard Pos:0,0
[Unit Debug] AgeID:4 Delta:10 Rate:0.02 Age:20.00->20.20
[Unit Debug] AgeID:5 Delta:10 Rate:0.02 Age:20.00->20.20

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should have longer lifespan for Special units
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should have longer lifespan for Special units
[UnitCore.js] Unit Created ID:7 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:0,0

 笨・src/tests/UnitLifecycle.test.js (5 tests) 22ms
 笶ｯ src/tests/ReproductionJitabata.test.js (1 test | 1 failed) 27ms
     ﾃ・should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration 24ms
stderr | src/tests/CombatFixes.test.js > Combat and Logic Fixes > should find target goblin
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0
DEBUG: Heights: 10 10
DEBUG: Distance: 10
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug] AgeID:0 Delta:0.1 Rate:0.02 Age:20.00->20.00
DEBUG: Target Found: NONE
DEBUG: Action: Idle

 笶ｯ src/tests/CombatFixes.test.js (1 test | 1 failed) 19ms
     ﾃ・should find target goblin 16ms

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ Failed Tests 2 竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ

 FAIL  src/tests/CombatFixes.test.js > Combat and Logic Fixes > should find target goblin
TypeError: Cannot read properties of null (reading 'id')
 笶ｯ src/tests/CombatFixes.test.js:60:34
     58| 
     59|         expect(unit.targetGoblin).toBeDefined();
     60|         expect(unit.targetGoblin.id).toBe('g1');
       |                                  ^
     61|         expect(unit.action).toBe("Chasing");
     62|     });

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[1/2]竡ｯ

 FAIL  src/tests/ReproductionJitabata.test.js > Jitabata Bug Reproduction (Interrupt Loop) > should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration
AssertionError: expected 'Fighting' to be 'Reinforcing' // Object.is equality

Expected: "Reinforcing"
Received: "Fighting"

 笶ｯ src/tests/ReproductionJitabata.test.js:61:29

     59| 
     60|         expect(unit.isMoving).toBe(true);
     61|         expect(unit.action).toBe("Reinforcing");
       |                             ^
     62|     });
     63| });

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[2/2]竡ｯ

 Test Files  2 failed | 1 passed (3)
      Tests  2 failed | 5 passed (7)
   Start at  21:13:27
   Duration  1.60s (transform 512ms, setup 149ms, import 902ms, tests 69ms, environment 2.33s)

