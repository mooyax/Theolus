
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
[DEBUG] Calling updateLogic...
[Actor 0] SmartMove Dist: 30 Path: No
[DEBUG] updateLogic finished.
[DEBUG] Targets: G=undefined, B=undefined

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are very close (Siege Mode)
[UnitCore.js] Unit Created ID:1 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are very close (Siege Mode)
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0
[Actor 100] SmartMove Dist: 7 Path: No

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should NOT auto-target distant Huts (Workers are passive)
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should NOT auto-target distant Huts (Workers are passive)
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should auto-target CLOSE Huts for self-defense (Workers)
[UnitCore.js] Unit Created ID:5 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:5 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should auto-target CLOSE Huts for self-defense (Workers)
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0

 笶ｯ src/tests/TargetingPriority.test.js (4 tests | 3 failed) 23ms
     ﾃ・should prioritize Goblin if it is much closer than Building 14ms
     ﾃ・should prioritize Building if distances are very close (Siege Mode) 2ms
     笨・should NOT auto-target distant Huts (Workers are passive) 1ms
     ﾃ・should auto-target CLOSE Huts for self-defense (Workers) 4ms

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ Failed Tests 3 竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ

 FAIL  src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
AssertionError: expected null to be { Object (id, gridX, ...) } // Object.is equality

- Expected: 
{
  "gridX": 10,
  "gridZ": 0,
  "id": "g1",
  "isDead": false,
  "takeDamage": [Function Mock],
}

+ Received: 
null

 笶ｯ src/tests/TargetingPriority.test.js:111:35
    109|         // Knight should target goblin because Building is > 8 tiles a窶ｦ
    110|         // Goblin priority is -1000, Building is -5. Goblin wins unles窶ｦ
    111|         expect(unit.targetGoblin).toBe(goblin);
       |                                   ^
    112|         expect(unit.targetBuilding).toBeNull();
    113|     });

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[1/3]竡ｯ

 FAIL  src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are very close (Siege Mode)
AssertionError: expected undefined to be { userData: { 窶ｦ(4) }, gridX: 7, 窶ｦ(2) } // Object.is equality

- Expected: 
{
  "gridX": 7,
  "gridZ": 0,
  "id": "hut_1",
  "userData": {
    "gridX": 7,
    "gridZ": 0,
    "hp": 100,
    "type": "goblin_hut",
  },
}

+ Received: 
undefined

 笶ｯ src/tests/TargetingPriority.test.js:148:41
    146|         // Building wins (Lower is better)
    147| 
    148|         expect(testUnit.targetBuilding).toBe(hut);
       |                                         ^
    149|         expect(testUnit.targetGoblin).toBeNull();
    150|     });

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[2/3]竡ｯ

 FAIL  src/tests/TargetingPriority.test.js > Unit Targeting Priority > should auto-target CLOSE Huts for self-defense (Workers)
AssertionError: expected undefined to be truthy

- Expected: 
true

+ Received: 
undefined

 笶ｯ src/tests/TargetingPriority.test.js:189:41
    187|         testUnit.updateLogic(1000, 0.1, false, [], [], []);
    188| 
    189|         expect(testUnit.targetBuilding).toBeTruthy();
       |                                         ^
    190|         expect(testUnit.targetBuilding.id).toBe('hut_near');
    191|     });

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[3/3]竡ｯ


 Test Files  1 failed (1)
      Tests  3 failed | 1 passed (4)
   Start at  17:03:14
   Duration  897ms (transform 139ms, setup 38ms, import 150ms, tests 23ms, environment 454ms)

