
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/CombatVerification.test.js[2m > [22m[2mCombat Logic Verification[2m > [22m[2mScenario A: Worker destroys Cave
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 1] Moving onto Rock at 10,10 H:10 (Speed Penalty)

[90mstdout[2m | src/tests/CombatVerification.test.js[2m > [22m[2mCombat Logic Verification[2m > [22m[2mScenario B: Goblin destroys House
[22m[39mGoblin 0 SPAWNED FOR RAIDING! Target: NaN,NaN
[Goblin 0] ENTER RaidState. Goal: NaN,NaN

 [31mç¬¶ï½¯[39m src/tests/CombatVerification.test.js [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 23[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m Scenario A: Worker destroys Cave[39m[32m 12[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m Scenario B: Goblin destroys House[39m[32m 10[2mms[22m[39m

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Failed Tests 2 ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

 FAIL  src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario A: Worker destroys Cave
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ç¬¶ï½¯ src/tests/CombatVerification.test.js:178:24
    176|         // Force check
    177|         const threat = worker.checkSelfDefense();
    178|         expect(threat).toBe(true);
       |                        ^
    179|         expect(worker.targetBuilding).toBeDefined();
    180|         expect(worker.targetBuilding.userData.type).toBe('cave');

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[1/2]ç«¡ï½¯

 FAIL  src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario B: Goblin destroys House
TypeError: this.terrain.registerEntity is not a function
 ç¬¶ï½¯ new Goblin src/Goblin.js:171:22
    169| 
    170|         // Register in Spatial Grid
    171|         this.terrain.registerEntity(this, this.gridX, this.gridZ, 'gobçª¶ï½¦
       |                      ^
    172|     }
    173| 
 ç¬¶ï½¯ src/tests/CombatVerification.test.js:197:24

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[2/2]ç«¡ï½¯


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m   Start at [22m 12:01:26
[2m   Duration [22m 898ms[2m (transform 164ms, setup 35ms, import 183ms, tests 23ms, environment 444ms)[22m

