
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Building.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Terrain.ts top-level load

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Actor.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Goblin.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[Import Debug] Raid: function, Combat: function, Wander: function

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Game.ts top-level load

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould remove dead sheep during manager update
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 1] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5å€‹ã®æ´žçªŸã‚’ç”Ÿæˆä¸­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.906604, 0.399661) -> Grid(145, 63) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.893620, 0.656221) -> Grid(142, 104) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.077748, 0.478029) -> Grid(12, 76) rngState=undefined
[GoblinManager] æ´žçªŸç”Ÿæˆå®Œäº†: 0/5 (è©¦è¡Œå›žæ•°: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.
Resetting SheepManager...
[Entity 0] CONSTRUCTOR START: type=sheep at 55,3
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Actor 0] CHANGE STATE: None -> SheepWander Request:null 
[Entity 1] CONSTRUCTOR START: type=sheep at 107,38
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 2] CONSTRUCTOR START: type=sheep at 7,74
[Entity 2] Calling registerEntity...
[Entity 2] registerEntity returned.
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 3] CONSTRUCTOR START: type=sheep at 80,22
[Entity 3] Calling registerEntity...
[Entity 3] registerEntity returned.
[Entity 3] Calling updatePosition...
[Entity 3] updatePosition returned.
[DIAG] Actor Created ID: 3
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 4] CONSTRUCTOR START: type=sheep at 51,7
[Entity 4] Calling registerEntity...
[Entity 4] registerEntity returned.
[Entity 4] Calling updatePosition...
[Entity 4] updatePosition returned.
[DIAG] Actor Created ID: 4
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 5] CONSTRUCTOR START: type=sheep at 63,151
[Entity 5] Calling registerEntity...
[Entity 5] registerEntity returned.
[Entity 5] Calling updatePosition...
[Entity 5] updatePosition returned.
[DIAG] Actor Created ID: 5
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 6] CONSTRUCTOR START: type=sheep at 151,152
[Entity 6] Calling registerEntity...
[Entity 6] registerEntity returned.
[Entity 6] Calling updatePosition...
[Entity 6] updatePosition returned.
[DIAG] Actor Created ID: 6
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 7] CONSTRUCTOR START: type=sheep at 71,78
[Entity 7] Calling registerEntity...
[Entity 7] registerEntity returned.
[Entity 7] Calling updatePosition...
[Entity 7] updatePosition returned.
[DIAG] Actor Created ID: 7
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 8] CONSTRUCTOR START: type=sheep at 131,94
[Entity 8] Calling registerEntity...
[Entity 8] registerEntity returned.
[Entity 8] Calling updatePosition...
[Entity 8] updatePosition returned.
[DIAG] Actor Created ID: 8
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 9] CONSTRUCTOR START: type=sheep at 131,83
[Entity 9] Calling registerEntity...
[Entity 9] registerEntity returned.
[Entity 9] Calling updatePosition...
[Entity 9] updatePosition returned.
[DIAG] Actor Created ID: 9
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
SheepManager Refactored: Initialized with Entity-based Sheep. IDENTIFIER: UNIQUE_LOG_STAMP_12345

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould remove dead sheep during manager update
[22m[39mDEBUG LAST: sm = SheepManager {
  scene: MockObject {
    position: MockVector3 { x: [33m0[39m, y: [33m0[39m, z: [33m0[39m },
    rotation: MockVector3 { x: [33m0[39m, y: [33m0[39m, z: [33m0[39m },
    scale: MockVector3 { x: [33m1[39m, y: [33m1[39m, z: [33m1[39m },
    color: MockColor { r: [33m1[39m, g: [33m1[39m, b: [33m1[39m },
    quaternion: { setFromAxisAngle: [36m[Function][39m },
    matrix: Matrix4 { elements: [36m[Array][39m },
    userData: {},
    children: [],
    add: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    remove: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    getObjectByName: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    traverse: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    lookAt: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    updateProjectionMatrix: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    updateMatrix: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    copy: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    rotateX: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    rotateY: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    rotateZ: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    translateX: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    translateY: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    translateZ: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    geometry: { dispose: [36m[Function][39m },
    material: { dispose: [36m[Function][39m }
  },
  terrain: {
    width: [33m160[39m,
    depth: [33m160[39m,
    logicalWidth: [33m160[39m,
    logicalDepth: [33m160[39m,
    buildings: [],
    entityGrid: [
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m,
      ... 60 more items
    ],
    initEntityGrid: [36m[Function: initEntityGrid][39m,
    getTileHeight: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
    },
    isWalkable: [36m[Function: isWalkable][39m,
    isReachable: [36m[Function: isReachable][39m,
    update: [36m[Function: update][39m,
    registerEntity: [36m[Function: registerEntity][39m,
    unregisterEntity: [36m[Function: unregisterEntity][39m,
    removeBuilding: [36m[Function: removeBuilding][39m,
    updateMeshPosition: [36m[Function: updateMeshPosition][39m,
    updateLights: [36m[Function: updateLights][39m,
    getBuildingAt: [36m[Function: getBuildingAt][39m,
    getRegion: [36m[Function: getRegion][39m,
    isValidGrid: [36m[Function: isValidGrid][39m,
    findPath: [36m[Function: findPath][39m,
    findPathAsync: [36m[Function: findPathAsync][39m,
    resetPathfindingBudget: [36m[Function: resetPathfindingBudget][39m,
    isAdjacentToRegion: [36m[Function: isAdjacentToRegion][39m,
    checkYield: [36m[Function: checkYield][39m,
    checkFlatArea: [36m[Function: checkFlatArea][39m,
    generateRandomTerrain: [36m[AsyncFunction: generateRandomTerrain][39m,
    setHeight: [36m[Function: setHeight][39m,
    updateColors: [36m[Function: updateColors][39m,
    gridToWorld: [36m[Function: gridToWorld][39m,
    worldToGrid: [36m[Function: worldToGrid][39m,
    setSeason: [36m[Function: setSeason][39m,
    addBuilding: [36m[Function: addBuilding][39m,
    getRandomPointInRegion: [36m[Function: getRandomPointInRegion][39m,
    serialize: [36m[Function: serialize][39m,
    deserialize: [36m[Function: deserialize][39m,
    grid: [
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m, [36m[Array][39m,
      [36m[Array][39m, [36m[Array][39m,
      ... 60 more items
    ]
  },
  clippingPlanes: [],
  sheeps: [
    Sheep {
      id: [33m0[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m55[39m,
      gridZ: [33m3[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m3.535067153166727[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m1[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m107[39m,
      gridZ: [33m38[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m2.1663772858675303[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m2[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m7[39m,
      gridZ: [33m74[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m2.929344369635183[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m3[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m80[39m,
      gridZ: [33m22[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m4.808837998314624[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m4[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m51[39m,
      gridZ: [33m7[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m3.11399615110956[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m5[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m63[39m,
      gridZ: [33m151[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m2.059160793595482[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m6[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m151[39m,
      gridZ: [33m152[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m4.039347049542364[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m7[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m71[39m,
      gridZ: [33m78[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m2.002497337293258[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m8[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m131[39m,
      gridZ: [33m94[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m2.266591307448139[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    },
    Sheep {
      id: [33m9[39m,
      scene: [36m[MockObject][39m,
      terrain: [36m[Object][39m,
      game: [36m[Game][39m,
      frameCount: [33m0[39m,
      gridX: [33m131[39m,
      gridZ: [33m83[39m,
      type: [32m'sheep'[39m,
      spatialType: [32m'sheep'[39m,
      position: [36m[MockVector3][39m,
      rotationY: [33m0[39m,
      userData: {},
      isMoving: [33mfalse[39m,
      moveTimer: [33m0[39m,
      moveDuration: [33m1[39m,
      moveStartTime: [33m0[39m,
      startGridX: [33m0[39m,
      startGridZ: [33m0[39m,
      targetGridX: [33m0[39m,
      targetGridZ: [33m0[39m,
      walkAnimTimer: [33m0[39m,
      isDead: [33mfalse[39m,
      age: [33m0[39m,
      limbs: [90mundefined[39m,
      path: [1mnull[22m,
      pathIndex: [33m0[39m,
      stuckCount: [33m0[39m,
      stuckTimer: [33m0[39m,
      lastPos: [36m[MockVector3][39m,
      pathFailCount: [33m0[39m,
      action: [32m'Idle'[39m,
      lastMoveLog: [32m''[39m,
      raidGoal: [1mnull[22m,
      lifespan: [33m100[39m,
      isFinished: [33mfalse[39m,
      unreachableTimer: [33m0[39m,
      mesh: [36m[MockObject][39m,
      targetRequest: [90mundefined[39m,
      targetItem: [90mundefined[39m,
      heldItem: [90mundefined[39m,
      targetEntity: [90mundefined[39m,
      targetBuilding: [90mundefined[39m,
      hp: [33m30[39m,
      maxHp: [33m30[39m,
      damage: [33m10[39m,
      attackRate: [33m1[39m,
      attackCooldown: [33m0[39m,
      combatRange: [33m1[39m,
      isRanged: [33mfalse[39m,
      baseMoveDuration: [33m1[39m,
      lastPathTime: [33m0[39m,
      isPathfinding: [33mfalse[39m,
      isPathfindingThrottled: [33mfalse[39m,
      isUnreachable: [33mfalse[39m,
      isWaitingForPath: [33mfalse[39m,
      minDistToTarget: [33mInfinity[39m,
      pathStagnation: [33m0[39m,
      pathRequestId: [33m0[39m,
      pathTargetX: [90mundefined[39m,
      pathTargetZ: [90mundefined[39m,
      pathRequestedTargetX: [90mundefined[39m,
      pathRequestedTargetZ: [90mundefined[39m,
      state: [36m[SheepWander][39m,
      simTime: [33m0[39m,
      moveInterval: [33m2.3143882649781617[39m,
      lastTime: [33m0[39m,
      stagnationTimer: [33m0[39m
    }
  ],
  sheepCount: [33m10[39m
}
DEBUG LAST: sm type = object
DEBUG LAST: sm constructor = SheepManager
DEBUG LAST: sm keys = [ [32m'scene'[39m, [32m'terrain'[39m, [32m'clippingPlanes'[39m, [32m'sheeps'[39m, [32m'sheepCount'[39m ]
Resetting SheepManager...
[Entity 10] CONSTRUCTOR START: type=sheep at 49,91
[Entity 10] Calling registerEntity...
[Entity 10] registerEntity returned.
[Entity 10] Calling updatePosition...
[Entity 10] updatePosition returned.
[DIAG] Actor Created ID: 10
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 11] CONSTRUCTOR START: type=sheep at 65,78
[Entity 11] Calling registerEntity...
[Entity 11] registerEntity returned.
[Entity 11] Calling updatePosition...
[Entity 11] updatePosition returned.
[DIAG] Actor Created ID: 11
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 12] CONSTRUCTOR START: type=sheep at 98,20
[Entity 12] Calling registerEntity...
[Entity 12] registerEntity returned.
[Entity 12] Calling updatePosition...
[Entity 12] updatePosition returned.
[DIAG] Actor Created ID: 12
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 13] CONSTRUCTOR START: type=sheep at 61,124
[Entity 13] Calling registerEntity...
[Entity 13] registerEntity returned.
[Entity 13] Calling updatePosition...
[Entity 13] updatePosition returned.
[DIAG] Actor Created ID: 13
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 14] CONSTRUCTOR START: type=sheep at 118,92
[Entity 14] Calling registerEntity...
[Entity 14] registerEntity returned.
[Entity 14] Calling updatePosition...
[Entity 14] updatePosition returned.
[DIAG] Actor Created ID: 14
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 15] CONSTRUCTOR START: type=sheep at 28,6
[Entity 15] Calling registerEntity...
[Entity 15] registerEntity returned.
[Entity 15] Calling updatePosition...
[Entity 15] updatePosition returned.
[DIAG] Actor Created ID: 15
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 16] CONSTRUCTOR START: type=sheep at 30,94
[Entity 16] Calling registerEntity...
[Entity 16] registerEntity returned.
[Entity 16] Calling updatePosition...
[Entity 16] updatePosition returned.
[DIAG] Actor Created ID: 16
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 17] CONSTRUCTOR START: type=sheep at 139,2
[Entity 17] Calling registerEntity...
[Entity 17] registerEntity returned.
[Entity 17] Calling updatePosition...
[Entity 17] updatePosition returned.
[DIAG] Actor Created ID: 17
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 18] CONSTRUCTOR START: type=sheep at 55,99
[Entity 18] Calling registerEntity...
[Entity 18] registerEntity returned.
[Entity 18] Calling updatePosition...
[Entity 18] updatePosition returned.
[DIAG] Actor Created ID: 18
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 19] CONSTRUCTOR START: type=sheep at 42,157
[Entity 19] Calling registerEntity...
[Entity 19] registerEntity returned.
[Entity 19] Calling updatePosition...
[Entity 19] updatePosition returned.
[DIAG] Actor Created ID: 19
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould regenerate sheep when population is low
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould regenerate sheep when population is low
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 2] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5å€‹ã®æ´žçªŸã‚’ç”Ÿæˆä¸­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.597993, 0.278530) -> Grid(95, 44) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.866668, 0.991801) -> Grid(138, 158) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.137431, 0.183992) -> Grid(21, 29) rngState=undefined
[GoblinManager] æ´žçªŸç”Ÿæˆå®Œäº†: 0/5 (è©¦è¡Œå›žæ•°: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.
Resetting SheepManager...
[Entity 20] CONSTRUCTOR START: type=sheep at 98,133
[Entity 20] Calling registerEntity...
[Entity 20] registerEntity returned.
[Entity 20] Calling updatePosition...
[Entity 20] updatePosition returned.
[DIAG] Actor Created ID: 20
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 21] CONSTRUCTOR START: type=sheep at 4,125
[Entity 21] Calling registerEntity...
[Entity 21] registerEntity returned.
[Entity 21] Calling updatePosition...
[Entity 21] updatePosition returned.
[DIAG] Actor Created ID: 21
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 22] CONSTRUCTOR START: type=sheep at 39,138
[Entity 22] Calling registerEntity...
[Entity 22] registerEntity returned.
[Entity 22] Calling updatePosition...
[Entity 22] updatePosition returned.
[DIAG] Actor Created ID: 22
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 23] CONSTRUCTOR START: type=sheep at 25,60
[Entity 23] Calling registerEntity...
[Entity 23] registerEntity returned.
[Entity 23] Calling updatePosition...
[Entity 23] updatePosition returned.
[DIAG] Actor Created ID: 23
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 24] CONSTRUCTOR START: type=sheep at 156,150
[Entity 24] Calling registerEntity...
[Entity 24] registerEntity returned.
[Entity 24] Calling updatePosition...
[Entity 24] updatePosition returned.
[DIAG] Actor Created ID: 24
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 25] CONSTRUCTOR START: type=sheep at 46,35
[Entity 25] Calling registerEntity...
[Entity 25] registerEntity returned.
[Entity 25] Calling updatePosition...
[Entity 25] updatePosition returned.
[DIAG] Actor Created ID: 25
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 26] CONSTRUCTOR START: type=sheep at 18,123
[Entity 26] Calling registerEntity...
[Entity 26] registerEntity returned.
[Entity 26] Calling updatePosition...
[Entity 26] updatePosition returned.
[DIAG] Actor Created ID: 26
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 27] CONSTRUCTOR START: type=sheep at 22,49
[Entity 27] Calling registerEntity...
[Entity 27] registerEntity returned.
[Entity 27] Calling updatePosition...
[Entity 27] updatePosition returned.
[DIAG] Actor Created ID: 27
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 28] CONSTRUCTOR START: type=sheep at 34,135
[Entity 28] Calling registerEntity...
[Entity 28] registerEntity returned.
[Entity 28] Calling updatePosition...
[Entity 28] updatePosition returned.
[DIAG] Actor Created ID: 28
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 29] CONSTRUCTOR START: type=sheep at 67,145
[Entity 29] Calling registerEntity...
[Entity 29] registerEntity returned.
[Entity 29] Calling updatePosition...
[Entity 29] updatePosition returned.
[DIAG] Actor Created ID: 29
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
SheepManager Refactored: Initialized with Entity-based Sheep. IDENTIFIER: UNIQUE_LOG_STAMP_12345

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould regenerate sheep when population is low
[22m[39mResetting SheepManager...
[Entity 30] CONSTRUCTOR START: type=sheep at 81,69
[Entity 30] Calling registerEntity...
[Entity 30] registerEntity returned.
[Entity 30] Calling updatePosition...
[Entity 30] updatePosition returned.
[DIAG] Actor Created ID: 30
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 31] CONSTRUCTOR START: type=sheep at 32,87
[Entity 31] Calling registerEntity...
[Entity 31] registerEntity returned.
[Entity 31] Calling updatePosition...
[Entity 31] updatePosition returned.
[DIAG] Actor Created ID: 31
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 32] CONSTRUCTOR START: type=sheep at 18,50
[Entity 32] Calling registerEntity...
[Entity 32] registerEntity returned.
[Entity 32] Calling updatePosition...
[Entity 32] updatePosition returned.
[DIAG] Actor Created ID: 32
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 33] CONSTRUCTOR START: type=sheep at 1,26
[Entity 33] Calling registerEntity...
[Entity 33] registerEntity returned.
[Entity 33] Calling updatePosition...
[Entity 33] updatePosition returned.
[DIAG] Actor Created ID: 33
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 34] CONSTRUCTOR START: type=sheep at 82,39
[Entity 34] Calling registerEntity...
[Entity 34] registerEntity returned.
[Entity 34] Calling updatePosition...
[Entity 34] updatePosition returned.
[DIAG] Actor Created ID: 34
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

 [31mÃ—[39m src/tests/SheepHuntingFix.test.js[2m > [22mSheep Hunting Logic & Manager Update Fix[2m > [22mshould remove dead sheep during manager update[32m 67[2mms[22m[39m
[31m   â†’ this.terrain.findBestTarget is not a function[39m
[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 3] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5å€‹ã®æ´žçªŸã‚’ç”Ÿæˆä¸­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.126510, 0.144698) -> Grid(20, 23) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.495921, 0.565203) -> Grid(79, 90) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.610081, 0.870775) -> Grid(97, 139) rngState=undefined
[GoblinManager] æ´žçªŸç”Ÿæˆå®Œäº†: 0/5 (è©¦è¡Œå›žæ•°: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.
Resetting SheepManager...
[Entity 35] CONSTRUCTOR START: type=sheep at 133,55
[Entity 35] Calling registerEntity...
[Entity 35] registerEntity returned.
[Entity 35] Calling updatePosition...
[Entity 35] updatePosition returned.
[DIAG] Actor Created ID: 35
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 36] CONSTRUCTOR START: type=sheep at 14,123
[Entity 36] Calling registerEntity...
[Entity 36] registerEntity returned.
[Entity 36] Calling updatePosition...
[Entity 36] updatePosition returned.
[DIAG] Actor Created ID: 36
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 37] CONSTRUCTOR START: type=sheep at 106,65
[Entity 37] Calling registerEntity...
[Entity 37] registerEntity returned.
[Entity 37] Calling updatePosition...
[Entity 37] updatePosition returned.
[DIAG] Actor Created ID: 37
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 38] CONSTRUCTOR START: type=sheep at 53,30
[Entity 38] Calling registerEntity...
[Entity 38] registerEntity returned.
[Entity 38] Calling updatePosition...
[Entity 38] updatePosition returned.
[DIAG] Actor Created ID: 38
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 39] CONSTRUCTOR START: type=sheep at 71,158
[Entity 39] Calling registerEntity...
[Entity 39] registerEntity returned.
[Entity 39] Calling updatePosition...
[Entity 39] updatePosition returned.
[DIAG] Actor Created ID: 39
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 40] CONSTRUCTOR START: type=sheep at 72,142
[Entity 40] Calling registerEntity...
[Entity 40] registerEntity returned.
[Entity 40] Calling updatePosition...
[Entity 40] updatePosition returned.
[DIAG] Actor Created ID: 40
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 41] CONSTRUCTOR START: type=sheep at 19,18
[Entity 41] Calling registerEntity...
[Entity 41] registerEntity returned.
[Entity 41] Calling updatePosition...
[Entity 41] updatePosition returned.
[DIAG] Actor Created ID: 41
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 42] CONSTRUCTOR START: type=sheep at 130,3
[Entity 42] Calling registerEntity...
[Entity 42] registerEntity returned.
[Entity 42] Calling updatePosition...
[Entity 42] updatePosition returned.
[DIAG] Actor Created ID: 42
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 43] CONSTRUCTOR START: type=sheep at 47,152
[Entity 43] Calling registerEntity...
[Entity 43] registerEntity returned.
[Entity 43] Calling updatePosition...
[Entity 43] updatePosition returned.
[DIAG] Actor Created ID: 43
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 44] CONSTRUCTOR START: type=sheep at 87,82
[Entity 44] Calling registerEntity...
[Entity 44] registerEntity returned.
[Entity 44] Calling updatePosition...
[Entity 44] updatePosition returned.
[DIAG] Actor Created ID: 44
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
SheepManager Refactored: Initialized with Entity-based Sheep. IDENTIFIER: UNIQUE_LOG_STAMP_12345

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39m[Entity 45] CONSTRUCTOR START: type=unit at 10,10
[Entity 45] Calling registerEntity...
[Entity 45] registerEntity returned.
[Entity 45] Calling updatePosition...
[Entity 45] updatePosition returned.
[DIAG] Actor Created ID: 45
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:player Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:player Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0
[Entity 46] CONSTRUCTOR START: type=sheep at 11,11
[Entity 46] Calling registerEntity...
[Entity 46] registerEntity returned.
[Entity 46] Calling updatePosition...
[Entity 46] updatePosition returned.
[DIAG] Actor Created ID: 46
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 47] CONSTRUCTOR START: type=sheep at 40,40
[Entity 47] Calling registerEntity...
[Entity 47] registerEntity returned.
[Entity 47] Calling updatePosition...
[Entity 47] updatePosition returned.
[DIAG] Actor Created ID: 47
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

 [31mÃ—[39m src/tests/SheepHuntingFix.test.js[2m > [22mSheep Hunting Logic & Manager Update Fix[2m > [22mshould regenerate sheep when population is low[32m 32[2mms[22m[39m
[31m   â†’ this.terrain.findBestTarget is not a function[39m
 [31mÃ—[39m src/tests/SheepHuntingFix.test.js[2m > [22mSheep Hunting Logic & Manager Update Fix[2m > [22mshould ignore dead sheep in hunter targeting[33m 18786[2mms[22m[39m
[31m   â†’ expected Sheep{ id: 41, â€¦(66) } to be Sheep{ id: 47, â€¦(66) } // Object.is equality[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[90m (3)[39m
[2m   Start at [22m 20:02:56
[2m   Duration [22m 20.39s[2m (transform 582ms, setup 99ms, import 656ms, tests 18.89s, environment 530ms)[22m

