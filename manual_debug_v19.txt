
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign a manual request to an Idle worker
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign a manual request to an Idle worker
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should NOT assign to a Busy worker (already working)
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should NOT assign to a Busy worker (already working)
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Wandering worker (Low Priority)
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Wandering worker (Low Priority)
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Moving worker (Low Priority)
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Moving worker (Low Priority)
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should re-assign a unit that is "Moving" to a job (Not yet Working)
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should re-assign a unit that is "Moving" to a job (Not yet Working)
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0
[Game] forceAssignRequest FAILED for Req req_new. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1

 笶ｯ src/tests/ManualAssignment.test.js (5 tests | 1 failed) 30ms
     笨・should assign a manual request to an Idle worker 12ms
     笨・should NOT assign to a Busy worker (already working) 3ms
     笨・should assign to a Wandering worker (Low Priority) 1ms
     笨・should assign to a Moving worker (Low Priority) 2ms
     ﾃ・should re-assign a unit that is "Moving" to a job (Not yet Working) 10ms

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ Failed Tests 1 竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ

 FAIL  src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should re-assign a unit that is "Moving" to a job (Not yet Working)
AssertionError: expected { id: 'req_old', x: 50, z: 50, 窶ｦ(2) } to be { id: 'req_new', x: 10, z: 10, 窶ｦ(2) } // Object.is equality

- Expected
+ Received

  {
-   "id": "req_new",
-   "status": "pending",
-   "type": "build",
-   "x": 10,
-   "z": 10,
+   "assignedTo": 10,
+   "id": "req_old",
+   "status": "assigned",
+   "x": 50,
+   "z": 50,
  }

 笶ｯ src/tests/ManualAssignment.test.js:206:33
    204| 
    205|         // Expectation: The unit should switch to the NEW request
    206|         expect(u.targetRequest).toBe(req);
       |                                 ^
    207|         expect(req.assignedTo).toBe(u.id);
    208|         expect(req.status).toBe('assigned');

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[1/1]竡ｯ


 Test Files  1 failed (1)
      Tests  1 failed | 4 passed (5)
   Start at  22:29:06
   Duration  1.05s (transform 276ms, setup 34ms, import 347ms, tests 30ms, environment 418ms)

