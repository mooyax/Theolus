
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should automatically engage a nearby goblin hut
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10
Unit created. Game set: [33mtrue[39m

stdout | src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should automatically engage a nearby goblin hut
Mock findBestTarget called for building
Unit 1 found Base via Spatial Search!

stdout | src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should NOT engage if worker (safeguard check)
[UnitCore.js] Unit Created ID:1 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:knight Pos:10,10
Unit created. Game set: [33mtrue[39m

 ç¬¶ï½¯ src/tests/BuildingAttackAuto.test.js (2 tests | 2 failed) 42ms
     ï¾ƒãƒ»should automatically engage a nearby goblin hut 38ms
     ï¾ƒãƒ»should NOT engage if worker (safeguard check) 2ms

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Failed Tests 2 ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

 FAIL  src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should automatically engage a nearby goblin hut
TypeError: window.game.reportGlobalBattle is not a function
 ç¬¶ï½¯ Unit.reportEnemy src/Unit.js:776:25
    774|         } else if (window.game) {
    775|             // If no squad, report directly to Global
    776|             window.game.reportGlobalBattle(x, z);
       |                         ^
    777|         }
    778| 
 ç¬¶ï½¯ Unit.searchSurroundings src/Unit.js:1072:22
 ç¬¶ï½¯ src/tests/BuildingAttackAuto.test.js:64:14

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[1/2]ç«¡ï½¯

 FAIL  src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should NOT engage if worker (safeguard check)
TypeError: window.game.reportGlobalBattle is not a function
 ç¬¶ï½¯ Unit.reportEnemy src/Unit.js:776:25
    774|         } else if (window.game) {
    775|             // If no squad, report directly to Global
    776|             window.game.reportGlobalBattle(x, z);
       |                         ^
    777|         }
    778| 
 ç¬¶ï½¯ Unit.searchSurroundings src/Unit.js:1043:22
 ç¬¶ï½¯ src/tests/BuildingAttackAuto.test.js:94:14

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[2/2]ç«¡ï½¯


 Test Files  1 failed (1)
      Tests  2 failed (2)
   Start at  23:03:58
   Duration  1.09s (transform 144ms, setup 40ms, import 200ms, tests 42ms, environment 530ms)

