
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should retry migration after 30 seconds timeout
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should retry migration after 30 seconds timeout
Unit test-migrant migrating to 50,50 (Region undefined)
Unit test-migrant migration timed out. Retrying.
Unit test-migrant migrating to 50,50 (Region undefined)

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority)
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority)
Unit test-migrant migrating to 50,50 (Region undefined)
Unit test-migrant interrupted migration for combat.

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should stop migrating if construction succeeds
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should stop migrating if construction succeeds
Unit test-migrant migrating to 50,50 (Region undefined)

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > DEBUG: should log blockage reasons correctly
[UnitCore.js] Unit Created ID:3 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:50,50

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > DEBUG: should log blockage reasons correctly
[Unit test-migrant] Blocked by Slope at 21,20 H:2->6

 Á¨∂ÔΩØ src/tests/MigrationImprovement.test.js (4 tests | 1 failed) 48ms
     Á¨®„Éªshould retry migration after 30 seconds timeout 12ms
     ÔæÉ„Éªshould interrupt migration if enemy is found (Priority) 28ms
     Á¨®„Éªshould stop migrating if construction succeeds 3ms
     Á¨®„ÉªDEBUG: should log blockage reasons correctly 2ms
stdout | src/tests/CombatRequestHandoff.test.js > Request Responsiveness & Combat Handoff > Worker releases job when died
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
Unit 0 (worker) DIED. R.I.P.
Run Logic...
[Unit.js] ENTERED updateLogic. Dead=true
Simulate Death. Role: worker Req: { id: [32m'req_1'[39m, x: [33m12[39m, z: [33m12[39m, status: [32m'assigned'[39m, assignedTo: [33m0[39m } Game: [33mtrue[39m
[Test] Unit Dead? true Health: undefined
[Test] ReleaseRequest Calls: [33m0[39m

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should handle basic Unit update without crash
[UnitCore.js] Unit Created ID:0 Role:worker Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:20,20

stderr | src/tests/CombatRequestHandoff.test.js > Request Responsiveness & Combat Handoff > Worker releases job when died
[Test] Unit HP before: 10
[Test] Is Mock? false
[Unit 0] die() called. Req:null Game:true/true
[Unit 0] die() SKIP RELEASE. Req: false Game: true
[Test] Unit HP after: 0. isDead: true

stdout | src/tests/NightLogic.test.js > Night Logic - Shelter Entry > Worker should engage pathfinding to House but is likely blocked
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=true, Stag=0.0, Age=20.0, H=10, Action=undefined
[Unit Heartbeat] ID:0 Action:undefined Moving:false T:1000.0 dt:100.0000 Int:0
[Unit 0] Moving onto Rock at 0,1 H:10 (Speed Penalty)
Unit 0 migrating to 1,1 (Region 1)
[Unit 0] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=true, Stag=0.0, Age=40.0, H=10, Action=Migrating
[Unit Heartbeat] ID:0 Action:Migrating Moving:false T:3000.0 dt:100.0000 Int:0
Unit 0 migration timed out. Retrying.
Unit 0 migrating to 11,1 (Region 1)
[Unit 0] Moving onto Rock at 10,1 H:10 (Speed Penalty)

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should handle basic Unit update without crash
[Unit.js] ENTERED updateLogic. Dead=false
[UnitWanderState] Update. ID:0 Action:Idle Target:No
[UnitWanderState] Check Migration. ID:0 Action:Idle Target:false 

DEBUG TEST: Moisture: 0
stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should NOT allow WanderState to interfere with Migration Movement
[UnitCore.js] Unit Created ID:1 Role:worker Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:20,20

stdout | src/tests/Unit.test.js > Unit Logic > Resource Gathering > should gather fish if checking neighbors finds water
[UnitCore.js] Unit Created ID:0 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:5,5

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should NOT allow WanderState to interfere with Migration Movement
Unit 1 migrating to 30,30 (Region 1)
[UnitWanderState] Update. ID:1 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:1 Action:Migrating Target:true 

stdout | src/tests/Unit.test.js > Unit Logic > Resource Gathering > should NOT gather fish if completely inland
[UnitCore.js] Unit Created ID:1 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:5,5

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should allow Migration Logic to control repeated movement
[UnitCore.js] Unit Created ID:2 Role:worker Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:20,20

stdout | src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should prioritize Farm and ABORT house if farm fails during famine
[UnitCore.js] Unit Created ID:2 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:5,5

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should allow Migration Logic to control repeated movement
Unit 2 migrating to 30,30 (Region 1)
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
[UnitWanderState] Update. ID:2 Action:Migrating Target:No
[UnitWanderState] Check Migration. ID:2 Action:Migrating Target:true 
Unit 2 built structure during migration. Stopping.
[Test Fail] Action changed to Idle at frame 51

stdout | src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should prioritize Farm and ABORT house if farm fails during famine
[Unit 2] Moving onto Rock at 5,6 H:10 (Speed Penalty)
[Unit 2] Blocked by Slope at 5,6 H:1->10

 Á¨∂ÔΩØ src/tests/NightLogic.test.js (1 test | 1 failed) 35ms
     ÔæÉ„ÉªWorker should engage pathfinding to House but is likely blocked 31ms
stdout | src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should fallback to House if NOT in famine
[UnitCore.js] Unit Created ID:3 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should fallback to House if NOT in famine
[Unit 3] Moving onto Rock at 5,6 H:10 (Speed Penalty)
[Unit 3] Blocked by Slope at 5,6 H:1->10

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should accept role in constructor
[UnitCore.js] Unit Created ID:4 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should accept role in constructor
[UnitCore.js] Unit Created ID:5 Role:hunter Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:5 Role:hunter Pos:5,5
[UnitCore.js] Unit Created ID:6 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:5,5
[UnitCore.js] Unit Created ID:7 Role:true Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should FAIL buildFarm and IMPROVE LAND if moisture is poor (simulated)
[UnitCore.js] Unit Created ID:8 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:8 Role:worker Pos:5,5

stderr | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should FAIL buildFarm and IMPROVE LAND if moisture is poor (simulated)
[Unit 8] Farm failed: Too dry (0). Improving land.
TEST CRASHED: AssertionError: expected "addBuilding" to not be called at all, but actually been called 1 times

Received: 

  1st addBuilding call:

    Array [
      "house",
      5,
      5,
    ]


Number of calls: 1

    at Proxy.<anonymous> (file:///C:/Users/mooya/develop/test/node_modules/@vitest/expect/dist/index.js:1400:10)
    at Proxy.<anonymous> (file:///C:/Users/mooya/develop/test/node_modules/@vitest/expect/dist/index.js:1090:14)
    at Proxy.methodWrapper (file:///C:/Users/mooya/develop/test/node_modules/chai/index.js:1700:25)
    at C:/Users/mooya/develop/test/src/tests/Unit.test.js:202:53
    at file:///C:/Users/mooya/develop/test/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Users/mooya/develop/test/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///C:/Users/mooya/develop/test/node_modules/@vitest/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/mooya/develop/test/node_modules/@vitest/runner/dist/index.js:1206:10)
    at file:///C:/Users/mooya/develop/test/node_modules/@vitest/runner/dist/index.js:1650:37

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should FAIL buildFarm and IMPROVE LAND if moisture is poor (simulated)
Unit improved land at 5,5. Moisture 0.50 -> 0.50
[Unit 8] Moving onto Rock at 5,6 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 5,6 H:1->10
[Unit 8] Moving onto Rock at 6,5 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 6,5 H:1->10

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should succeed buildFarm if moisture is optimal
[UnitCore.js] Unit Created ID:9 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:9 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should succeed buildFarm if moisture is optimal
[Unit 9] Moving onto Rock at 5,6 H:10 (Speed Penalty)

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should check heights during moveRandomly
[UnitCore.js] Unit Created ID:10 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:10 Role:worker Pos:5,5

 Á¨∂ÔΩØ src/tests/MigrationConflict.test.js (3 tests | 1 failed) 42ms
     Á¨®„Éªshould handle basic Unit update without crash 9ms
     Á¨®„Éªshould NOT allow WanderState to interfere with Migration Movement 5ms
     ÔæÉ„Éªshould allow Migration Logic to control repeated movement 25ms
 Á¨∂ÔΩØ src/tests/Unit.test.js (8 tests | 1 failed) 108ms
       Á¨®„Éªshould gather fish if checking neighbors finds water 11ms
       Á¨®„Éªshould NOT gather fish if completely inland 17ms
       Á¨®„Éªshould prioritize Farm and ABORT house if farm fails during famine 13ms
       Á¨®„Éªshould fallback to House if NOT in famine 20ms
       Á¨®„Éªshould accept role in constructor 8ms
       ÔæÉ„Éªshould FAIL buildFarm and IMPROVE LAND if moisture is poor (simulated) 26ms
       Á¨®„Éªshould succeed buildFarm if moisture is optimal 5ms
       Á¨®„Éªshould check heights during moveRandomly 3ms
stdout | src/tests/CombatBalance.test.js > Combat Balance Simulation > Knight vs Single Goblin (1v1) - AI Logic Check
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=false, Stag=0.0, Age=20.0, H=10, Action=undefined
[Unit Heartbeat] ID:0 Action:undefined Moving:false T:0.0 dt:0.1000 Int:0
[Unit Debug] ATTACKING Goblin 0
Goblin (normal) died. ID:0
[Unit Debug] Executing Logic. Role: knight
[AI CHECK] KnightAction: Idle GoblinHP: -69

stdout | src/tests/CombatBalance.test.js > Combat Balance Simulation > Wizard vs Single Goblin (1v1) - Wizard should win
[UnitCore.js] Unit Created ID:1 Role:wizard Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:wizard Pos:0,0
[Unit Debug] ATTACKING Goblin 1
Goblin (normal) died. ID:1

stdout | src/tests/CombatBalance.test.js > Combat Balance Simulation > Knight vs Swarm (1v5) - Knight should surviving
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0
[Unit Debug] ATTACKING Goblin g0
Goblin (normal) died. ID:g0
[Unit Debug] ATTACKING Goblin g1
Goblin (normal) died. ID:g1
[Unit Debug] ATTACKING Goblin g2
Goblin (normal) died. ID:g2
[Unit Debug] ATTACKING Goblin g3
Goblin (normal) died. ID:g3
[Unit Debug] ATTACKING Goblin g4
Goblin (normal) died. ID:g4

stdout | src/tests/CombatBalance.test.js > Combat Balance Simulation > Load Game Persistence - Should resume movement
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0
[Unit 3] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Unit 3] Moving onto Rock at 0,0 H:10 (Speed Penalty)
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,0

 Á¨∂ÔΩØ src/tests/CombatBalance.test.js (4 tests | 1 failed) 105ms
     Á¨®„ÉªKnight vs Single Goblin (1v1) - AI Logic Check 16ms
     Á¨®„ÉªWizard vs Single Goblin (1v1) - Wizard should win 34ms
     Á¨®„ÉªKnight vs Swarm (1v5) - Knight should surviving 16ms
     ÔæÉ„ÉªLoad Game Persistence - Should resume movement 30ms
stdout | src/tests/CombatRequestHandoff.test.js > Request Responsiveness & Combat Handoff > forceAssignRequest prioritizes idle unit over busy unit
[Game] forceAssignRequest FOUND Unit 2 (DistSq:2888). Scanned:2
[Game] Force-Assigned Request req_hot to Unit 2 (Score: 2888.0)

 Á¨∂ÔΩØ src/tests/CombatRequestHandoff.test.js (2 tests | 1 failed) 1068ms
     ÔæÉ„ÉªWorker releases job when died 585ms
     Á¨®„ÉªforceAssignRequest prioritizes idle unit over busy unit  479ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should tag new requests with createdAt timestamp
Game constructor called
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 44,130. Force:false
[Terrain] Building Added: cave at (44, 130) Size:1x1. Total: 1
GoblinManager: Cave registered at 44,130 
[GoblinManager] Clan clan_cave_44_130 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 126,14. Force:false
[Terrain] Building Added: cave at (126, 14) Size:1x1. Total: 2
GoblinManager: Cave registered at 126,14 
[GoblinManager] Clan clan_cave_126_14 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 46,108. Force:false
[Terrain] Building Added: cave at (46, 108) Size:1x1. Total: 3
GoblinManager: Cave registered at 46,108 
[GoblinManager] Clan clan_cave_46_108 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 23,123. Force:false
[Terrain] Building Added: cave at (23, 123) Size:1x1. Total: 4
GoblinManager: Cave registered at 23,123 
[GoblinManager] Clan clan_cave_23_123 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 69,106. Force:false
[Terrain] Building Added: cave at (69, 106) Size:1x1. Total: 5
GoblinManager: Cave registered at 69,106 
[GoblinManager] Clan clan_cave_69_106 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 7 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should tag new requests with createdAt timestamp
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0

stdout | src/tests/ForceBuild.test.js > Terrain Force Build Logic > should clear existing buildings when placing a new one
[Terrain] addBuilding: house at 10,10. Force:false
[Terrain] Building Added: house at (10, 10) Size:2x2. Total: 1
[Terrain] Clearing obstacle: house for new construction.
[Terrain] Building removed at 10,10
[Terrain] addBuilding: barracks at 10,10. Force:false
[Terrain] Building Added: barracks at (10, 10) Size:3x3. Total: 1

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cleanup expired pending requests
Game constructor called
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 78,72. Force:false
[Terrain] Building Added: cave at (78, 72) Size:1x1. Total: 1
GoblinManager: Cave registered at 78,72 
[GoblinManager] Clan clan_cave_78_72 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 133,132. Force:false
[Terrain] Building Added: cave at (133, 132) Size:1x1. Total: 2
GoblinManager: Cave registered at 133,132 
[GoblinManager] Clan clan_cave_133_132 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 158,39. Force:false
[Terrain] Building Added: cave at (158, 39) Size:1x1. Total: 3
GoblinManager: Cave registered at 158,39 
[GoblinManager] Clan clan_cave_158_39 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 110,147. Force:false
[Terrain] Building Added: cave at (110, 147) Size:1x1. Total: 4
GoblinManager: Cave registered at 110,147 
[GoblinManager] Clan clan_cave_110_147 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 144,30. Force:false
[Terrain] Building Added: cave at (144, 30) Size:1x1. Total: 5
GoblinManager: Cave registered at 144,30 
[GoblinManager] Clan clan_cave_144_30 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 11 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cleanup expired pending requests
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Added: raise at (20,20) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] forceAssignRequest FAILED for Req req_1. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request req_0 pending for 0.3s.
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Timed Out: raise ID:req_0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should save game data correctly
Game constructor called

stdout | src/tests/SaveLoad.test.js > Save/Load System > should save game data correctly
Saving Game Data: {
  slotId: [33m1[39m,
  timestamp: [33m1767093735606[39m,
  resources: { grain: [33m100[39m, fish: [33m50[39m, meat: [33m25[39m },
  gameTime: [33m12[39m,
  gameTotalTime: [33m0[39m,
  currentSeasonIndex: [90mundefined[39m,
  daysPassed: [90mundefined[39m,
  terrain: {
    logicalWidth: [33m160[39m,
    logicalDepth: [33m160[39m,
    version: [33m2[39m,
    h: [
      [33m15[39m, [33m15[39m, [33m14[39m, [33m14[39m, [33m13[39m, [33m13[39m, [33m13[39m, [33m12[39m, [33m12[39m, [33m11[39m, [33m11[39m, [33m10[39m,
       [33m9[39m,  [33m9[39m,  [33m9[39m,  [33m9[39m,  [33m9[39m,  [33m9[39m,  [33m9[39m,  [33m9[39m,  [33m9[39m,  [33m8[39m,  [33m7[39m,  [33m7[39m,
       [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m6[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,
       [33m8[39m,  [33m8[39m,  [33m8[39m,  [33m8[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m6[39m,  [33m6[39m,  [33m6[39m,
       [33m6[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m8[39m,  [33m8[39m,  [33m8[39m,  [33m7[39m,  [33m7[39m,  [33m8[39m,  [33m8[39m,  [33m8[39m,
       [33m8[39m,  [33m8[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m7[39m,  [33m8[39m,  [33m8[39m,  [33m8[39m,  [33m9[39m,  [33m9[39m,  [33m8[39m,
       [33m8[39m,  [33m9[39m,  [33m9[39m, [33m10[39m,  [33m9[39m,  [33m9[39m,  [33m8[39m,  [33m7[39m,  [33m6[39m,  [33m6[39m,  [33m5[39m,  [33m4[39m,
       [33m4[39m,  [33m4[39m,  [33m4[39m,  [33m4[39m,  [33m3[39m,  [33m2[39m,  [33m1[39m,  [33m0[39m, [33m-0[39m, [33m-1[39m, [33m-1[39m, [33m-1[39m,
      [33m-1[39m, [33m-1[39m, [33m-1[39m, [33m-0[39m,
      ... 25500 more items
    ],
    n: [
       [33m0.01[39m,    [33m-0[39m, [33m-0.02[39m,    [33m-0[39m, [33m-0.02[39m,  [33m0.02[39m,     [33m0[39m, [33m-0.01[39m, [33m-0.02[39m,
      [33m-0.02[39m,  [33m0.02[39m,  [33m0.01[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.02[39m,     [33m0[39m,
       [33m0.01[39m, [33m-0.01[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.02[39m, [33m-0.02[39m,  [33m0.01[39m,    [33m-0[39m,     [33m0[39m,
      [33m-0.01[39m, [33m-0.02[39m, [33m-0.02[39m,    [33m-0[39m,  [33m0.02[39m,  [33m0.01[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.02[39m,
      [33m-0.01[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.02[39m, [33m-0.01[39m,     [33m0[39m, [33m-0.02[39m,     [33m0[39m,  [33m0.02[39m,
       [33m0.02[39m,     [33m0[39m,  [33m0.01[39m,     [33m0[39m, [33m-0.01[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.01[39m,
       [33m0.01[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.01[39m,  [33m0.01[39m,  [33m0.01[39m,  [33m0.02[39m,
       [33m0.02[39m, [33m-0.02[39m,  [33m0.02[39m,  [33m0.02[39m,  [33m0.01[39m,  [33m0.02[39m, [33m-0.01[39m, [33m-0.02[39m, [33m-0.02[39m,
      [33m-0.01[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.01[39m,  [33m0.02[39m,  [33m0.01[39m,  [33m0.02[39m,  [33m0.01[39m,  [33m0.02[39m,
         [33m-0[39m,     [33m0[39m,  [33m0.01[39m,     [33m0[39m,  [33m0.02[39m, [33m-0.01[39m, [33m-0.02[39m,    [33m-0[39m,  [33m0.02[39m,
      [33m-0.02[39m,  [33m0.01[39m,    [33m-0[39m,  [33m0.01[39m,  [33m0.02[39m, [33m-0.02[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.02[39m,
       [33m0.02[39m,
      ... 25500 more items
    ],
    b: [],
    m: [
      [33m0.44[39m, [33m0.43[39m, [33m0.41[39m, [33m0.38[39m, [33m0.36[39m, [33m0.34[39m, [33m0.34[39m, [33m0.34[39m, [33m0.32[39m,  [33m0.3[39m,
      [33m0.29[39m, [33m0.27[39m, [33m0.27[39m, [33m0.27[39m, [33m0.28[39m, [33m0.28[39m, [33m0.27[39m, [33m0.26[39m, [33m0.25[39m, [33m0.24[39m,
      [33m0.23[39m, [33m0.23[39m, [33m0.23[39m, [33m0.24[39m, [33m0.26[39m, [33m0.27[39m, [33m0.28[39m, [33m0.29[39m,  [33m0.3[39m, [33m0.32[39m,
      [33m0.34[39m, [33m0.35[39m, [33m0.36[39m, [33m0.36[39m, [33m0.34[39m, [33m0.33[39m, [33m0.33[39m, [33m0.32[39m, [33m0.32[39m, [33m0.31[39m,
      [33m0.31[39m, [33m0.32[39m, [33m0.35[39m, [33m0.39[39m, [33m0.41[39m, [33m0.42[39m, [33m0.43[39m, [33m0.45[39m, [33m0.47[39m, [33m0.48[39m,
       [33m0.5[39m, [33m0.51[39m, [33m0.53[39m, [33m0.55[39m, [33m0.58[39m,  [33m0.6[39m, [33m0.63[39m, [33m0.64[39m, [33m0.66[39m, [33m0.68[39m,
      [33m0.71[39m, [33m0.72[39m, [33m0.73[39m, [33m0.74[39m, [33m0.74[39m, [33m0.74[39m, [33m0.72[39m,  [33m0.7[39m, [33m0.68[39m, [33m0.66[39m,
      [33m0.64[39m, [33m0.62[39m, [33m0.61[39m,  [33m0.6[39m,  [33m0.6[39m, [33m0.59[39m, [33m0.58[39m, [33m0.55[39m, [33m0.52[39m, [33m0.49[39m,
      [33m0.47[39m, [33m0.46[39m, [33m0.46[39m, [33m0.47[39m, [33m0.48[39m,  [33m0.5[39m, [33m0.52[39m, [33m0.53[39m, [33m0.54[39m, [33m0.53[39m,
      [33m0.51[39m,  [33m0.5[39m, [33m0.48[39m, [33m0.47[39m, [33m0.47[39m, [33m0.47[39m, [33m0.47[39m, [33m0.46[39m, [33m0.45[39m, [33m0.43[39m,
      ... 25500 more items
    ]
  },
  units: [],
  goblinManager: {},
  camera: {
    position: { x: [33m20[39m, y: [33m20[39m, z: [33m20[39m },
    zoom: [33m1[39m,
    target: { x: [90mundefined[39m, y: [90mundefined[39m, z: [90mundefined[39m }
  },
  requests: []
}
Saved to slot 1 (Compressed). Size: 24400 chars (Original: 309095)

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should NOT cleanup assigned requests even if old
Game constructor called
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 153,94. Force:false
[Terrain] Building Added: cave at (153, 94) Size:1x1. Total: 1
GoblinManager: Cave registered at 153,94 
[GoblinManager] Clan clan_cave_153_94 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 149,93. Force:false
[Terrain] Building Added: cave at (149, 93) Size:1x1. Total: 2
GoblinManager: Cave registered at 149,93 
[GoblinManager] Clan clan_cave_149_93 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 48,45. Force:false
[Terrain] Building Added: cave at (48, 45) Size:1x1. Total: 3
GoblinManager: Cave registered at 48,45 
[GoblinManager] Clan clan_cave_48_45 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 98,83. Force:false
[Terrain] Building Added: cave at (98, 83) Size:1x1. Total: 4
GoblinManager: Cave registered at 98,83 
[GoblinManager] Clan clan_cave_98_83 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 84,91. Force:false
[Terrain] Building Added: cave at (84, 91) Size:1x1. Total: 5
GoblinManager: Cave registered at 84,91 
[GoblinManager] Clan clan_cave_84_91 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 9 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should NOT cleanup assigned requests even if old
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0

stdout | src/tests/ForceBuild.test.js > Terrain Force Build Logic > should clear buildings partially in the way
[Terrain] addBuilding: house at 10,10. Force:false
[Terrain] Building Added: house at (10, 10) Size:2x2. Total: 1
Pre-Barracks Buildings: [ [32m'house'[39m ]
[Terrain] Clearing obstacle: house for new construction.
[Terrain] Building removed at 10,10
[Terrain] addBuilding: barracks at 9,9. Force:false
[Terrain] Building Added: barracks at (9, 9) Size:3x3. Total: 1
Post-Barracks Buildings: [ [32m'barracks'[39m ]

 Á¨®„Éªsrc/tests/ForceBuild.test.js (2 tests) 3459ms
     Á¨®„Éªshould clear existing buildings when placing a new one  1671ms
     Á¨®„Éªshould clear buildings partially in the way  1784ms
stdout | src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > triggerWave should mobilize idle goblins
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.

stdout | src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > triggerWave should mobilize idle goblins
[GoblinManager] TRIGGERING WAVE Level 1 for Clan test_clan!
[Wave] Spawning 1 goblins at cave 10,10 (Lvl 1)
[GoblinManager] Mobilized 2 idle goblins from Clan test_clan to raid target!

stdout | src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > mobilizeClan should rely on getClanRaidTarget fallback
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.

stdout | src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > mobilizeClan should rely on getClanRaidTarget fallback
[GoblinManager] Mobilized 1 idle goblins from Clan test_clan_fallback to raid target!

stderr | src/tests/GoblinMobilization.test.js
[GoblinManager] Aborting spawn: Grid cell has no building. Self-healing/Destroying Cave.
[GoblinManager] Removing invalid cave at 10,10

 Á¨®„Éªsrc/tests/GoblinMobilization.test.js (2 tests) 558ms
     Á¨®„ÉªtriggerWave should mobilize idle goblins  336ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cancel request via Proximity Search
Game constructor called
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 116,18. Force:false
[Terrain] Building Added: cave at (116, 18) Size:1x1. Total: 1
GoblinManager: Cave registered at 116,18 
[GoblinManager] Clan clan_cave_116_18 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 79,104. Force:false
[Terrain] Building Added: cave at (79, 104) Size:1x1. Total: 2
GoblinManager: Cave registered at 79,104 
[GoblinManager] Clan clan_cave_79_104 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 11,153. Force:false
[Terrain] Building Added: cave at (11, 153) Size:1x1. Total: 3
GoblinManager: Cave registered at 11,153 
[GoblinManager] Clan clan_cave_11_153 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 67,93. Force:false
[Terrain] Building Added: cave at (67, 93) Size:1x1. Total: 4
GoblinManager: Cave registered at 67,93 
[GoblinManager] Clan clan_cave_67_93 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 5,138. Force:false
[Terrain] Building Added: cave at (5, 138) Size:1x1. Total: 5
GoblinManager: Cave registered at 5,138 
[GoblinManager] Clan clan_cave_5_138 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 13 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cancel request via Proximity Search
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Added: raise at (20,20) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Canceled at 10,10 (Target: 11,11)

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[Game] New Battle Hotspot at 10,10 (Region:1)

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Decays intensity
[Game] New Battle Hotspot at 10,10 (Region:1)

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Mobilizes idle squads to intense hotspots (Updated Threshold)
[Game] Mobilizing Squad 1 to Hotspot at 100,20 (Intensity:100.0)

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Mobilizes idle squads
[Game] Mobilizing Squad 1 to Hotspot at 50,50 (Intensity:100.0)

 Á¨®„Éªsrc/tests/Hotspot.test.js (6 tests) 386ms
     Á¨®„ÉªClusters nearby battle reports  367ms
stdout | src/tests/SimpleRegion.test.js > Simple Region Connectivity > should identify a single island
Running calculateRegions...
Done.
Region ID at 5,5: 1

stdout | src/tests/BuildingDestruction.test.js > Building Destruction Logic > should successfully remove a building from the list
[Terrain] addBuilding: house at 10,10. Force:true
[Terrain] Building Added: house at (10, 10) Size:2x2. Total: 1
[Terrain] Building removed at 10,10

 Á¨®„Éªsrc/tests/WorkerReachability.test.js (2 tests) 331ms
     Á¨®„ÉªfindBestRequest filters out unreachable jobs  312ms
 Á¨®„Éªsrc/tests/SpatialSearch.test.js (4 tests) 4491ms
     Á¨®„Éªshould register and retrieve an entity  1258ms
     Á¨®„Éªshould move entity correctly between cells  1128ms
     Á¨®„Éªshould unregister entity  1002ms
     Á¨®„Éªshould find nearest entity using spatial search  1098ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
Game constructor called

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
Load Started...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/BuildingDestruction.test.js > Building Destruction Logic > should allow a goblin to destroy a building
[Terrain] addBuilding: house at 10,10. Force:true
[Terrain] Building Added: house at (10, 10) Size:2x2. Total: 1
Goblin 0 hitting Empty house. HP: 2
Goblin 0 hitting Empty house. HP: -7
[Terrain] Building removed at 10,10
Goblin 0 destroyed house!

 Á¨®„Éªsrc/tests/SimpleRegion.test.js (2 tests) 637ms
     Á¨®„Éªshould identify a single island  410ms
stdout | src/tests/BuildingDestruction.test.js > Building Destruction Logic > should handle identity mismatch (Ghost Building)
[Terrain] addBuilding: house at 20,20. Force:true
[Terrain] Building Added: house at (20, 20) Size:2x2. Total: 1
[Terrain] removeBuilding: Identity mismatch! searching by coord 20,20
[Terrain] Swapping ghost building object for authoritative one.
[Terrain] Building removed at 20,20

 Á¨®„Éªsrc/tests/BuildingDestruction.test.js (3 tests) 712ms
     Á¨®„Éªshould successfully remove a building from the list  425ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
Loading slot 1, Raw length: 100
Load: Decompressed successfully.
Parsed Data for slot 1: {
  timestamp: [33m1767093737968[39m,
  data: {
    resources: { grain: [33m999[39m, fish: [33m888[39m },
    gameTime: [33m6[39m,
    terrain: { logicalWidth: [33m10[39m, logicalDepth: [33m10[39m, grid: [], buildings: [] },
    units: [],
    camera: { position: [36m[Object][39m, target: [36m[Object][39m }
  }
}
Load Game: Data found {
  resources: { grain: [33m999[39m, fish: [33m888[39m },
  gameTime: [33m6[39m,
  terrain: { logicalWidth: [33m10[39m, logicalDepth: [33m10[39m, grid: [], buildings: [] },
  units: [],
  camera: { position: { x: [33m0[39m, y: [33m0[39m, z: [33m0[39m }, target: { x: [33m0[39m, y: [33m0[39m, z: [33m0[39m } }
}
Clearing 0 projectiles...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[DEBUG] Terrain.setSeason: Changing from undefined to Spring
[Game] Restored Camera Zoom: 1

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should prioritize nearest request when cancelling
Game constructor called
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 39,78. Force:false
[Terrain] Building Added: cave at (39, 78) Size:1x1. Total: 1
GoblinManager: Cave registered at 39,78 
[GoblinManager] Clan clan_cave_39_78 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 68,106. Force:false
[Terrain] Building Added: cave at (68, 106) Size:1x1. Total: 2
GoblinManager: Cave registered at 68,106 
[GoblinManager] Clan clan_cave_68_106 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 9,30. Force:false
[Terrain] Building Added: cave at (9, 30) Size:1x1. Total: 3
GoblinManager: Cave registered at 9,30 
[GoblinManager] Clan clan_cave_9_30 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 25,88. Force:false
[Terrain] Building Added: cave at (25, 88) Size:1x1. Total: 4
GoblinManager: Cave registered at 25,88 
[GoblinManager] Clan clan_cave_25_88 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 143,76. Force:false
[Terrain] Building Added: cave at (143, 76) Size:1x1. Total: 5
GoblinManager: Cave registered at 143,76 
[GoblinManager] Clan clan_cave_143_76 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should prioritize nearest request when cancelling
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Added: raise at (12,12) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Canceled at 10,10 (Target: 10,11)

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

 Á¨®„Éªsrc/tests/RequestLifecycle.test.js (5 tests) 4291ms
     Á¨®„Éªshould tag new requests with createdAt timestamp  852ms
     Á¨®„Éªshould cleanup expired pending requests  671ms
     Á¨®„Éªshould NOT cleanup assigned requests even if old  792ms
     Á¨®„Éªshould cancel request via Proximity Search  951ms
     Á¨®„Éªshould prioritize nearest request when cancelling  1022ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/GoblinFixes.test.js > Goblin Fixes Verification > GoblinManager difficulty scaling increases stronger goblin probability
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
Lvl 1 - King: 8, Shaman: 41, Hob: 93
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
ÓÅûËçò Goblin King Spawned!
Lvl 20 - King: 64, Shaman: 124, Hob: 286

 Á¨®„Éªsrc/tests/GoblinFixes.test.js (4 tests) 916ms
     Á¨®„ÉªEntity.getDistance should handle wrapping  376ms
stdout | src/tests/MultiJob.test.js > Multi-Job Juggling Verification > should NOT interrupt busy units when a new job is added
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 154,98. Force:false
[Terrain] Building Added: cave at (154, 98) Size:1x1. Total: 1
GoblinManager: Cave registered at 154,98 
[GoblinManager] Clan clan_cave_154_98 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 133,7. Force:false
[Terrain] Building Added: cave at (133, 7) Size:1x1. Total: 2
GoblinManager: Cave registered at 133,7 
[GoblinManager] Clan clan_cave_133_7 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 27,30. Force:false
[Terrain] Building Added: cave at (27, 30) Size:1x1. Total: 3
GoblinManager: Cave registered at 27,30 
[GoblinManager] Clan clan_cave_27_30 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 138,25. Force:false
[Terrain] Building Added: cave at (138, 25) Size:1x1. Total: 4
GoblinManager: Cave registered at 138,25 
[GoblinManager] Clan clan_cave_138_25 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 8,146. Force:false
[Terrain] Building Added: cave at (8, 146) Size:1x1. Total: 5
GoblinManager: Cave registered at 8,146 
[GoblinManager] Clan clan_cave_8_146 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 22 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/MultiJob.test.js > Multi-Job Juggling Verification > should NOT interrupt busy units when a new job is added
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:2
[Game] Force-Assigned Request 101 to Unit 1 (Score: 400.0)
[Game] forceAssignRequest FOUND Unit 2 (DistSq:400). Scanned:2
[Game] Force-Assigned Request 102 to Unit 2 (Score: 400.0)
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2

 Á¨®„Éªsrc/tests/MultiJob.test.js (1 test) 4834ms
     Á¨®„Éªshould NOT interrupt busy units when a new job is added  4832ms
stdout | src/tests/JobIdempotency.test.js > Job Assignment Idempotency > should NOT reset movement if claiming the same job twice
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 118,104. Force:false
[Terrain] Building Added: cave at (118, 104) Size:1x1. Total: 1
GoblinManager: Cave registered at 118,104 
[GoblinManager] Clan clan_cave_118_104 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 142,130. Force:false
[Terrain] Building Added: cave at (142, 130) Size:1x1. Total: 2
GoblinManager: Cave registered at 142,130 
[GoblinManager] Clan clan_cave_142_130 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 15,79. Force:false
[Terrain] Building Added: cave at (15, 79) Size:1x1. Total: 3
GoblinManager: Cave registered at 15,79 
[GoblinManager] Clan clan_cave_15_79 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 40,59. Force:false
[Terrain] Building Added: cave at (40, 59) Size:1x1. Total: 4
GoblinManager: Cave registered at 40,59 
[GoblinManager] Clan clan_cave_40_59 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 108,44. Force:false
[Terrain] Building Added: cave at (108, 44) Size:1x1. Total: 5
GoblinManager: Cave registered at 108,44 
[GoblinManager] Clan clan_cave_108_44 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 13 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

 Á¨∂ÔΩØ src/tests/JobIdempotency.test.js (1 test | 1 failed) 5157ms
     ÔæÉ„Éªshould NOT reset movement if claiming the same job twice 5154ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
Game constructor called

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
Load Started...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
Loading slot 1, Raw length: 113
Load: Decompressed successfully.
Parsed Data for slot 1: {
  timestamp: [33m1767093739492[39m,
  data: {
    resources: {},
    gameTime: [33m10[39m,
    terrain: { logicalWidth: [33m80[39m, grid: [], buildings: [] },
    units: [],
    requests: [ [36m[Object][39m, [36m[Object][39m ]
  }
}
Load Game: Data found {
  resources: {},
  gameTime: [33m10[39m,
  terrain: { logicalWidth: [33m80[39m, grid: [], buildings: [] },
  units: [],
  requests: [
    { id: [32m'req_1'[39m, type: [32m'raise'[39m, x: [33m5[39m, z: [33m5[39m, status: [32m'pending'[39m },
    { id: [32m'req_2'[39m, type: [32m'lower'[39m, x: [33m10[39m, z: [33m10[39m, status: [32m'completed'[39m }
  ]
}
Clearing 0 projectiles...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Terrain] Deserializing Legacy Format...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[DEBUG] Terrain.setSeason: Changing from undefined to Spring
[Game] Restoring 2 requests...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1,"Unnamed_CylinderGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

 Á¨®„Éªsrc/tests/SaveLoad.test.js (3 tests) 5879ms
     Á¨®„Éªshould save game data correctly  2026ms
     Á¨®„Éªshould load game data correctly  2402ms
     Á¨®„Éªshould restore request markers with correct renderOrder  1448ms
 Á¨®„Éªsrc/tests/UnitVisibility.test.js (2 tests) 198ms
 Á¨®„Éªsrc/tests/SafeSpawn.test.js (1 test) 181ms
stdout | src/tests/GhostHouse.test.js > Terrain Ghost House Test > should NOT accumulate ghost buildings (cleared during deserialize)
[Terrain] addBuilding: house at 5,5. Force:false
[Terrain] Building Added: house at (5, 5) Size:2x2. Total: 1
Debug: Buildings Count: 1

stdout | src/tests/GhostHouse.test.js > Terrain Ghost House Test > should NOT accumulate ghost buildings (cleared during deserialize)
[Terrain] Deserializing Legacy Format...

stdout | src/tests/GhostHouse.test.js > Terrain Ghost House Test > should NOT accumulate ghost buildings (cleared during deserialize)
[Terrain] addBuilding: house at 5,5. Force:true
[Terrain] Building Added: house at (5, 5) Size:2x2. Total: 1

stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should set very long moveDuration for Unit on Rock
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stderr | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should set very long moveDuration for Unit on Rock
DEBUG: MoveDur=4.8
DEBUG: Heights Cur=10 Next=12

 Á¨®„Éªsrc/tests/GhostHouse.test.js (1 test) 249ms
stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should set normal moveDuration on Flat
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10

stdout | src/tests/Pathfinding.test.js > Terrain Pathfinding Costs > Prefers a longer flat route over a shorter mountain route
Path Length: 31
Goes through gap: true
Goes through mountain: false

stderr | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should set normal moveDuration on Flat
DEBUG: Normal MoveDur=0.8

stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should prevent Unit from moving/building on Rock checks?
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10

 Á¨®„Éªsrc/tests/Pathfinding.test.js (1 test) 127ms
stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should increase Goblin Hut population and spawn goblin
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10

stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should increase Goblin Hut population and spawn goblin
GoblinManager: Generation started...
GoblinManager: Cave registered at 50,50 
[GoblinManager] Clan clan_cave_50_50 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin
Goblin born from Hut! Clan: test. Global Pop: 1

 Á¨®„Éªsrc/tests/Movement.test.js (4 tests) 55ms
stdout | src/tests/StartupCrash.test.js > Startup Crash Verification > UnitRenderer update should not crash with active units
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10

 Á¨®„Éªsrc/tests/StartupCrash.test.js (3 tests) 93ms
stdout | src/tests/StuckDebug.test.js > Unit Stuck Debugging > should log reason for blockage
[UnitCore.js] Unit Created ID:0 Role:undefined Pos:undefined,undefined Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:20,20
--- Testing Slope Block ---
[Unit 0] Blocked by Slope at 11,10 H:2->6
--- Testing Building Pass ---
--- Testing Water Block ---
[Unit 0] Blocked by Water at 30,30 H:0

 Á¨®„Éªsrc/tests/StuckDebug.test.js (1 test) 179ms
stdout | src/tests/GoblinTypes.test.js > Goblin Types & Stats > should correctly spawn types based on random probability
GoblinManager: Generation started...
GoblinManager: Cave registered at 50,50 
[GoblinManager] Clan clan_cave_50_50 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin
ÓÅûËçò Goblin King Spawned!

 Á¨®„Éªsrc/tests/GoblinTypes.test.js (4 tests) 45ms
stdout | src/tests/Lighting.test.js > BuildingRenderer Lighting > should turn on barracks lights at night
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

 Á¨®„Éªsrc/tests/Lighting.test.js (1 test) 40ms
stdout | src/tests/GoblinSpawn.test.js > Goblin Hut Spawning > should spawn goblin when hut population reaches 10
GoblinManager: Generation started...
GoblinManager: Cave registered at 75,88 
[GoblinManager] Clan clan_cave_75_88 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 26,50 
[GoblinManager] Clan clan_cave_26_50 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 40,83 
[GoblinManager] Clan clan_cave_40_83 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 59,34 
[GoblinManager] Clan clan_cave_59_34 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 76,91 
[GoblinManager] Clan clan_cave_76_91 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin

stdout | src/tests/GoblinSpawn.test.js > Goblin Hut Spawning > should spawn goblin when hut population reaches 10
Goblin born from Hut! Clan: clan_hut_10_10. Global Pop: 0

stdout | src/tests/GoblinSpawn.test.js > Goblin Hut Spawning > should NOT spawn if Global Cap is reached
GoblinManager: Generation started...
GoblinManager: Cave registered at 62,7 
[GoblinManager] Clan clan_cave_62_7 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 39,0 
[GoblinManager] Clan clan_cave_39_0 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 56,58 
[GoblinManager] Clan clan_cave_56_58 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 14,50 
[GoblinManager] Clan clan_cave_14_50 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 62,96 
[GoblinManager] Clan clan_cave_62_96 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin

 Á¨®„Éªsrc/tests/GoblinSpawn.test.js (2 tests) 38ms
stdout | src/tests/JobPathFailure.test.js > Job Pathfinding Failure Handling > should abandon job if smartMove fails repeatedly
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 106,19. Force:false
[Terrain] Building Added: cave at (106, 19) Size:1x1. Total: 1
GoblinManager: Cave registered at 106,19 
[GoblinManager] Clan clan_cave_106_19 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 97,71. Force:false
[Terrain] Building Added: cave at (97, 71) Size:1x1. Total: 2
GoblinManager: Cave registered at 97,71 
[GoblinManager] Clan clan_cave_97_71 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 93,102. Force:false
[Terrain] Building Added: cave at (93, 102) Size:1x1. Total: 3
GoblinManager: Cave registered at 93,102 
[GoblinManager] Clan clan_cave_93_102 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 143,85. Force:false
[Terrain] Building Added: cave at (143, 85) Size:1x1. Total: 4
GoblinManager: Cave registered at 143,85 
[GoblinManager] Clan clan_cave_143_85 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 141,47. Force:false
[Terrain] Building Added: cave at (141, 47) Size:1x1. Total: 5
GoblinManager: Cave registered at 141,47 
[GoblinManager] Clan clan_cave_141_47 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 13 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/JobPathFailure.test.js > Job Pathfinding Failure Handling > should abandon job if smartMove fails repeatedly
[Game] forceAssignRequest FAILED for Req 101. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[UnitWanderState] Update. ID:1 Action:Idle Target:Yes
[UnitWanderState] Update. ID:1 Action:Idle Target:No
[UnitWanderState] Check Migration. ID:1 Action:Idle Target:false 
[UnitWanderState] Update. ID:1 Action:Idle Target:No
[UnitWanderState] Check Migration. ID:1 Action:Idle Target:false 
[UnitWanderState] Update. ID:1 Action:Idle Target:No
[UnitWanderState] Check Migration. ID:1 Action:Idle Target:false 
[UnitWanderState] Update. ID:1 Action:Idle Target:No
[UnitWanderState] Check Migration. ID:1 Action:Idle Target:false 
[UnitWanderState] Update. ID:1 Action:Idle Target:No
[UnitWanderState] Check Migration. ID:1 Action:Idle Target:false 
Success: Job released after repeated failures.

 Á¨®„Éªsrc/tests/JobPathFailure.test.js (1 test) 7660ms
     Á¨®„Éªshould abandon job if smartMove fails repeatedly  7658ms
stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins deal population damage to player buildings
Goblin 0 attacking house. Pop: 9.00

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should immediately stop unit when job is cancelled mid-approach
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 117,76. Force:false
[Terrain] Building Added: cave at (117, 76) Size:1x1. Total: 1
GoblinManager: Cave registered at 117,76 
[GoblinManager] Clan clan_cave_117_76 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 142,75. Force:false
[Terrain] Building Added: cave at (142, 75) Size:1x1. Total: 2
GoblinManager: Cave registered at 142,75 
[GoblinManager] Clan clan_cave_142_75 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 3,136. Force:false
[Terrain] Building Added: cave at (3, 136) Size:1x1. Total: 3
GoblinManager: Cave registered at 3,136 
[GoblinManager] Clan clan_cave_3_136 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 155,118. Force:false
[Terrain] Building Added: cave at (155, 118) Size:1x1. Total: 4
GoblinManager: Cave registered at 155,118 
[GoblinManager] Clan clan_cave_155_118 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 137,19. Force:false
[Terrain] Building Added: cave at (137, 19) Size:1x1. Total: 5
GoblinManager: Cave registered at 137,19 
[GoblinManager] Clan clan_cave_137_19 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 10 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should immediately stop unit when job is cancelled mid-approach
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Cancelling active job for Unit 1
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
DEBUG: TargetRequest: [1mnull[22m
DEBUG: Queue Length: [33m0[39m

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins deal structural damage to empty player buildings
Goblin 1 hitting Empty house. HP: 40

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins destroy player buildings when HP reaches 0
Goblin 2 hitting Empty house. HP: 0
Goblin 2 destroyed house!

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Buildings retaliate against melee goblins
Goblin 3 attacking house. Pop: 9.92

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Towers have massive retaliation
Goblin 4 attacking tower. Pop: 4.92

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > No retaliation for distant attackers (Shamans)
Goblin 5 attacking house. Pop: 9.20

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Standard HP logic for Goblin buildings
[UnitCore.js] Unit Created ID:0 Role:knight Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:20,20

 Á¨®„Éªsrc/tests/BuildingDefense.test.js (8 tests) 95ms
stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
[DEBUG] Calling updateLogic...
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=false, Stag=0.0, Age=20.0, H=10, Action=undefined
[Unit Heartbeat] ID:0 Action:undefined Moving:false T:1000.0 dt:0.1000 Int:0
[Unit 0] Moving onto Rock at 1,0 H:10 (Speed Penalty)
[Unit Debug] Executing Logic. Role: knight
[DEBUG] updateLogic finished.
[DEBUG] Targets: G=g1, B=undefined

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are very close (Siege Mode)
[UnitCore.js] Unit Created ID:1 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are very close (Siege Mode)
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0
[Unit 2] Moving onto Rock at 1,0 H:10 (Speed Penalty)

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should NOT auto-target distant Huts (Workers are passive)
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should NOT auto-target distant Huts (Workers are passive)
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should auto-target CLOSE Huts for self-defense (Workers)
[UnitCore.js] Unit Created ID:5 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:5 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should auto-target CLOSE Huts for self-defense (Workers)
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0

 Á¨®„Éªsrc/tests/TargetingPriority.test.js (4 tests) 27ms
 Á¨®„Éªsrc/tests/Terrain.test.js (9 tests) 9539ms
       Á¨®„Éªshould correctly sum housing population excluding farms  1316ms
       Á¨®„Éªshould handle massive population overflow loop correctly  1421ms
       Á¨®„Éªshould grow crops using simDeltaTime (Not raw deltaTime)  1441ms
       Á¨®„Éªshould preserve overflow when harvesting  920ms
       Á¨®„Éªshould scale farm yield based on moisture  830ms
       Á¨®„Éªshould reduce food consumption at night  804ms
       Á¨®„Éªshould consume normal amount during day  747ms
         Á¨®„Éªshould return different colors for seasons  793ms
         Á¨®„Éªshould keep rock color even if dry (desert override check)  1263ms
stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should damage building population
Goblin 0 attacking house. Pop: 9.92

stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should destroy building when Population AND HP are depleted
Goblin 1 attacking house. Pop: 0.00
Goblin 1 hitting Empty house. HP: -5
Goblin 1 destroyed house!

stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should destroy building even if fractional population remains (e.g. 0.5)
Goblin 2 attacking house. Pop: 0.00
Goblin 2 hitting Empty house. HP: -5
Goblin 2 destroyed house!

stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should NOT destroy building if population remains >= 1.0
Goblin 3 attacking house. Pop: 6.92

stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should take retaliation damage
Goblin 4 attacking house. Pop: 19.92

 Á¨®„Éªsrc/tests/GoblinDestruction.test.js (5 tests) 32ms
stdout | src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario A: Worker destroys Cave
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
Approach Point: 11,10
Cave HP: 196 (Was: 200)

stdout | src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario B: Goblin destroys House
Goblin 0 SPAWNED FOR RAIDING! Target: NaN,NaN
[Goblin 0] ENTER RaidState. Goal: NaN,NaN
[MockTerrain] Searching 1 buildings. Range:25 Center:20,20
  - Checking Building at 22,20. Dist:2
    -> Score: 2
Goblin 0 attacking house. Pop: 1.92
Goblin 0 attacking house. Pop: 1.84
House Pop: 1.8399999999999999

stdout | src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario C: Goblin finds and destroys House
[MockTerrain] Searching 1 buildings. Range:12 Center:8,8
  - Checking Building at 10,10. Dist:2.8284271247461903
    -> Score: 2.8284271247461903
Goblin 1 hitting Empty house. HP: 92
Goblin 1 hitting Empty house. HP: 84
[Test] House HP reduced to 84

 Á¨®„Éªsrc/tests/CombatVerification.test.js (3 tests) 34ms
stdout | src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should NOT snap back when arriving at a job during mid-move
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should NOT snap back when arriving at a job during mid-move
[JobState] smartMove failed(Wait).Budget ? undefined 
[JobState] Entered.Target: build.Resume: None 

stdout | src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should use visual position for chaining the next job
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10

stderr | src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should use visual position for chaining the next job
[JobState] Chaining Check. Game:Y Next:2
[RubberBanding Test] Unit Pos: 20,10. TargetReq: 2. ClaimCalls: 1

 Á¨®„Éªsrc/tests/RubberBanding.test.js (2 tests) 24ms
stdout | src/tests/UnitMigration.test.js > Unit Migration Logic > should return true on successful build
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50

stdout | src/tests/UnitMigration.test.js > Unit Migration Logic > should increment stagnation on failed build
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50

stdout | src/tests/UnitMigration.test.js > Unit Migration Logic > should migrate after 20 seconds of stagnation
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50

stdout | src/tests/UnitMigration.test.js > Unit Migration Logic > should migrate after 20 seconds of stagnation
Unit 1 migrating to 51,51 (Region 1)

 Á¨®„Éªsrc/tests/UnitMigration.test.js (3 tests) 22ms
stdout | src/tests/SquadAi.test.js > Squad AI & Region Logic > should share targets among squad members
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10
[UnitCore.js] Unit Created ID:1 Role:knight Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:1 Role:knight Pos:20,20

stdout | src/tests/SquadAi.test.js > Squad AI & Region Logic > Regression: Migration Stagnation Fix (Knight)
[UnitCore.js] Unit Created ID:2 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:knight Pos:10,10
Unit 2 (knight) finished migrating. Resuming Idle.

stdout | src/tests/SquadAi.test.js > Squad AI & Region Logic > Regression: Migration Stagnation Fix (Worker)
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10
Unit 3 (Worker) migration target invalid for build. Searching nearby...

stdout | src/tests/SquadAi.test.js > Squad AI & Region Logic > should allow cross-region movement if target is very close (Self Defense)
[UnitCore.js] Unit Created ID:4 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:4 Role:knight Pos:10,10

 Á¨®„Éªsrc/tests/SquadAi.test.js (5 tests) 25ms
stdout | src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn diverse roles (Worker/Hunter/Fisher) from a House
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:0 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:2 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:4 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:4 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:5 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:5 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:6 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:7 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:8 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:8 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:9 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:9 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:10 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:10 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:11 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:11 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:12 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:12 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:13 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:13 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:14 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:14 Role:hunter Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:15 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:15 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:16 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:16 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:17 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:17 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:18 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:18 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:19 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:19 Role:fisher Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:20 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:20 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:21 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:21 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:22 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:22 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:23 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:23 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:24 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:24 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:25 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:25 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:26 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:26 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:27 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:27 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:28 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:28 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:29 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:29 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:30 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:30 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:31 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:31 Role:hunter Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:32 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:32 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:33 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:33 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:34 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:34 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:35 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:35 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:36 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:36 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:37 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:37 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:38 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:38 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:39 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:39 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:40 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:40 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:41 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:41 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:42 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:42 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:43 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:43 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:44 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:44 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:45 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:45 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:46 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:46 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:47 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:47 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:48 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:48 Role:hunter Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:49 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:49 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:50 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:50 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:51 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:51 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:52 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:52 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:53 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:53 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:54 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:54 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:55 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:55 Role:hunter Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:56 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:56 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:57 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:57 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:58 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:58 Role:fisher Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:59 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:59 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:60 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:60 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:61 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:61 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:62 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:62 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:63 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:63 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:64 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:64 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:65 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:65 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:66 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:66 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:67 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:67 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:68 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:68 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:69 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:69 Role:fisher Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:70 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:70 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:71 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:71 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:72 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:72 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:73 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:73 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:74 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:74 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:75 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:75 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:76 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:76 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:77 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:77 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:78 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:78 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:79 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:79 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:80 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:80 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:81 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:81 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:82 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:82 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:83 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:83 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:84 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:84 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:85 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:85 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:86 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:86 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:87 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:87 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:88 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:88 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:89 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:89 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:90 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:90 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:91 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:91 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:92 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:92 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:93 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:93 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:94 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:94 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:95 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:95 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:96 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:96 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:97 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:97 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:98 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:98 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:99 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:99 Role:hunter Pos:10,10
Spawn Distribution (100 runs): { worker: [33m55[39m, hunter: [33m23[39m, fisher: [33m22[39m }

stdout | src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn Knights from Barracks
Spawned knight linked to barracks at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:100 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:100 Role:knight Pos:10,10

stdout | src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn Wizards from Towers
Spawned wizard linked to tower at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:101 Role:wizard Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:101 Role:wizard Pos:10,10

 Á¨®„Éªsrc/tests/WorkerDiversity.test.js (3 tests) 24ms
stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit finds and claims request when idle
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit finds and claims request when idle
[UnitWanderState] Update. ID:worker_1 Action:Idle Target:No

stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit moves to target request
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit completes request upon arrival
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0

stderr | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit completes request upon arrival
[JobState] Chaining Check. Game:Y Next:null

 Á¨®„Éªsrc/tests/WorkerRequest.test.js (3 tests) 26ms
stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should initialize with age 20
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should increment age when updateLogic is called
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should die when age exceeds lifespan
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should age slower for Knights and Wizards (0.02 rate)
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should age slower for Knights and Wizards (0.02 rate)
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,0
[UnitCore.js] Unit Created ID:5 Role:wizard Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:5 Role:wizard Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should have longer lifespan for Special units
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should have longer lifespan for Special units
[UnitCore.js] Unit Created ID:7 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:0,0

 Á¨®„Éªsrc/tests/UnitLifecycle.test.js (5 tests) 26ms
stdout | src/tests/CavePersistence.test.js > GoblinManager Cave Persistence > should update cave Y position when terrain height changes
[GoblinRenderer] Updating 0 goblins.

stdout | src/tests/CavePersistence.test.js > GoblinManager Cave Persistence > should destroy cave if submerged (height <= 0)
[GoblinManager] Cave destroyed: SUBMERGED(H = -1)
[GoblinRenderer] Updating 0 goblins.

stderr | src/tests/CavePersistence.test.js > GoblinManager Cave Persistence > should destroy cave if submerged (height <= 0)
[GoblinManager] Removing invalid cave at 10,10

 Á¨®„Éªsrc/tests/CavePersistence.test.js (2 tests) 14ms
stdout | src/tests/ManaSystem.test.js > Mana System > InputManager Integration > should consume mana on raise terrain
[Input] Request Queued: Raise at 0,0

stderr | src/tests/ManaSystem.test.js > Mana System > InputManager Integration > should consume mana on raise terrain
THREE.Raycaster: Unsupported camera type: undefined
THREE.Raycaster: Unsupported camera type: undefined

stderr | src/tests/ManaSystem.test.js > Mana System > InputManager Integration > should block raise terrain if mana is negative
THREE.Raycaster: Unsupported camera type: undefined
Action Blocked: Not enough Mana (Negative)

 Á¨®„Éªsrc/tests/ManaSystem.test.js (5 tests) 28ms
stdout | src/tests/UnitSnatch.test.js > Unit Snatching and Race Conditions > should stop and wander if another unit snatches its job
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Unit 0] Moving onto Rock at 11,10 H:10 (Speed Penalty)
[JobState] smartMove failed(Wait).Budget ? undefined 
[JobState] Entered.Target: build.Resume: None 
[Unit.js] ENTERED updateLogic. Dead=false
[JobState] Ownership LOST for Job job1.Someone snatched it or it was unassigned.Switching to Wander.

stdout | src/tests/UnitSnatch.test.js > Unit Snatching and Race Conditions > should stop if the job is completed by someone else
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Unit 0] Moving onto Rock at 11,10 H:10 (Speed Penalty)
[JobState] smartMove failed(Wait).Budget ? undefined 
[JobState] Entered.Target: build.Resume: None 
[Unit.js] ENTERED updateLogic. Dead=false
[JobState] Job job1 is completed.Resuming.

 Á¨®„Éªsrc/tests/UnitSnatch.test.js (2 tests) 21ms
stdout | src/tests/ReproductionJitabata.test.js > Jitabata Bug Reproduction (Interrupt Loop) > should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10

stdout | src/tests/ReproductionJitabata.test.js > Jitabata Bug Reproduction (Interrupt Loop) > should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration
[Unit.js] ENTERED updateLogic. Dead=false
[UnitWanderState] Update. ID:0 Action:Migrating Target:No
[Test] Frame 1 Post-logic isMoving: true, action: Reinforcing
[Unit.js] ENTERED updateLogic. Dead=false
[Test] Frame 2 Post-logic isMoving: true, action: Reinforcing

 Á¨®„Éªsrc/tests/ReproductionJitabata.test.js (1 test) 17ms
stdout | src/tests/ForceAssignment.test.js > Force Assignment Integration > should successfully triggerMove without infinite loop
Game constructor called
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/ForceAssignment.test.js > Force Assignment Integration > should handle Force Assignment logic block
Game constructor called
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10

 Á¨®„Éªsrc/tests/ForceAssignment.test.js (2 tests) 17ms
stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Patrol for Knight/Wizard when idle
[UnitCore.js] Unit Created ID:0 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Wander for Worker when idle
[UnitCore.js] Unit Created ID:1 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Combat when targetGoblin is set
[UnitCore.js] Unit Created ID:2 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Siege when targetBuilding is set
[UnitCore.js] Unit Created ID:3 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Working when targetRequest is set
[UnitCore.js] Unit Created ID:4 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Patrolling with coords when targetRaidPoint is set
[UnitCore.js] Unit Created ID:5 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:5 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Migrating when action is Migrating
[UnitCore.js] Unit Created ID:6 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should prioritize Combat over Exploration
[UnitCore.js] Unit Created ID:7 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:5,5

 Á¨®„Éªsrc/tests/UnitBehavior.test.js (8 tests) 22ms
stdout | src/tests/UnitAISearch.test.js > Unit AI Search Optimization > should use Spatial Search to find goblin
[UnitCore.js] Unit Created ID:0 Role:guard Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:guard Pos:0,0

 Á¨®„Éªsrc/tests/UnitAISearch.test.js (2 tests) 21ms
stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should pickup NEXT job if current is cancelled
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 65,12. Force:false
[Terrain] Building Added: cave at (65, 12) Size:1x1. Total: 1
GoblinManager: Cave registered at 65,12 
[GoblinManager] Clan clan_cave_65_12 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 70,102. Force:false
[Terrain] Building Added: cave at (70, 102) Size:1x1. Total: 2
GoblinManager: Cave registered at 70,102 
[GoblinManager] Clan clan_cave_70_102 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 3,73. Force:false
[Terrain] Building Added: cave at (3, 73) Size:1x1. Total: 3
GoblinManager: Cave registered at 3,73 
[GoblinManager] Clan clan_cave_3_73 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 38,80. Force:false
[Terrain] Building Added: cave at (38, 80) Size:1x1. Total: 4
GoblinManager: Cave registered at 38,80 
[GoblinManager] Clan clan_cave_38_80 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 33,75. Force:false
[Terrain] Building Added: cave at (33, 75) Size:1x1. Total: 5
GoblinManager: Cave registered at 33,75 
[GoblinManager] Clan clan_cave_33_75 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 12 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should pickup NEXT job if current is cancelled
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Request Added: build at (-20,0) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] Cancelling active job for Unit 1
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)

stdout | src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should move normally for short distances
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should wrap LEFT if target is across right boundary
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

stdout | src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should wrap RIGHT if target is across left boundary
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0

stdout | src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should handle Z axis wrapping
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0

 Á¨®„Éªsrc/tests/UnitWrapping.test.js (4 tests) 20ms
stdout | src/tests/WanderBehavior.test.js > Wander Behavior Verification > UnitWanderState should trigger moveRandomly after interval
[UnitWanderState] Update. ID:1 Action:Idle Target:No
[UnitWanderState] Check Migration. ID:1 Action:Idle Target:false 
[UnitWanderState] Update. ID:1 Action:Idle Target:No
[UnitWanderState] Check Migration. ID:1 Action:Idle Target:false 

 Á¨®„Éªsrc/tests/WanderBehavior.test.js (2 tests) 15ms
stderr | src/tests/CombatFixes.test.js > Combat and Logic Fixes > should find target goblin
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0
DEBUG: Heights: 10 10
DEBUG: Distance: 10
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=false, Stag=0.0, Age=20.0, H=10, Action=undefined
[Unit Heartbeat] ID:0 Action:undefined Moving:false T:1100.0 dt:0.1000 Int:5000
[Unit 0] Moving onto Rock at 1,0 H:10 (Speed Penalty)
[Unit Debug] Executing Logic. Role: knight
DEBUG: Target Found: g1
DEBUG: Action: Chasing

 Á¨®„Éªsrc/tests/CombatFixes.test.js (1 test) 22ms
 Á¨®„Éªsrc/tests/GoblinStats.test.js (2 tests) 17ms
stdout | src/tests/AdvancedUnits.test.js > Advanced Units > should initialize Knight with high stats
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10

stdout | src/tests/AdvancedUnits.test.js > Advanced Units > should initialize Wizard with low HP and high stats
[UnitCore.js] Unit Created ID:1 Role:wizard Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:wizard Pos:10,10

stdout | src/tests/AdvancedUnits.test.js > Advanced Units > should allow Wizard to attack from range
[UnitCore.js] Unit Created ID:2 Role:wizard Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:wizard Pos:10,10
[Unit Debug] ATTACKING Goblin g1

 Á¨®„Éªsrc/tests/AdvancedUnits.test.js (3 tests) 22ms
stdout | src/tests/UnitInit.test.js > Unit Initialization and Movement Start > should NOT freeze if started at time 0
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=false, Stag=0.0, Age=20.0, H=1, Action=undefined
[Unit Heartbeat] ID:0 Action:undefined Moving:false T:1.0 dt:1.0000 Int:4992
[Unit Debug] Executing Logic. Role: worker
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=false, Stag=1.0, Age=20.2, H=1, Action=Idle
[Unit Heartbeat] ID:0 Action:Idle Moving:false T:6.0 dt:1.0000 Int:3440
[Unit Debug] Executing Logic. Role: worker
Debug Unit Action after 6s: Idle

stdout | src/tests/UnitInit.test.js > Unit Initialization and Movement Start > should NOT freeze if started at time 0
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=false, Stag=2.0, Age=20.4, H=1, Action=Idle
[Unit Heartbeat] ID:0 Action:Idle Moving:false T:0.0 dt:0.1000 Int:2420
[Unit Debug] Executing Logic. Role: worker
[Unit.js] ENTERED updateLogic. Dead=false
[Unit Debug V2] Start Logic. Night=false, Stag=2.1, Age=20.4, H=1, Action=Idle
[Unit Heartbeat] ID:0 Action:Idle Moving:false T:5.0 dt:0.1000 Int:2795
[Unit Debug] Executing Logic. Role: worker

 Á¨®„Éªsrc/tests/UnitInit.test.js (1 test) 16ms
stdout | src/tests/ShorelineLoop.test.js > Shoreline Loop Reproduction > should NOT target unrelated region goblin via findTargetGoblin
[UnitCore.js] Unit Created ID:0 Role:soldier Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:0 Role:soldier Pos:5,5

stdout | src/tests/ShorelineLoop.test.js > Shoreline Loop Reproduction > should NOT target land goblin when unit is in water (Region 0)
[UnitCore.js] Unit Created ID:1 Role:soldier Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:1 Role:soldier Pos:5,5

 Á¨®„Éªsrc/tests/ShorelineLoop.test.js (2 tests) 11ms
stdout | src/tests/WrapDistance.test.js > Unit Distance Wrap Logic > should calculate short distance across wrap (0,0 -> 79,0)
[UnitCore.js] Unit Created ID:0 Role:undefined Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/WrapDistance.test.js > Unit Distance Wrap Logic > should calculate diagonal wrap correctly (0,0 -> 79,79)
[UnitCore.js] Unit Created ID:1 Role:undefined Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

 Á¨®„Éªsrc/tests/WrapDistance.test.js (2 tests) 14ms
 Á¨®„Éªsrc/tests/JobAssignment.test.js (3 tests) 12ms
 Á¨®„Éªsrc/tests/SquadMemory.test.js (2 tests) 5ms
 Á¨®„Éªsrc/tests/MovementReset.test.js (2 tests) 10ms
 Á¨®„Éªsrc/tests/Minimal.test.js (1 test) 3ms
stdout | src/tests/MinimalUnit.test.js > Minimal Unit Sanity > can instantiate Unit
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0

 Á¨®„Éªsrc/tests/MinimalUnit.test.js (1 test) 5ms
stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived)
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 69,60. Force:false
[Terrain] Building Added: cave at (69, 60) Size:1x1. Total: 1
GoblinManager: Cave registered at 69,60 
[GoblinManager] Clan clan_cave_69_60 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 132,57. Force:false
[Terrain] Building Added: cave at (132, 57) Size:1x1. Total: 2
GoblinManager: Cave registered at 132,57 
[GoblinManager] Clan clan_cave_132_57 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 129,64. Force:false
[Terrain] Building Added: cave at (129, 64) Size:1x1. Total: 3
GoblinManager: Cave registered at 129,64 
[GoblinManager] Clan clan_cave_129_64 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 26,112. Force:false
[Terrain] Building Added: cave at (26, 112) Size:1x1. Total: 4
GoblinManager: Cave registered at 26,112 
[GoblinManager] Clan clan_cave_26_112 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 47,139. Force:false
[Terrain] Building Added: cave at (47, 139) Size:1x1. Total: 5
GoblinManager: Cave registered at 47,139 
[GoblinManager] Clan clan_cave_47_139 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 14 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stderr | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived)
[JobState] Chaining Check. Game:Y Next:null

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived)
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)

 Á¨®„Éªsrc/tests/ComplexInteraction.test.js (3 tests) 15883ms
     Á¨®„Éªshould immediately stop unit when job is cancelled mid-approach  8047ms
     Á¨®„Éªshould pickup NEXT job if current is cancelled  4840ms
     Á¨®„Éªshould handle cancellation while Working (arrived)  2994ms

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Failed Tests 7 Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ

 FAIL  src/tests/CombatBalance.test.js > Combat Balance Simulation > Load Game Persistence - Should resume movement
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Á¨∂ÔΩØ src/tests/CombatBalance.test.js:269:29
    267|         // Verify Restoration
    268|         // Verify Restoration
    269|         expect(u2.isMoving).toBe(true); // Should resume movement
       |                             ^
    270|         // Note: triggerMove calculates NEXT TILE, not final destinatiÁ™∂ÔΩ¶
    271|         // From 0,0 to 10,10. dx=10, dz=10. 10 > 10 is false. Z incremÁ™∂ÔΩ¶

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ[1/7]Á´°ÔΩØ

 FAIL  src/tests/CombatRequestHandoff.test.js > Request Responsiveness & Combat Handoff > Worker releases job when died
Error: [Test Fail] ReleaseRequest NOT called. HP:0 Dead:true Req:req_1
 Á¨∂ÔΩØ src/tests/CombatRequestHandoff.test.js:115:19
    113| 
    114|         if (game.releaseRequest.mock.calls.length === 0) {
    115|             throw new Error(`[Test Fail] ReleaseRequest NOT called. HPÁ™∂ÔΩ¶
       |                   ^
    116|         }
    117|         process.stdout.write(`[Test] ReleaseRequest Calls: ${game.releÁ™∂ÔΩ¶

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ[2/7]Á´°ÔΩØ

 FAIL  src/tests/JobIdempotency.test.js > Job Assignment Idempotency > should NOT reset movement if claiming the same job twice
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ new Game src/Game.js:237:14
 Á¨∂ÔΩØ src/tests/JobIdempotency.test.js:162:20

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ[3/7]Á´°ÔΩØ

 FAIL  src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should allow Migration Logic to control repeated movement
AssertionError: expected 'Idle' to be 'Migrating' // Object.is equality

Expected: "Migrating"
Received: "Idle"

 Á¨∂ÔΩØ src/tests/MigrationConflict.test.js:116:33
    114|                 console.log(`[Test Fail] Action changed to ${unit.actiÁ™∂ÔΩ¶
    115|             }
    116|             expect(unit.action).toBe('Migrating');
       |                                 ^
    117| 
    118|             // Should NOT be Random Point (which mock returns as 30,30Á™∂ÔΩ¶

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ[4/7]Á´°ÔΩØ

 FAIL  src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority)
AssertionError: expected 'Idle' to be 'Fighting' // Object.is equality

Expected: "Fighting"
Received: "Idle"

 Á¨∂ÔΩØ src/tests/MigrationImprovement.test.js:138:29
    136|         unit.updateLogic(1, 1.0, false, [], [], []);
    137| 
    138|         expect(unit.action).toBe('Fighting');
       |                             ^
    139|         expect(unit.migrationTarget).toBeNull();
    140| 

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ[5/7]Á´°ÔΩØ

 FAIL  src/tests/NightLogic.test.js > Night Logic - Shelter Entry > Worker should engage pathfinding to House but is likely blocked
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Á¨∂ÔΩØ src/tests/NightLogic.test.js:92:31
     90|         u1.updateLogic(time + 2000, 100, isNight, [], [], [], []);
     91| 
     92|         expect(u1.isSleeping).toBe(true);
       |                               ^
     93|     });
     94| });

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ[6/7]Á´°ÔΩØ

 FAIL  src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should FAIL buildFarm and IMPROVE LAND if moisture is poor (simulated)
AssertionError: expected "addBuilding" to not be called at all, but actually been called 1 times

Received: 

  1st addBuilding call:

    Array [
      "house",
      5,
      5,
    ]


Number of calls: 1

 Á¨∂ÔΩØ src/tests/Unit.test.js:202:53
    200|                 // But NO structure should be built.
    201|                 expect(structureResult).toBe(true);
    202|                 expect(mockTerrain.addBuilding).not.toHaveBeenCalled();
       |                                                     ^
    203|                 // improveLand is separate, not called by tryBuildStruÁ™∂ÔΩ¶
    204|             } catch (error) {

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ[7/7]Á´°ÔΩØ

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Unhandled Errors Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ

Vitest caught 25 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Unhandled Rejection Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
Error: [vitest-worker]: Closing rpc while "onUnhandledError" was pending
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:79:28
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/index.0kCJoeWi.js:133:14
 Á¨∂ÔΩØ Proxy.$rejectPendingCalls node_modules/vitest/dist/chunks/index.0kCJoeWi.js:129:36
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:78:26
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:107:42
 Á¨∂ÔΩØ execute node_modules/vitest/dist/chunks/init.B04saIIg.js:107:30
 Á¨∂ÔΩØ processTicksAndRejections node:internal/process/task_queues:105:5
 Á¨∂ÔΩØ process.onMessage node_modules/vitest/dist/chunks/init.B04saIIg.js:233:14

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Unhandled Rejection Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
Error: [vitest-worker]: Closing rpc while "onUnhandledError" was pending
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:79:28
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/index.0kCJoeWi.js:133:14
 Á¨∂ÔΩØ Proxy.$rejectPendingCalls node_modules/vitest/dist/chunks/index.0kCJoeWi.js:129:36
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:78:26
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:107:42
 Á¨∂ÔΩØ execute node_modules/vitest/dist/chunks/init.B04saIIg.js:107:30
 Á¨∂ÔΩØ processTicksAndRejections node:internal/process/task_queues:105:5
 Á¨∂ÔΩØ process.onMessage node_modules/vitest/dist/chunks/init.B04saIIg.js:233:14

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Unhandled Rejection Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
Error: [vitest-worker]: Closing rpc while "onUnhandledError" was pending
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:79:28
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/index.0kCJoeWi.js:133:14
 Á¨∂ÔΩØ Proxy.$rejectPendingCalls node_modules/vitest/dist/chunks/index.0kCJoeWi.js:129:36
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:78:26
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:107:42
 Á¨∂ÔΩØ execute node_modules/vitest/dist/chunks/init.B04saIIg.js:107:30
 Á¨∂ÔΩØ processTicksAndRejections node:internal/process/task_queues:105:5
 Á¨∂ÔΩØ process.onMessage node_modules/vitest/dist/chunks/init.B04saIIg.js:233:14

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Unhandled Rejection Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
Error: [vitest-worker]: Closing rpc while "onUnhandledError" was pending
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:79:28
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/index.0kCJoeWi.js:133:14
 Á¨∂ÔΩØ Proxy.$rejectPendingCalls node_modules/vitest/dist/chunks/index.0kCJoeWi.js:129:36
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:78:26
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:107:42
 Á¨∂ÔΩØ execute node_modules/vitest/dist/chunks/init.B04saIIg.js:107:30
 Á¨∂ÔΩØ processTicksAndRejections node:internal/process/task_queues:105:5
 Á¨∂ÔΩØ process.onMessage node_modules/vitest/dist/chunks/init.B04saIIg.js:233:14

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Unhandled Rejection Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
Error: [vitest-worker]: Closing rpc while "onUnhandledError" was pending
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:79:28
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/index.0kCJoeWi.js:133:14
 Á¨∂ÔΩØ Proxy.$rejectPendingCalls node_modules/vitest/dist/chunks/index.0kCJoeWi.js:129:36
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:78:26
 Á¨∂ÔΩØ node_modules/vitest/dist/chunks/init.B04saIIg.js:107:42
 Á¨∂ÔΩØ execute node_modules/vitest/dist/chunks/init.B04saIIg.js:107:30
 Á¨∂ÔΩØ processTicksAndRejections node:internal/process/task_queues:105:5
 Á¨∂ÔΩØ process.onMessage node_modules/vitest/dist/chunks/init.B04saIIg.js:233:14

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ Uncaught Exception Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ
TypeError: this.buildingRenderer.updateLighting is not a function
 Á¨∂ÔΩØ Game.animate src/Game.js:1474:35
    1472| 
    1473|         if (this.buildingRenderer) {
    1474|             this.buildingRenderer.updateLighting(isNight);
       |                                   ^
    1475|         }
    1476| 
 Á¨∂ÔΩØ Immediate.<anonymous> node_modules/happy-dom/lib/window/BrowserWindow.js:1354:17
 Á¨∂ÔΩØ processImmediate node:internal/timers:485:21

This error originated in "src/tests/JobIdempotency.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
Á´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØÁ´°ÔΩØ


 Test Files  7 failed | 54 passed (61)
      Tests  7 failed | 172 passed (179)
     Errors  25 errors
   Start at  20:22:10
   Duration  19.30s (transform 6.52s, setup 3.22s, import 16.31s, tests 67.99s, environment 110.28s)

