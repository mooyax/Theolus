
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/MultiJob.test.js[2m > [22m[2mMulti-Job Juggling Verification[2m > [22m[2mshould NOT interrupt busy units when a new job is added
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 98,54. Force:false
[Terrain] Building Added: cave at (98, 54) Size:1x1. Total: 1
GoblinManager: Cave registered at 98,54 
[GoblinManager] Clan clan_cave_98_54 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 2,62. Force:false
[Terrain] Building Added: cave at (2, 62) Size:1x1. Total: 2
GoblinManager: Cave registered at 2,62 
[GoblinManager] Clan clan_cave_2_62 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 112,60. Force:false
[Terrain] Building Added: cave at (112, 60) Size:1x1. Total: 3
GoblinManager: Cave registered at 112,60 
[GoblinManager] Clan clan_cave_112_60 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 4,133. Force:false
[Terrain] Building Added: cave at (4, 133) Size:1x1. Total: 4
GoblinManager: Cave registered at 4,133 
[GoblinManager] Clan clan_cave_4_133 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 62,101. Force:false
[Terrain] Building Added: cave at (62, 101) Size:1x1. Total: 5
GoblinManager: Cave registered at 62,101 
[GoblinManager] Clan clan_cave_62_101 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 11 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/MultiJob.test.js[2m > [22m[2mMulti-Job Juggling Verification[2m > [22m[2mshould NOT interrupt busy units when a new job is added
[22m[39m[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:2
[Game] Force-Assigned Request 101 to Unit 1 (Score: 400.0)
[Game] forceAssignRequest FOUND Unit 2 (DistSq:400). Scanned:2
[Game] Force-Assigned Request 102 to Unit 2 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 2] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2

 [32mç¬¨ãƒ»[39m src/tests/MultiJob.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 2334[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should NOT interrupt busy units when a new job is added [33m 2332[2mms[22m[39m
[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould immediately stop unit when job is cancelled mid-approach
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 81,25. Force:false
[Terrain] Building Added: cave at (81, 25) Size:1x1. Total: 1
GoblinManager: Cave registered at 81,25 
[GoblinManager] Clan clan_cave_81_25 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 122,54. Force:false
[Terrain] Building Added: cave at (122, 54) Size:1x1. Total: 2
GoblinManager: Cave registered at 122,54 
[GoblinManager] Clan clan_cave_122_54 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 6,125. Force:false
[Terrain] Building Added: cave at (6, 125) Size:1x1. Total: 3
GoblinManager: Cave registered at 6,125 
[GoblinManager] Clan clan_cave_6_125 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 149,126. Force:false
[Terrain] Building Added: cave at (149, 126) Size:1x1. Total: 4
GoblinManager: Cave registered at 149,126 
[GoblinManager] Clan clan_cave_149_126 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 47,126. Force:false
[Terrain] Building Added: cave at (47, 126) Size:1x1. Total: 5
GoblinManager: Cave registered at 47,126 
[GoblinManager] Clan clan_cave_47_126 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 9 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould immediately stop unit when job is cancelled mid-approach
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Cancelling active job for Unit 1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
DEBUG: TargetRequest: [1mnull[22m
DEBUG: Queue Length: [33m0[39m

[90mstdout[2m | src/tests/JobIdempotency.test.js[2m > [22m[2mJob Assignment Idempotency[2m > [22m[2mshould NOT reset movement if claiming the same job twice
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 22,16. Force:false
[Terrain] Building Added: cave at (22, 16) Size:1x1. Total: 1
GoblinManager: Cave registered at 22,16 
[GoblinManager] Clan clan_cave_22_16 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 97,40. Force:false
[Terrain] Building Added: cave at (97, 40) Size:1x1. Total: 2
GoblinManager: Cave registered at 97,40 
[GoblinManager] Clan clan_cave_97_40 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 153,6. Force:false
[Terrain] Building Added: cave at (153, 6) Size:1x1. Total: 3
GoblinManager: Cave registered at 153,6 
[GoblinManager] Clan clan_cave_153_6 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 113,12. Force:false
[Terrain] Building Added: cave at (113, 12) Size:1x1. Total: 4
GoblinManager: Cave registered at 113,12 
[GoblinManager] Clan clan_cave_113_12 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 7,42. Force:false
[Terrain] Building Added: cave at (7, 42) Size:1x1. Total: 5
GoblinManager: Cave registered at 7,42 
[GoblinManager] Clan clan_cave_7_42 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 13 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

 [32mç¬¨ãƒ»[39m src/tests/JobIdempotency.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 3981[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should NOT reset movement if claiming the same job twice [33m 3978[2mms[22m[39m
[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould pickup NEXT job if current is cancelled
[22m[39m[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 79,4. Force:false
[Terrain] Building Added: cave at (79, 4) Size:1x1. Total: 1
GoblinManager: Cave registered at 79,4 
[GoblinManager] Clan clan_cave_79_4 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 96,43. Force:false
[Terrain] Building Added: cave at (96, 43) Size:1x1. Total: 2
GoblinManager: Cave registered at 96,43 
[GoblinManager] Clan clan_cave_96_43 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 99,121. Force:false
[Terrain] Building Added: cave at (99, 121) Size:1x1. Total: 3
GoblinManager: Cave registered at 99,121 
[GoblinManager] Clan clan_cave_99_121 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 79,11. Force:false
[Terrain] Building Added: cave at (79, 11) Size:1x1. Total: 4
GoblinManager: Cave registered at 79,11 
[GoblinManager] Clan clan_cave_79_11 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 155,11. Force:false
[Terrain] Building Added: cave at (155, 11) Size:1x1. Total: 5
GoblinManager: Cave registered at 155,11 
[GoblinManager] Clan clan_cave_155_11 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 6 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould pickup NEXT job if current is cancelled
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Request Added: build at (-20,0) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Cancelling active job for Unit 1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould handle cancellation while Working (arrived)
[22m[39m[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 106,73. Force:false
[Terrain] Building Added: cave at (106, 73) Size:1x1. Total: 1
GoblinManager: Cave registered at 106,73 
[GoblinManager] Clan clan_cave_106_73 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 126,24. Force:false
[Terrain] Building Added: cave at (126, 24) Size:1x1. Total: 2
GoblinManager: Cave registered at 126,24 
[GoblinManager] Clan clan_cave_126_24 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 110,107. Force:false
[Terrain] Building Added: cave at (110, 107) Size:1x1. Total: 3
GoblinManager: Cave registered at 110,107 
[GoblinManager] Clan clan_cave_110_107 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 43,118. Force:false
[Terrain] Building Added: cave at (43, 118) Size:1x1. Total: 4
GoblinManager: Cave registered at 43,118 
[GoblinManager] Clan clan_cave_43_118 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 10,34. Force:false
[Terrain] Building Added: cave at (10, 34) Size:1x1. Total: 5
GoblinManager: Cave registered at 10,34 
[GoblinManager] Clan clan_cave_10_34 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 18 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould handle cancellation while Working (arrived)
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None

 [32mç¬¨ãƒ»[39m src/tests/ComplexInteraction.test.js [2m([22m[2m3 tests[22m[2m)[22m[33m 9920[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should immediately stop unit when job is cancelled mid-approach [33m 3734[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should pickup NEXT job if current is cancelled [33m 3483[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should handle cancellation while Working (arrived) [33m 2701[2mms[22m[39m

[2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[32m5 passed[39m[22m[90m (5)[39m
[2m   Start at [22m 14:19:20
[2m   Duration [22m 11.95s[2m (transform 1.46s, setup 210ms, import 2.06s, tests 16.23s, environment 2.29s)[22m

