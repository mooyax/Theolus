
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/MigrationImprovement.test.js[2m > [22m[2mMigration Improvements[2m > [22m[2mshould retry migration after 30 seconds timeout
[22m[39mUnit test-migrant migrating to 42,78 (Walking)

[90mstdout[2m | src/tests/MigrationImprovement.test.js[2m > [22m[2mMigration Improvements[2m > [22m[2mshould interrupt migration if enemy is found (Priority)
[22m[39mUnit test-migrant migrating to 14,50 (Walking)

[90mstdout[2m | src/tests/MigrationImprovement.test.js[2m > [22m[2mMigration Improvements[2m > [22m[2mshould stop migrating if construction succeeds
[22m[39mUnit test-migrant migrating to 70,51 (Walking)
Unit test-migrant built structure during migration. Stopping.

 [31mç¬¶ï½¯[39m src/tests/MigrationImprovement.test.js [2m([22m[2m3 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 29[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should retry migration after 30 seconds timeout[39m[32m 14[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should interrupt migration if enemy is found (Priority)[39m[32m 13[2mms[22m[39m
     [32mç¬¨ãƒ»[39m should stop migrating if construction succeeds[32m 1[2mms[22m[39m

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Failed Tests 2 ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

 FAIL  src/tests/MigrationImprovement.test.js > Migration Improvements > should retry migration after 30 seconds timeout
AssertionError: expected 'Moving' to be 'Migrating' // Object.is equality

Expected: "Migrating"
Received: "Moving"

 ç¬¶ï½¯ src/tests/MigrationImprovement.test.js:89:29
     87|         // Simulate time passing < 30s
     88|         unit.updateLogic(10000, 10.0, false, [], [], []); // +10s
     89|         expect(unit.action).toBe('Migrating');
       |                             ^
     90|         expect(unit.migrationTarget).toBe(firstTarget);
     91| 

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[1/2]ç«¡ï½¯

 FAIL  src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority)
TypeError: this.terrain.modifyMoisture is not a function
 ç¬¶ï½¯ Unit.improveLand src/Unit.js:1488:22
    1486|         if (Math.abs(change) > Math.abs(diff)) change = diff;
    1487| 
    1488|         this.terrain.modifyMoisture(this.gridX, this.gridZ, change);
       |                      ^
    1489|         console.log(`Unit improved land at ${this.gridX},${this.gridZ}çª¶ï½¦
    1490| 
 ç¬¶ï½¯ Unit.updateLogic src/Unit.js:649:51
 ç¬¶ï½¯ src/tests/MigrationImprovement.test.js:120:14

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[2/2]ç«¡ï½¯


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m   Start at [22m 18:25:10
[2m   Duration [22m 413ms[2m (transform 96ms, setup 0ms, import 130ms, tests 29ms, environment 0ms)[22m

