
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/MigrationImprovement.test.js
[DEBUG] Actor.ts loaded

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Actor.ts loaded

stdout | src/tests/Terrain.test.js
[DEBUG] Building.ts loaded

stdout | src/tests/Terrain.test.js
[DEBUG] Terrain.ts top-level load

stdout | src/tests/ManualJobThrottle.test.ts
[DEBUG] Actor.ts loaded

stdout | src/tests/HumanSpawningSurvival.test.js
[DEBUG] Building.ts loaded

stdout | src/tests/HumanSpawningSurvival.test.js
[DEBUG] Terrain.ts top-level load

stdout | src/tests/GoblinHutFix.test.js
[DEBUG] Building.ts loaded

stdout | src/tests/GoblinHutFix.test.js
[DEBUG] Terrain.ts top-level load

stdout | src/tests/SpawnCost.test.js
[DEBUG] Building.ts loaded

stdout | src/tests/SpawnCost.test.js
[DEBUG] Terrain.ts top-level load

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should retry migration after 30 seconds timeout
[Entity 0] CONSTRUCTOR START: type=unit at 50,50
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50
[UnitCore.js] Unit Construction Finished ID:0

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should retry migration after 30 seconds timeout
[Actor test-migrant] Resetting Unreachable (Target changed or initializing)
[Actor test-migrant] Resetting Unreachable (Target changed or initializing)
[Actor test-migrant] Resetting Unreachable (Target changed or initializing)
[Actor test-migrant] Pathfinding SUCCESS: Got 1 nodes to 89.7214637914452,47.500937322733336
[Entity test-migrant] startMove -> isMoving:true. Target:89.7214637914452,47.500937322733336 StartTime:0.0000

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority)
[Entity 1] CONSTRUCTOR START: type=unit at 50,50
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50
[UnitCore.js] Unit Construction Finished ID:1

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority)
[Actor test-migrant] Resetting Unreachable (Target changed or initializing)
[Test Debug] Action after 1st update: Chasing
[Actor test-migrant] Resetting Unreachable (Target changed or initializing)
[Test Debug] Action after 2nd update: Chasing
[Actor test-migrant] Pathfinding SUCCESS: Got 1 nodes to 33.12386113906466,77.78128728746994
[Actor test-migrant] Resetting Unreachable (Target changed or initializing)
[Entity test-migrant] startMove -> isMoving:true. Target:33.12386113906466,77.78128728746994 StartTime:0.0000

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should stop migrating if construction succeeds
[Entity 2] CONSTRUCTOR START: type=unit at 50,50
[Entity 2] Calling registerEntity...
[Entity 2] registerEntity returned.
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50
[UnitCore.js] Unit Construction Finished ID:2

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should stop migrating if construction succeeds
[Actor test-migrant] Resetting Unreachable (Target changed or initializing)

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should stop migrating if construction succeeds
[Actor test-migrant] Pathfinding SUCCESS: Got 1 nodes to 70.81422444841216,57.24220695707921
[Entity test-migrant] startMove -> isMoving:true. Target:70.81422444841216,57.24220695707921 StartTime:0.0000

stdout | src/tests/ManualJobThrottle.test.ts > Manual Job Pathfinding Throttle > should bypass throttle for manual jobs even after first attempt
[Entity 0] CONSTRUCTOR START: type=unit at 10,10
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > DEBUG: should log blockage reasons correctly
[Entity 3] CONSTRUCTOR START: type=unit at 50,50
[Entity 3] Calling registerEntity...
[Entity 3] registerEntity returned.
[Entity 3] Calling updatePosition...
[Entity 3] updatePosition returned.
[DIAG] Actor Created ID: 3
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:3 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:50,50
[UnitCore.js] Unit Construction Finished ID:3

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Building.ts loaded

stdout | src/tests/ManualJobThrottle.test.ts > Manual Job Pathfinding Throttle > should bypass throttle for manual jobs even after first attempt
[Actor 1] Resetting Unreachable (Target changed or initializing)

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Terrain.ts top-level load

 ç¬¨ãƒ»src/tests/MigrationImprovement.test.js (4 tests) 23ms
stdout | src/tests/ManualJobThrottle.test.ts > Manual Job Pathfinding Throttle > should bypass throttle for manual jobs even after first attempt
[Actor 1] Pathfinding SUCCESS: Got 1 nodes to 20,20
[Entity 1] startMove -> isMoving:true. Target:11,11 StartTime:100.5000

stdout | src/tests/ManualJobThrottle.test.ts > Manual Job Pathfinding Throttle > should still throttle normal actions (e.g. Wander)
[Entity 1] CONSTRUCTOR START: type=unit at 10,10
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:1

stdout | src/tests/ManualJobThrottle.test.ts > Manual Job Pathfinding Throttle > should still throttle normal actions (e.g. Wander)
[Actor 1] Resetting Unreachable (Target changed or initializing)

stdout | src/tests/ManualJobThrottle.test.ts > Manual Job Pathfinding Throttle > should NOT update lastPathTime if global budget is exceeded
[Entity 2] CONSTRUCTOR START: type=unit at 10,10
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:2

stdout | src/tests/ManualJobThrottle.test.ts > Manual Job Pathfinding Throttle > should NOT update lastPathTime if global budget is exceeded
[Actor 1] Resetting Unreachable (Target changed or initializing)

 ç¬¨ãƒ»src/tests/ManualJobThrottle.test.ts (3 tests) 17ms
stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[DEBUG] Building.ts loaded

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[DEBUG] Terrain.ts top-level load

stdout | src/tests/GoblinSpawnVerification.test.js
[DEBUG] Building.ts loaded

stdout | src/tests/GoblinSpawnVerification.test.js
[DEBUG] Terrain.ts top-level load

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[DEBUG] Actor.ts loaded

stdout | src/tests/GoblinSpawnVerification.test.js
[DEBUG] Actor.ts loaded

stdout | src/tests/GoblinSpawnVerification.test.js
[DEBUG] Goblin.ts loaded

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[DEBUG] Goblin.ts loaded

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Goblin.ts loaded

stdout | src/tests/GoblinSpawnVerification.test.js
[Import Debug] Raid: function, Combat: function, Wander: function

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[Import Debug] Raid: function, Combat: function, Wander: function

stdout | src/tests/Regression_WorkerLogic.test.js
[Import Debug] Raid: function, Combat: function, Wander: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Population Update > should correctly sum housing population excluding farms
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Population Update > should grow population in a house over time
Disposing detached game instance

stdout | src/tests/HumanSpawningSurvival.test.js > Human Spawning Survival > should allow population growth (slowly) even with 0 food
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/HumanSpawningSurvival.test.js > Human Spawning Survival > should allow population growth (slowly) even with 0 food
Population after update: [33m10[39m

 ç¬¨ãƒ»src/tests/HumanSpawningSurvival.test.js (1 test) 265ms
stdout | src/tests/GoblinHutFix.test.js > Goblin Hut Fix > should NOT trigger spawnCallback for goblin_hut even if overpopulated
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/GoblinSpawnVerification.test.js
[DEBUG] Game.ts top-level load

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[DEBUG] Game.ts top-level load

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Game.ts top-level load

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[Hotspot Debug] Grouping with existing at 10,10 (Dist: 2.8)

stdout | src/tests/GoblinHutFix.test.js > Goblin Hut Fix > should trigger spawnCallback for house when overpopulated (Control)
Disposing detached game instance

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Mobilizes idle squads to intense hotspots (Updated Threshold)
[Game] Mobilizing Squad 1 to Hotspot at 100,20 (Intensity:100.0)

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should NOT abort job during long async pathfinding (prevent oscillation)
[Entity 0] CONSTRUCTOR START: type=unit at 10,10
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Mobilizes idle squads
[Game] Mobilizing Squad 1 to Hotspot at 50,50 (Intensity:100.0)

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should NOT abort job during long async pathfinding (prevent oscillation)
[Actor 1] Resetting Unreachable (Target changed or initializing)

 ç¬¨ãƒ»src/tests/Hotspot.test.js (6 tests) 570ms
     ç¬¨ãƒ»Clusters nearby battle reports  555ms
stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should NOT abort job during long async pathfinding (prevent oscillation)
[Actor 1] Pathfinding SUCCESS: Got 2 nodes to 50,50
[Entity 1] startMove -> isMoving:true. Target:50,50 StartTime:0.0000

stdout | src/tests/SpawnCost.test.js > Unit Spawn Cost > should consume food when spawning from House
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/SpawnCost.test.js > Unit Spawn Cost > should BLOCK spawn if insufficient food
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Population Update > should grow population in a house over time
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should grow crops using simDeltaTime (Not raw deltaTime)
Disposing detached game instance

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin Hut when idle (Passive Worker Fix)
Disposing detached game instance

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin Hut when idle (Passive Worker Fix)
[Entity 1] CONSTRUCTOR START: type=unit at 10,10
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:1

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin Hut when idle (Passive Worker Fix)
[Actor 1] Resetting Unreachable (Target changed or initializing)

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin Hut when idle (Passive Worker Fix)
[Actor 1] Pathfinding SUCCESS: Got 2 nodes to 50,50
[Entity 1] startMove -> isMoving:true. Target:50,50 StartTime:100.0160

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin even if holding a job (Self Defense)
Disposing detached game instance

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin even if holding a job (Self Defense)
[Entity 2] CONSTRUCTOR START: type=unit at 10,10
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:2

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin even if holding a job (Self Defense)
[Actor 1] Resetting Unreachable (Target changed or initializing)
[DEBUG Unit 1] i=30 id=gob1 gx=10 gz=10 tGx=11 tGz=11 myCell=true gCell=true
Target set: {
  id: [32m'gob1'[39m,
  gridX: [33m11[39m,
  gridZ: [33m11[39m,
  position: { x: [33m11[39m, y: [33m0[39m, z: [33m11[39m },
  isDead: [33mfalse[39m,
  hp: [33m10[39m,
  type: [32m'goblin'[39m,
  takeDamage: [36m[Function: takeDamage][39m
}
[Actor 1] Pathfinding SUCCESS: Got 2 nodes to 80,80
[Entity 1] startMove -> isMoving:true. Target:80,80 StartTime:0.0000

stdout | src/tests/GoblinHutFix.test.js > Goblin Hut Fix > should trigger spawnCallback for house when overpopulated (Control)
[Terrain] Constructor. updatePopulation type: function

 ç¬¨ãƒ»src/tests/Regression_WorkerLogic.test.js (3 tests) 168ms
stdout | src/tests/GoblinHutFix.test.js > Goblin Hut Fix > should trigger spawnCallback for house when overpopulated (Control)
Before Update: Pop= [33m15[39m
After Update: Pop= [33m0[39m

 ç¬¨ãƒ»src/tests/GoblinHutFix.test.js (2 tests) 446ms
stdout | src/tests/SpawnCost.test.js > Unit Spawn Cost > should BLOCK spawn if insufficient food
[Terrain] Constructor. updatePopulation type: function

 ç¬¨ãƒ»src/tests/SpawnCost.test.js (2 tests) 456ms
stdout | src/tests/GoblinSpawnVerification.test.js > Goblin Spawn Verification > should register caves present in terrain
[Game] Constructor called. Instance ID: 1 (Minimal: true)
[Game] Init Basic State
[Game] Init Queues
[Game] Init Time
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.344689, 0.932811) -> Grid(55, 149) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.124097, 0.872480) -> Grid(19, 139) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.339533, 0.488117) -> Grid(54, 78) rngState=undefined
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 0/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5000)
[Terrain] Constructor. updatePopulation type: function
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=0
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.404846, 0.832207) -> Grid(40, 83) rngState=0
[Entity 0] CONSTRUCTOR START: type=building at 40,83
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
GoblinManager: Cave registered at 40,83 
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.008782, 0.497601) -> Grid(0, 49) rngState=0
[Entity 1] CONSTRUCTOR START: type=building at 0,49
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
GoblinManager: Cave registered at 0,49 
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.115868, 0.437335) -> Grid(11, 43) rngState=0
[Entity 2] CONSTRUCTOR START: type=building at 11,43
[Entity 2] Calling registerEntity...
[Entity 2] registerEntity returned.
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
GoblinManager: Cave registered at 11,43 
[Entity 3] CONSTRUCTOR START: type=building at 47,15
[Entity 3] Calling registerEntity...
[Entity 3] registerEntity returned.
[Entity 3] Calling updatePosition...
[Entity 3] updatePosition returned.
GoblinManager: Cave registered at 47,15 
[Entity 4] CONSTRUCTOR START: type=building at 36,81
[Entity 4] Calling registerEntity...
[Entity 4] registerEntity returned.
[Entity 4] Calling updatePosition...
[Entity 4] updatePosition returned.
GoblinManager: Cave registered at 36,81 
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 5/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5)
GoblinManager: Force spawning Debug Goblin

stdout | src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should grow crops using simDeltaTime (Not raw deltaTime)
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should preserve overflow when harvesting
Disposing detached game instance

stdout | src/tests/GoblinSpawnVerification.test.js > Goblin Spawn Verification > should register caves present in terrain
[Entity 5] CONSTRUCTOR START: type=building at 10,10
[Entity 5] Calling registerEntity...
[Entity 5] registerEntity returned.
[Entity 5] Calling updatePosition...
[Entity 5] updatePosition returned.

stdout | src/tests/GoblinSpawnVerification.test.js > Goblin Spawn Verification > should spawn goblin when population reaches threshold
Disposing detached game instance
[Game] Dispose called for Game Instance.
[Terrain] Dispose called.

stdout | src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should preserve overflow when harvesting
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should scale farm yield based on moisture
Disposing detached game instance

stdout | src/tests/GoblinSpawnVerification.test.js > Goblin Spawn Verification > should spawn goblin when population reaches threshold
[Game] Constructor called. Instance ID: 2 (Minimal: true)
[Game] Init Basic State
[Game] Init Queues
[Game] Init Time
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.673388, 0.970410) -> Grid(107, 155) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.037033, 0.975277) -> Grid(5, 156) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.604716, 0.853626) -> Grid(96, 136) rngState=undefined
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 0/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5000)
[Terrain] Constructor. updatePopulation type: function
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=0
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.573651, 0.923809) -> Grid(57, 92) rngState=0
[Entity 6] CONSTRUCTOR START: type=building at 57,92
[Entity 6] Calling registerEntity...
[Entity 6] registerEntity returned.
[Entity 6] Calling updatePosition...
[Entity 6] updatePosition returned.
GoblinManager: Cave registered at 57,92 
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.269517, 0.332330) -> Grid(26, 33) rngState=0
[Entity 7] CONSTRUCTOR START: type=building at 26,33
[Entity 7] Calling registerEntity...
[Entity 7] registerEntity returned.
[Entity 7] Calling updatePosition...
[Entity 7] updatePosition returned.
GoblinManager: Cave registered at 26,33 
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.858391, 0.897186) -> Grid(85, 89) rngState=0
[Entity 8] CONSTRUCTOR START: type=building at 85,89
[Entity 8] Calling registerEntity...
[Entity 8] registerEntity returned.
[Entity 8] Calling updatePosition...
[Entity 8] updatePosition returned.
GoblinManager: Cave registered at 85,89 
[Entity 9] CONSTRUCTOR START: type=building at 66,81
[Entity 9] Calling registerEntity...
[Entity 9] registerEntity returned.
[Entity 9] Calling updatePosition...
[Entity 9] updatePosition returned.
GoblinManager: Cave registered at 66,81 
[Entity 10] CONSTRUCTOR START: type=building at 97,26
[Entity 10] Calling registerEntity...
[Entity 10] registerEntity returned.
[Entity 10] Calling updatePosition...
[Entity 10] updatePosition returned.
GoblinManager: Cave registered at 97,26 
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 5/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5)
GoblinManager: Force spawning Debug Goblin

stdout | src/tests/GoblinSpawnVerification.test.js > Goblin Spawn Verification > should spawn goblin when population reaches threshold
[Entity 11] CONSTRUCTOR START: type=building at 20,20
[Entity 11] Calling registerEntity...
[Entity 11] registerEntity returned.
[Entity 11] Calling updatePosition...
[Entity 11] updatePosition returned.
[Entity 12] CONSTRUCTOR START: type=goblin at 18,19
[Entity 12] Calling registerEntity...
[Entity 12] registerEntity returned.
[Entity 12] Calling updatePosition...
[Entity 12] updatePosition returned.
[DIAG] Actor Created ID: 12
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[DEBUG] Goblin born from cave! Total: 1, Remaining population: 0.0

 ç¬¨ãƒ»src/tests/GoblinSpawnVerification.test.js (2 tests) 450ms
stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should scale farm yield based on moisture
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should reduce food consumption at night
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should reduce food consumption at night
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should consume normal amount during day
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should consume normal amount during day
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should return different colors for seasons
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should return different colors for seasons
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should keep rock color even if dry (desert override check)
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should keep rock color even if dry (desert override check)
[Terrain] Constructor. updatePopulation type: function

 ç¬¨ãƒ»src/tests/Terrain.test.js (9 tests) 1152ms

 Test Files  9 passed (9)
      Tests  32 passed (32)
   Start at  00:01:07
   Duration  2.42s (transform 2.42s, setup 600ms, import 3.37s, tests 3.55s, environment 5.55s)

