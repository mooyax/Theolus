
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign a manual request to an Idle worker
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign a manual request to an Idle worker
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should NOT assign to a Busy worker (already working)
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should NOT assign to a Busy worker (already working)
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Wandering worker (Low Priority)
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Wandering worker (Low Priority)
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Moving worker (Low Priority)
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Moving worker (Low Priority)
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should re-assign a unit that is "Moving" to a job (Not yet Working)
Game constructor called

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should re-assign a unit that is "Moving" to a job (Not yet Working)
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0
[Game] forceAssignRequest FOUND Unit 10 (DistSq:200). Scanned:1
[Game] forceAssignRequest FAILED for Req req_old. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 10] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 10] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_new to Unit 10 (Score: 200.0)

 ç¬¨ãƒ»src/tests/ManualAssignment.test.js (5 tests) 26ms
stdout | src/tests/MultiJob.test.js > Multi-Job Juggling Verification > should NOT interrupt busy units when a new job is added
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 22,140. Force:false
[Terrain] Building Added: cave at (22, 140) Size:1x1. Total: 1
GoblinManager: Cave registered at 22,140 
[GoblinManager] Clan clan_cave_22_140 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 6,95. Force:false
[Terrain] Building Added: cave at (6, 95) Size:1x1. Total: 2
GoblinManager: Cave registered at 6,95 
[GoblinManager] Clan clan_cave_6_95 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 40,44. Force:false
[Terrain] Building Added: cave at (40, 44) Size:1x1. Total: 3
GoblinManager: Cave registered at 40,44 
[GoblinManager] Clan clan_cave_40_44 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 94,97. Force:false
[Terrain] Building Added: cave at (94, 97) Size:1x1. Total: 4
GoblinManager: Cave registered at 94,97 
[GoblinManager] Clan clan_cave_94_97 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 42,154. Force:false
[Terrain] Building Added: cave at (42, 154) Size:1x1. Total: 5
GoblinManager: Cave registered at 42,154 
[GoblinManager] Clan clan_cave_42_154 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 13 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/MultiJob.test.js > Multi-Job Juggling Verification > should NOT interrupt busy units when a new job is added
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:2
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request 101 to Unit 1 (Score: 400.0)
[Game] forceAssignRequest FOUND Unit 2 (DistSq:400). Scanned:2
[Defense Debug 2] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request 102 to Unit 2 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 2] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2

 ç¬¨ãƒ»src/tests/MultiJob.test.js (1 test) 1543ms
     ç¬¨ãƒ»should NOT interrupt busy units when a new job is added  1542ms
stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should immediately stop unit when job is cancelled mid-approach
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 138,157. Force:false
[Terrain] Building Added: cave at (138, 157) Size:1x1. Total: 1
GoblinManager: Cave registered at 138,157 
[GoblinManager] Clan clan_cave_138_157 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 91,72. Force:false
[Terrain] Building Added: cave at (91, 72) Size:1x1. Total: 2
GoblinManager: Cave registered at 91,72 
[GoblinManager] Clan clan_cave_91_72 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 15,18. Force:false
[Terrain] Building Added: cave at (15, 18) Size:1x1. Total: 3
GoblinManager: Cave registered at 15,18 
[GoblinManager] Clan clan_cave_15_18 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 41,24. Force:false
[Terrain] Building Added: cave at (41, 24) Size:1x1. Total: 4
GoblinManager: Cave registered at 41,24 
[GoblinManager] Clan clan_cave_41_24 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 30,72. Force:false
[Terrain] Building Added: cave at (30, 72) Size:1x1. Total: 5
GoblinManager: Cave registered at 30,72 
[GoblinManager] Clan clan_cave_30_72 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 8 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should immediately stop unit when job is cancelled mid-approach
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Cancelling active job for Unit 1
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Request Canceled at 20,0 (Target: 20,0)
DEBUG: TargetRequest: [1mnull[22m
DEBUG: Queue Length: [33m0[39m

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should pickup NEXT job if current is cancelled
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 8,134. Force:false
[Terrain] Building Added: cave at (8, 134) Size:1x1. Total: 1
GoblinManager: Cave registered at 8,134 
[GoblinManager] Clan clan_cave_8_134 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 154,85. Force:false
[Terrain] Building Added: cave at (154, 85) Size:1x1. Total: 2
GoblinManager: Cave registered at 154,85 
[GoblinManager] Clan clan_cave_154_85 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 154,107. Force:false
[Terrain] Building Added: cave at (154, 107) Size:1x1. Total: 3
GoblinManager: Cave registered at 154,107 
[GoblinManager] Clan clan_cave_154_107 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 89,92. Force:false
[Terrain] Building Added: cave at (89, 92) Size:1x1. Total: 4
GoblinManager: Cave registered at 89,92 
[GoblinManager] Clan clan_cave_89_92 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 138,146. Force:false
[Terrain] Building Added: cave at (138, 146) Size:1x1. Total: 5
GoblinManager: Cave registered at 138,146 
[GoblinManager] Clan clan_cave_138_146 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 6 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should pickup NEXT job if current is cancelled
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Request Added: build at (-20,0) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Cancelling active job for Unit 1
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived)
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
Game constructor called
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 123,5. Force:false
[Terrain] Building Added: cave at (123, 5) Size:1x1. Total: 1
GoblinManager: Cave registered at 123,5 
[GoblinManager] Clan clan_cave_123_5 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 8,131. Force:false
[Terrain] Building Added: cave at (8, 131) Size:1x1. Total: 2
GoblinManager: Cave registered at 8,131 
[GoblinManager] Clan clan_cave_8_131 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 75,89. Force:false
[Terrain] Building Added: cave at (75, 89) Size:1x1. Total: 3
GoblinManager: Cave registered at 75,89 
[GoblinManager] Clan clan_cave_75_89 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 15,140. Force:false
[Terrain] Building Added: cave at (15, 140) Size:1x1. Total: 4
GoblinManager: Cave registered at 15,140 
[GoblinManager] Clan clan_cave_15_140 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 157,104. Force:false
[Terrain] Building Added: cave at (157, 104) Size:1x1. Total: 5
GoblinManager: Cave registered at 157,104 
[GoblinManager] Clan clan_cave_157_104 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 10 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stderr | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived)
[JobState] Chaining Check. Game:Y Next:null

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived)
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None

 ç¬¨ãƒ»src/tests/ComplexInteraction.test.js (3 tests) 5356ms
     ç¬¨ãƒ»should immediately stop unit when job is cancelled mid-approach  1783ms
     ç¬¨ãƒ»should pickup NEXT job if current is cancelled  1897ms
     ç¬¨ãƒ»should handle cancellation while Working (arrived)  1675ms

 Test Files  3 passed (3)
      Tests  9 passed (9)
   Start at  22:39:10
   Duration  6.62s (transform 939ms, setup 116ms, import 1.42s, tests 6.93s, environment 1.48s)

