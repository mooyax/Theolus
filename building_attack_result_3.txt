
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should automatically engage a nearby goblin hut
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10
Unit created. Game set: [33mtrue[39m

stdout | src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should automatically engage a nearby goblin hut
Mock findBestTarget called for building
Unit 1 found Base via Spatial Search!
[Actor 1] SmartMove Dist: 5 Path: No

stdout | src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should NOT engage if worker (safeguard check)
[UnitCore.js] Unit Created ID:1 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:knight Pos:10,10
Unit created. Game set: [33mtrue[39m

stdout | src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should NOT engage if worker (safeguard check)
Unit 1 found Goblin via Spatial Search!
[Actor 1] SmartMove Dist: NaN Path: No
[Unit 1] Moving onto Rock at 10,NaN H:10 (Speed Penalty)

 ç¬¶ï½¯ src/tests/BuildingAttackAuto.test.js (2 tests | 1 failed) 41ms
     ï¾ƒãƒ»should automatically engage a nearby goblin hut 36ms
     ç¬¨ãƒ»should NOT engage if worker (safeguard check) 4ms

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Failed Tests 1 ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

 FAIL  src/tests/BuildingAttackAuto.test.js > Autonomous Building Attack > should automatically engage a nearby goblin hut
TypeError: this.terrain.findPath is not a function
 ç¬¶ï½¯ Unit.smartMove src/Actor.js:176:54
    174|                         }
    175| 
    176|                         const newPath = this.terrain.findPath(this.griçª¶ï½¦
       |                                                      ^
    177|                         if (newPath && newPath.length > 0) {
    178|                             this.path = newPath;
 ç¬¶ï½¯ Unit.updateCombatLogic src/Unit.js:1647:18
 ç¬¶ï½¯ CombatState.update src/ai/states/UnitStates.js:518:24
 ç¬¶ï½¯ CombatState.enter src/ai/states/UnitStates.js:463:14
 ç¬¶ï½¯ Unit.changeState src/Actor.js:30:24
 ç¬¶ï½¯ UnitWanderState.update src/ai/states/UnitStates.js:58:24
 ç¬¶ï½¯ src/tests/BuildingAttackAuto.test.js:72:20

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[1/1]ç«¡ï½¯


 Test Files  1 failed (1)
      Tests  1 failed | 1 passed (2)
   Start at  23:08:14
   Duration  1.43s (transform 148ms, setup 48ms, import 211ms, tests 41ms, environment 778ms)

