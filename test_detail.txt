
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Building.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Terrain.ts top-level load

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Actor.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Goblin.ts loaded

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[Import Debug] Raid: function, Combat: function, Wander: function

[90mstdout[2m | src/tests/SheepHuntingFix.test.js
[22m[39m[DEBUG] Game.ts top-level load

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould remove dead sheep during manager update
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 1] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.791295, 0.778870) -> Grid(126, 124) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.752463, 0.909207) -> Grid(120, 145) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.853598, 0.823676) -> Grid(136, 131) rngState=undefined
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 0/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould regenerate sheep when population is low
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould regenerate sheep when population is low
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 2] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.298855, 0.126358) -> Grid(47, 20) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.772942, 0.181419) -> Grid(123, 29) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.356997, 0.817507) -> Grid(57, 130) rngState=undefined
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 0/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39mDisposing detached game instance
[Game] Dispose called for Game Instance.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39m[Game] Init SphereGeometry
[Game] Minimal/Override Init Start
[Game] Minimal: Init Clock
[Game FORCE CONST 3] Creating mock terrain
[Game] Minimal: Init Managers
[Game] Minimal: Init GoblinManager
[GoblinManager] 5è›Ÿä¹ãƒ»è±¢æ¨’ï½ªæº˜ï½’é€•æ»“ãƒ»è³ï½­...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.577525, 0.953882) -> Grid(92, 152) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.087373, 0.575534) -> Grid(13, 92) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.342339, 0.369759) -> Grid(54, 59) rngState=undefined
[GoblinManager] è±¢æ¨’ï½ªæº½å‡½è¬Œä»™ï½®å¾¡ï½ºãƒ» 0/5 (éš§ï½¦é™¦æ‚Ÿå±“è¬¨ï½°: 5000)
[Game] Minimal: Init EnemyAI
[Game] Minimal: Done. Returning.

[90mstdout[2m | src/tests/SheepHuntingFix.test.js[2m > [22m[2mSheep Hunting Logic & Manager Update Fix[2m > [22m[2mshould ignore dead sheep in hunter targeting
[22m[39m[Entity 0] CONSTRUCTOR START: type=unit at 10,10
[Entity 0] Calling registerEntity...
[Entity 0] registerEntity returned.
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:player Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:player Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0
[Entity 1] CONSTRUCTOR START: type=sheep at 11,11
[Entity 1] Calling registerEntity...
[Entity 1] registerEntity returned.
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[Entity 2] CONSTRUCTOR START: type=sheep at 40,40
[Entity 2] Calling registerEntity...
[Entity 2] registerEntity returned.
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

 [31mï¾ƒãƒ»[39m src/tests/SheepHuntingFix.test.js[2m > [22mSheep Hunting Logic & Manager Update Fix[2m > [22mshould remove dead sheep during manager update[32m 17[2mms[22m[39m
[31m   ç«Šãƒ»sm.initSheeps is not a function[39m
 [31mï¾ƒãƒ»[39m src/tests/SheepHuntingFix.test.js[2m > [22mSheep Hunting Logic & Manager Update Fix[2m > [22mshould regenerate sheep when population is low[32m 10[2mms[22m[39m
[31m   ç«Šãƒ»sm.initSheeps is not a function[39m
 [32mç¬¨ãƒ»[39m src/tests/SheepHuntingFix.test.js[2m > [22mSheep Hunting Logic & Manager Update Fix[2m > [22mshould ignore dead sheep in hunter targeting[32m 14[2mms[22m[39m

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Failed Tests 2 ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

 FAIL  src/tests/SheepHuntingFix.test.js > Sheep Hunting Logic & Manager Update Fix > should remove dead sheep during manager update
TypeError: sm.initSheeps is not a function
 ç¬¶ï½¯ src/tests/SheepHuntingFix.test.js:25:12
     23|     it('should remove dead sheep during manager update', () => {
     24|         const sm = game.sheepManager;
     25|         sm.initSheeps();
       |            ^
     26|         const initialCount = sm.sheeps.length;
     27| 

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[1/2]ç«¡ï½¯

 FAIL  src/tests/SheepHuntingFix.test.js > Sheep Hunting Logic & Manager Update Fix > should regenerate sheep when population is low
TypeError: sm.initSheeps is not a function
 ç¬¶ï½¯ src/tests/SheepHuntingFix.test.js:42:12
     40|         const sm = game.sheepManager;
     41|         sm.sheepCount = 5;
     42|         sm.initSheeps();
       |            ^
     43| 
     44|         // Remove all sheep

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[2/2]ç«¡ï½¯


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m   Start at [22m 19:16:06
[2m   Duration [22m 1.48s[2m (transform 585ms, setup 96ms, import 659ms, tests 42ms, environment 470ms)[22m

