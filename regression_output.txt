
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/WorkerOscillation.test.js > Worker Oscillation Debug > should blacklist unreachable jobs and NOT pick them up immediately
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0

stdout | src/tests/WorkerOscillation.test.js > Worker Oscillation Debug > should blacklist unreachable jobs and NOT pick them up immediately
[TestDebug] State:Wander Unreach:false Wait:false

stdout | src/tests/WorkerOscillation.test.js > Worker Oscillation Debug > should NOT oscillate (Ping Pong) between Job and Idle
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:1

 笨・src/tests/WorkerOscillation.test.js (2 tests) 11ms
stdout | src/tests/ComplexAI.test.js
[Import Debug] Raid: function, Combat: function, Wander: function

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should drop job gracefully if target building is destroyed
[GoblinManager] 5蛟九・豢樒ｪ溘ｒ逕滓・荳ｭ...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.552862, 0.129370) -> Grid(88, 20) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.666877, 0.216498) -> Grid(106, 34) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.185682, 0.543389) -> Grid(29, 86) rngState=undefined
[GoblinManager] 豢樒ｪ溽函謌仙ｮ御ｺ・ 0/5 (隧ｦ陦悟屓謨ｰ: 5000)

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should drop job gracefully if target building is destroyed
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0
[Game] Request Added: cultivate at (20,20) ID:req_0
[Game] No worker in radius 80 for Manual Req req_0. Trying Global Scan...
[Unit 0] State Change: Wander -> Job
[Unit 0] State Change: Job -> Wander
[Actor 0] SmartMove Depth:1 Node:20,20 My:10,10 d:10,10 
[Unit 0] canMoveTo(20,20) OK
[Unit 0] canMoveTo(20,20) checking grid...
[DIAG] executeMove Actor:0 calling startMove.Current isMoving:false 
[Entity 0] startMove -> isMoving:true. Target:20,20 StartTime:0.0000
[DIAG] executeMove Actor:0 finished startMove.New isMoving:true 

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should prioritize manual jobs even when closer auto jobs appear
[Game] Dispose called for Game Instance.
[GoblinManager] 5蛟九・豢樒ｪ溘ｒ逕滓・荳ｭ...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.031221, 0.523581) -> Grid(4, 83) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.029438, 0.625656) -> Grid(4, 100) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.249683, 0.233861) -> Grid(39, 37) rngState=undefined
[GoblinManager] 豢樒ｪ溽函謌仙ｮ御ｺ・ 0/5 (隧ｦ陦悟屓謨ｰ: 5000)

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should prioritize manual jobs even when closer auto jobs appear
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0
[Game] Request Added: raise at (50,50) ID:req_0
[Game] No worker in radius 80 for Manual Req req_0. Trying Global Scan...
[Unit 0] State Change: Wander -> Job
[Game] Request Added: raise at (11,11) ID:req_1
[Actor 0] SmartMove Depth:1 Node:50,50 My:10,10 d:40,40 
[Unit 0] canMoveTo(50,50) OK
[Unit 0] canMoveTo(50,50) checking grid...
[DIAG] executeMove Actor:0 calling startMove.Current isMoving:false 
[Entity 0] startMove -> isMoving:true. Target:50,50 StartTime:0.0000
[DIAG] executeMove Actor:0 finished startMove.New isMoving:true 

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should prioritize manual jobs even when closer auto jobs appear
[Actor 0] SmartMove Depth:0 Node:50,50 My:10,10 d:40,40 
[Unit 0] canMoveTo(50,50) OK
[Unit 0] canMoveTo(50,50) checking grid...

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should NOT drop manual job when switching to Sleep at night
[Game] Dispose called for Game Instance.
[GoblinManager] 5蛟九・豢樒ｪ溘ｒ逕滓・荳ｭ...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.292780, 0.299060) -> Grid(46, 47) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.161705, 0.183081) -> Grid(25, 29) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.041307, 0.813598) -> Grid(6, 130) rngState=undefined
[GoblinManager] 豢樒ｪ溽函謌仙ｮ御ｺ・ 0/5 (隧ｦ陦悟屓謨ｰ: 5000)

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should NOT drop manual job when switching to Sleep at night
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0
[Game] Request Added: raise at (50,50) ID:req_0
[Game] No worker in radius 80 for Manual Req req_0. Trying Global Scan...
[Unit 0] State Change: Wander -> Job

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should NOT drop manual job when switching to Sleep at night
[Actor 0] SmartMove Depth:1 Node:50,50 My:10,10 d:40,40 
[Unit 0] canMoveTo(50,50) OK
[Unit 0] canMoveTo(50,50) checking grid...
[DIAG] executeMove Actor:0 calling startMove.Current isMoving:false 
[Entity 0] startMove -> isMoving:true. Target:50,50 StartTime:0.0000
[DIAG] executeMove Actor:0 finished startMove.New isMoving:true 

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should abandon unreachable job (Abandonment Test)
[Game] Dispose called for Game Instance.
[GoblinManager] 5蛟九・豢樒ｪ溘ｒ逕滓・荳ｭ...
[GoblinManager] DETERMINISM: generateCaves start. rngState=undefined
[GoblinManager] DETERMINISM: Attempt 1: Rnd(0.114329, 0.132226) -> Grid(18, 21) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 2: Rnd(0.817431, 0.334634) -> Grid(130, 53) rngState=undefined
[GoblinManager] DETERMINISM: Attempt 3: Rnd(0.769154, 0.415914) -> Grid(123, 66) rngState=undefined
[GoblinManager] 豢樒ｪ溽函謌仙ｮ御ｺ・ 0/5 (隧ｦ陦悟屓謨ｰ: 5000)

stdout | src/tests/ComplexAI.test.js > Complex AI Scenarios > should abandon unreachable job (Abandonment Test)
[Entity 3] Calling updatePosition...
[Entity 3] updatePosition returned.
[DIAG] Actor Created ID: 3
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0
[Game] Request Added: raise at (90,90) ID:req_0
[Game] No worker in radius 80 for Manual Req req_0. Trying Global Scan...
[Unit 0] State Change: Wander -> Job

 笶ｯ src/tests/ComplexAI.test.js (4 tests | 1 failed) 48ms
     笨・should drop job gracefully if target building is destroyed 17ms
     笨・should prioritize manual jobs even when closer auto jobs appear 10ms
     笨・should NOT drop manual job when switching to Sleep at night 4ms
     ﾃ・should abandon unreachable job (Abandonment Test) 17ms

 Test Files  1 failed | 1 passed (2)
      Tests  1 failed | 5 passed (6)
   Start at  17:13:35
   Duration  1.18s (transform 587ms, setup 137ms, import 772ms, tests 60ms, environment 874ms)

