
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/ActorLogic.test.js
[22m[39m[DEBUG] Actor.ts loaded

[90mstdout[2m | src/tests/ActorLogic.test.js[2m > [22m[2mActor Logic SmartMove[2m > [22m[2mshould retry pathfinding if isUnreachable is true but timer expired
[22m[39m[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

[90mstdout[2m | src/tests/ActorLogic.test.js[2m > [22m[2mActor Logic SmartMove[2m > [22m[2mshould retry pathfinding if isUnreachable is true but timer expired
[22m[39mTest 1 Path: [1mnull[22m

[90mstdout[2m | src/tests/ActorLogic.test.js[2m > [22m[2mActor Logic SmartMove[2m > [22m[2mshould NOT retry pathfinding if isUnreachable is true and timer valid
[22m[39m[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

[90mstdout[2m | src/tests/ActorLogic.test.js[2m > [22m[2mActor Logic SmartMove[2m > [22m[2mshould be throttled if called too soon
[22m[39m[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

[90mstdout[2m | src/tests/ActorLogic.test.js[2m > [22m[2mActor Logic SmartMove[2m > [22m[2mshould NOT pathfind if isReachable returns false
[22m[39m[Entity 3] Calling updatePosition...
[Entity 3] updatePosition returned.
[DIAG] Actor Created ID: 3
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $

 [31mç¬¶ï½¯[39m src/tests/ActorLogic.test.js [2m([22m[2m4 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 20[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should retry pathfinding if isUnreachable is true but timer expired[39m[32m 9[2mms[22m[39m
     [32mç¬¨ãƒ»[39m should NOT retry pathfinding if isUnreachable is true and timer valid[32m 2[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should be throttled if called too soon[39m[32m 6[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should NOT pathfind if isReachable returns false[39m[32m 1[2mms[22m[39m

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Failed Tests 3 ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

 FAIL  src/tests/ActorLogic.test.js > Actor Logic SmartMove > should retry pathfinding if isUnreachable is true but timer expired
AssertionError: expected "vi.fn()" to be called at least once
 ç¬¶ï½¯ src/tests/ActorLogic.test.js:66:43
     64|         // Assert
     65|         expect(actor.isUnreachable).toBe(false);
     66|         expect(mockTerrain.findPathAsync).toHaveBeenCalled();
       |                                           ^
     67|         expect(result).toBe(true);
     68|     });

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[1/3]ç«¡ï½¯

 FAIL  src/tests/ActorLogic.test.js > Actor Logic SmartMove > should be throttled if called too soon
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ç¬¶ï½¯ src/tests/ActorLogic.test.js:98:46
     96| 
     97|         expect(result).toBe(false); // Or true if isMoving? isMoving fçª¶ï½¦
     98|         expect(actor.isPathfindingThrottled).toBe(true);
       |                                              ^
     99|         expect(mockTerrain.findPathAsync).not.toHaveBeenCalled();
    100|     });

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[2/3]ç«¡ï½¯

 FAIL  src/tests/ActorLogic.test.js > Actor Logic SmartMove > should NOT pathfind if isReachable returns false
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ç¬¶ï½¯ src/tests/ActorLogic.test.js:110:37
    108| 
    109|         expect(result).toBe(false);
    110|         expect(actor.isUnreachable).toBe(true);
       |                                     ^
    111|         expect(mockTerrain.findPathAsync).not.toHaveBeenCalled();
    112|     });

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[3/3]ç«¡ï½¯


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[2m   Start at [22m 14:40:36
[2m   Duration [22m 1.05s[2m (transform 121ms, setup 91ms, import 131ms, tests 20ms, environment 577ms)[22m

