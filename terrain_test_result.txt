
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/Terrain.test.js
[DEBUG] Building.ts loaded

stdout | src/tests/Terrain.test.js
[DEBUG] Terrain.ts top-level load

stdout | src/tests/Terrain.test.js > Terrain Logic > Population Update > should correctly sum housing population excluding farms
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Population Update > should grow population in a house over time
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Population Update > should grow population in a house over time
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should grow crops using simDeltaTime (Not raw deltaTime)
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should grow crops using simDeltaTime (Not raw deltaTime)
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should preserve overflow when harvesting
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should preserve overflow when harvesting
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should scale farm yield based on moisture
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should scale farm yield based on moisture
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should reduce food consumption at night
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should reduce food consumption at night
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should consume normal amount during day
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should consume normal amount during day
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should return different colors for seasons
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should return different colors for seasons
[Terrain] Constructor. updatePopulation type: function

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should keep rock color even if dry (desert override check)
Disposing detached game instance

stdout | src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should keep rock color even if dry (desert override check)
[Terrain] Constructor. updatePopulation type: function

 笶ｯ src/tests/Terrain.test.js (9 tests | 4 failed) 1170ms
       笨・should correctly sum housing population excluding farms 126ms
       ﾃ・should grow population in a house over time 128ms
       ﾃ・should grow crops using simDeltaTime (Not raw deltaTime) 123ms
       ﾃ・should preserve overflow when harvesting 117ms
       ﾃ・should scale farm yield based on moisture 188ms
       笨・should reduce food consumption at night 130ms
       笨・should consume normal amount during day 150ms
         笨・should return different colors for seasons 97ms
         笨・should keep rock color even if dry (desert override check) 109ms

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ Failed Tests 4 竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ

 FAIL  src/tests/Terrain.test.js > Terrain Logic > Population Update > should grow population in a house over time
AssertionError: expected NaN to be greater than 2
 笶ｯ src/tests/Terrain.test.js:75:47
     73| 
     74|             // Should have grown by 1
     75|             expect(house.userData.population).toBeGreaterThan(2);
       |                                               ^
     76|             expect(house.population).toBe(3);
     77|         });

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[1/4]竡ｯ

 FAIL  src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should grow crops using simDeltaTime (Not raw deltaTime)
AssertionError: expected NaN to be greater than 0
 笶ｯ src/tests/Terrain.test.js:88:52
     86|             terrain.updatePopulation(rawDelta);
     87| 
     88|             expect(farm.userData.productionBuffer).toBeGreaterThan(0);
       |                                                    ^
     89|         });
     90| 

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[2/4]竡ｯ

 FAIL  src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should preserve overflow when harvesting
AssertionError: expected +0 to be 4 // Object.is equality

- Expected
+ Received

- 4
+ 0

 笶ｯ src/tests/Terrain.test.js:99:46
     97|             terrain.updatePopulation(slowDelta, false, 0, vi.fn());
     98| 
     99|             expect(mockGame.resources.grain).toBe(4); // Yield is 4
       |                                              ^
    100|             expect(farm.userData.population).toBeCloseTo(15, 0); // 11窶ｦ
    101|         });

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[3/4]竡ｯ

 FAIL  src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should scale farm yield based on moisture
AssertionError: expected +0 to be 4 // Object.is equality

- Expected
+ Received

- 4
+ 0

 笶ｯ src/tests/Terrain.test.js:121:46
    119| 
    120|             // Yield should happen
    121|             expect(mockGame.resources.grain).toBe(4);
       |                                              ^
    122|         });
    123| 

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[4/4]竡ｯ


 Test Files  1 failed (1)
      Tests  4 failed | 5 passed (9)
   Start at  16:15:45
   Duration  2.20s (transform 254ms, setup 113ms, import 222ms, tests 1.17s, environment 508ms)

