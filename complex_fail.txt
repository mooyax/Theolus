
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould immediately stop unit when job is cancelled mid-approach
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 24,64. Force:false
[Terrain] Building Added: cave at (24, 64) Size:1x1. Total: 1
GoblinManager: Cave registered at 24,64 
[GoblinManager] Clan clan_cave_24_64 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 80,79. Force:false
[Terrain] Building Added: cave at (80, 79) Size:1x1. Total: 2
GoblinManager: Cave registered at 80,79 
[GoblinManager] Clan clan_cave_80_79 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 29,108. Force:false
[Terrain] Building Added: cave at (29, 108) Size:1x1. Total: 3
GoblinManager: Cave registered at 29,108 
[GoblinManager] Clan clan_cave_29_108 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 49,47. Force:false
[Terrain] Building Added: cave at (49, 47) Size:1x1. Total: 4
GoblinManager: Cave registered at 49,47 
[GoblinManager] Clan clan_cave_49_47 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 47,86. Force:false
[Terrain] Building Added: cave at (47, 86) Size:1x1. Total: 5
GoblinManager: Cave registered at 47,86 
[GoblinManager] Clan clan_cave_47_86 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 13 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould immediately stop unit when job is cancelled mid-approach
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
[Game] Cancelling active job for Unit 1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould pickup NEXT job if current is cancelled
[22m[39m[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 76,50. Force:false
[Terrain] Building Added: cave at (76, 50) Size:1x1. Total: 1
GoblinManager: Cave registered at 76,50 
[GoblinManager] Clan clan_cave_76_50 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 41,3. Force:false
[Terrain] Building Added: cave at (41, 3) Size:1x1. Total: 2
GoblinManager: Cave registered at 41,3 
[GoblinManager] Clan clan_cave_41_3 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 26,102. Force:false
[Terrain] Building Added: cave at (26, 102) Size:1x1. Total: 3
GoblinManager: Cave registered at 26,102 
[GoblinManager] Clan clan_cave_26_102 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 104,152. Force:false
[Terrain] Building Added: cave at (104, 152) Size:1x1. Total: 4
GoblinManager: Cave registered at 104,152 
[GoblinManager] Clan clan_cave_104_152 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 28,86. Force:false
[Terrain] Building Added: cave at (28, 86) Size:1x1. Total: 5
GoblinManager: Cave registered at 28,86 
[GoblinManager] Clan clan_cave_28_86 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 14 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

 [32mç¬¨ãƒ»[39m src/tests/ComplexInteraction.test.js[2m > [22mComplex Job Interaction and Cancellation[2m > [22mshould immediately stop unit when job is cancelled mid-approach[33m 1885[2mms[22m[39m
[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould pickup NEXT job if current is cancelled
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Request Added: build at (-20,0) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
[Game] Cancelling active job for Unit 1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould handle cancellation while Working (arrived)
[22m[39m[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 30,150. Force:false
[Terrain] Building Added: cave at (30, 150) Size:1x1. Total: 1
GoblinManager: Cave registered at 30,150 
[GoblinManager] Clan clan_cave_30_150 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 106,8. Force:false
[Terrain] Building Added: cave at (106, 8) Size:1x1. Total: 2
GoblinManager: Cave registered at 106,8 
[GoblinManager] Clan clan_cave_106_8 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 159,66. Force:false
[Terrain] Building Added: cave at (159, 66) Size:1x1. Total: 3
GoblinManager: Cave registered at 159,66 
[GoblinManager] Clan clan_cave_159_66 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 119,14. Force:false
[Terrain] Building Added: cave at (119, 14) Size:1x1. Total: 4
GoblinManager: Cave registered at 119,14 
[GoblinManager] Clan clan_cave_119_14 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 25,123. Force:false
[Terrain] Building Added: cave at (25, 123) Size:1x1. Total: 5
GoblinManager: Cave registered at 25,123 
[GoblinManager] Clan clan_cave_25_123 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 16 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

 [32mç¬¨ãƒ»[39m src/tests/ComplexInteraction.test.js[2m > [22mComplex Job Interaction and Cancellation[2m > [22mshould pickup NEXT job if current is cancelled[33m 1865[2mms[22m[39m
[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould handle cancellation while Working (arrived)
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)

 [32mç¬¨ãƒ»[39m src/tests/ComplexInteraction.test.js[2m > [22mComplex Job Interaction and Cancellation[2m > [22mshould handle cancellation while Working (arrived)[33m 2456[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m   Start at [22m 17:22:44
[2m   Duration [22m 7.48s[2m (transform 334ms, setup 36ms, import 458ms, tests 6.21s, environment 474ms)[22m

