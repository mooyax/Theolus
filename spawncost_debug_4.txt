
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/SpawnCost.test.js[2m > [22m[2mUnit Spawn Cost[2m > [22m[2mshould consume food when spawning from House
[22m[39m[Terrain] Generated 5529 trees.

[90mstdout[2m | src/tests/SpawnCost.test.js[2m > [22m[2mUnit Spawn Cost[2m > [22m[2mshould BLOCK spawn if insufficient food
[22m[39m[Terrain] Generated 11674 trees.

 [31mç¬¶ï½¯[39m src/tests/SpawnCost.test.js [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 298[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should consume food when spawning from House[39m[32m 171[2mms[22m[39m
[31m     [31mï¾ƒãƒ»[31m should BLOCK spawn if insufficient food[39m[32m 126[2mms[22m[39m

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Failed Tests 2 ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

 FAIL  src/tests/SpawnCost.test.js > Unit Spawn Cost > should consume food when spawning from House
Error: Expected grain 50, but got 49.95. SpawnEvents: 1
 ç¬¶ï½¯ src/tests/SpawnCost.test.js:137:19
    135|         // DEBUG: Force fail with message to see values
    136|         if (mockGame.resources.grain !== 50) {
    137|             throw new Error(`Expected grain 50, but got ${mockGame.resçª¶ï½¦
       |                   ^
    138|         }
    139|         expect(mockGame.resources.grain).toBe(50);

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[1/2]ç«¡ï½¯

 FAIL  src/tests/SpawnCost.test.js > Unit Spawn Cost > should BLOCK spawn if insufficient food
AssertionError: expected 9.950000000000001 to be 10 // Object.is equality

- Expected
+ Received

- 10
+ 9.950000000000001

 ç¬¶ï½¯ src/tests/SpawnCost.test.js:160:42
    158|         // EXPECTATION:
    159|         expect(spawnedEvents.length).toBe(0);
    160|         expect(mockGame.resources.grain).toBe(10); // Unchanged
       |                                          ^
    161|         // Population remains full (waiting) -> logic resets it to capçª¶ï½¦
    162|         // Current logic: if failed, pop = cap.

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯[2/2]ç«¡ï½¯

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Unhandled Errors ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯

Vitest caught 2 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Unhandled Rejection ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯
TypeError: color.lerp is not a function
 ç¬¶ï½¯ Terrain.getBiomeColor src/Terrain.ts:942:19
    940|             let sandFactor = 1.0;
    941|             if (moisture > 0.35) sandFactor = 1.0 - ((moisture - 0.35)çª¶ï½¦
    942|             color.lerp(sandColor, sandFactor);
       |                   ^
    943|         }
    944| 
 ç¬¶ï½¯ Terrain.updateColors src/Terrain.ts:847:36
 ç¬¶ï½¯ Terrain.calculateRegions src/Terrain.ts:552:14
 ç¬¶ï½¯ Terrain.generateRandomTerrain src/Terrain.ts:484:14
 ç¬¶ï½¯ Terrain.initTerrain src/Terrain.ts:424:14
 ç¬¶ï½¯ new Terrain src/Terrain.ts:90:14
 ç¬¶ï½¯ src/tests/SpawnCost.test.js:90:19
 ç¬¶ï½¯ node_modules/@vitest/runner/dist/index.js:145:11
 ç¬¶ï½¯ node_modules/@vitest/runner/dist/index.js:1240:20

This error originated in "src/tests/SpawnCost.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ Unhandled Rejection ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯
TypeError: color.lerp is not a function
 ç¬¶ï½¯ Terrain.getBiomeColor src/Terrain.ts:942:19
    940|             let sandFactor = 1.0;
    941|             if (moisture > 0.35) sandFactor = 1.0 - ((moisture - 0.35)çª¶ï½¦
    942|             color.lerp(sandColor, sandFactor);
       |                   ^
    943|         }
    944| 
 ç¬¶ï½¯ Terrain.updateColors src/Terrain.ts:847:36
 ç¬¶ï½¯ Terrain.calculateRegions src/Terrain.ts:552:14
 ç¬¶ï½¯ Terrain.generateRandomTerrain src/Terrain.ts:484:14
 ç¬¶ï½¯ Terrain.initTerrain src/Terrain.ts:424:14
 ç¬¶ï½¯ new Terrain src/Terrain.ts:90:14
 ç¬¶ï½¯ src/tests/SpawnCost.test.js:90:19
 ç¬¶ï½¯ node_modules/@vitest/runner/dist/index.js:145:11
 ç¬¶ï½¯ node_modules/@vitest/runner/dist/index.js:1240:20

This error originated in "src/tests/SpawnCost.test.js" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯ç«¡ï½¯


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m     Errors [22m [1m[31m2 errors[39m[22m
[2m   Start at [22m 13:09:19
[2m   Duration [22m 1.45s[2m (transform 362ms, setup 329ms, import 132ms, tests 298ms, environment 462ms)[22m

