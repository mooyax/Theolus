
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/StuckAndMarker.test.js[2m > [22m[2mStuck and Marker Debugging[2m > [22m[2mshould move IMMEDIATELY when assigned a job (no 3s delay)
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:0
[Game] Request Added: move at (50,50) ID:req_0
[Game] forceAssignRequest FOUND Unit 0 (DistSq:3200). Scanned:1
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[JobState] smartMove failed(Wait).Budget ? 0 
[JobState] Entered.Target: move.Resume: UnitWanderState 
[Game] Force-Assigned Request req_0 to Unit 0 (Score: 3200.0)
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None

 [32mç¬¨ãƒ»[39m src/tests/StuckAndMarker.test.js [2m([22m[2m1 test[22m[2m)[22m[32m 32[2mms[22m[39m
[90mstdout[2m | src/tests/MultiJob.test.js[2m > [22m[2mMulti-Job Juggling Verification[2m > [22m[2mshould NOT interrupt busy units when a new job is added
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 74,60. Force:false
[Terrain] Building Added: cave at (74, 60) Size:1x1. Total: 1
GoblinManager: Cave registered at 74,60 
[GoblinManager] Clan clan_cave_74_60 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 137,116. Force:false
[Terrain] Building Added: cave at (137, 116) Size:1x1. Total: 2
GoblinManager: Cave registered at 137,116 
[GoblinManager] Clan clan_cave_137_116 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 52,31. Force:false
[Terrain] Building Added: cave at (52, 31) Size:1x1. Total: 3
GoblinManager: Cave registered at 52,31 
[GoblinManager] Clan clan_cave_52_31 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 80,57. Force:false
[Terrain] Building Added: cave at (80, 57) Size:1x1. Total: 4
GoblinManager: Cave registered at 80,57 
[GoblinManager] Clan clan_cave_80_57 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 5,30. Force:false
[Terrain] Building Added: cave at (5, 30) Size:1x1. Total: 5
GoblinManager: Cave registered at 5,30 
[GoblinManager] Clan clan_cave_5_30 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 11 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/MultiJob.test.js[2m > [22m[2mMulti-Job Juggling Verification[2m > [22m[2mshould NOT interrupt busy units when a new job is added
[22m[39m[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:2
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request 101 to Unit 1 (Score: 400.0)
[Game] forceAssignRequest FOUND Unit 2 (DistSq:400). Scanned:2
[Defense Debug 2] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request 102 to Unit 2 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 2] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2

 [32mç¬¨ãƒ»[39m src/tests/MultiJob.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 2871[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should NOT interrupt busy units when a new job is added [33m 2869[2mms[22m[39m
[90mstdout[2m | src/tests/JobIdempotency.test.js[2m > [22m[2mJob Assignment Idempotency[2m > [22m[2mshould NOT reset movement if claiming the same job twice
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 149,124. Force:false
[Terrain] Building Added: cave at (149, 124) Size:1x1. Total: 1
GoblinManager: Cave registered at 149,124 
[GoblinManager] Clan clan_cave_149_124 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 24,57. Force:false
[Terrain] Building Added: cave at (24, 57) Size:1x1. Total: 2
GoblinManager: Cave registered at 24,57 
[GoblinManager] Clan clan_cave_24_57 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 119,138. Force:false
[Terrain] Building Added: cave at (119, 138) Size:1x1. Total: 3
GoblinManager: Cave registered at 119,138 
[GoblinManager] Clan clan_cave_119_138 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 73,21. Force:false
[Terrain] Building Added: cave at (73, 21) Size:1x1. Total: 4
GoblinManager: Cave registered at 73,21 
[GoblinManager] Clan clan_cave_73_21 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 92,48. Force:false
[Terrain] Building Added: cave at (92, 48) Size:1x1. Total: 5
GoblinManager: Cave registered at 92,48 
[GoblinManager] Clan clan_cave_92_48 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 6 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/JobIdempotency.test.js[2m > [22m[2mJob Assignment Idempotency[2m > [22m[2mshould NOT reset movement if claiming the same job twice
[22m[39m[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould immediately stop unit when job is cancelled mid-approach
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 65,35. Force:false
[Terrain] Building Added: cave at (65, 35) Size:1x1. Total: 1
GoblinManager: Cave registered at 65,35 
[GoblinManager] Clan clan_cave_65_35 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 27,12. Force:false
[Terrain] Building Added: cave at (27, 12) Size:1x1. Total: 2
GoblinManager: Cave registered at 27,12 
[GoblinManager] Clan clan_cave_27_12 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 99,114. Force:false
[Terrain] Building Added: cave at (99, 114) Size:1x1. Total: 3
GoblinManager: Cave registered at 99,114 
[GoblinManager] Clan clan_cave_99_114 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 142,30. Force:false
[Terrain] Building Added: cave at (142, 30) Size:1x1. Total: 4
GoblinManager: Cave registered at 142,30 
[GoblinManager] Clan clan_cave_142_30 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 61,146. Force:false
[Terrain] Building Added: cave at (61, 146) Size:1x1. Total: 5
GoblinManager: Cave registered at 61,146 
[GoblinManager] Clan clan_cave_61_146 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 11 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

 [32mç¬¨ãƒ»[39m src/tests/JobIdempotency.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 3132[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should NOT reset movement if claiming the same job twice [33m 3130[2mms[22m[39m
[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould immediately stop unit when job is cancelled mid-approach
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
[Game] Cancelling active job for Unit 1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
DEBUG: TargetRequest: [1mnull[22m
DEBUG: Queue Length: [33m0[39m

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould pickup NEXT job if current is cancelled
[22m[39m[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 85,118. Force:false
[Terrain] Building Added: cave at (85, 118) Size:1x1. Total: 1
GoblinManager: Cave registered at 85,118 
[GoblinManager] Clan clan_cave_85_118 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 150,81. Force:false
[Terrain] Building Added: cave at (150, 81) Size:1x1. Total: 2
GoblinManager: Cave registered at 150,81 
[GoblinManager] Clan clan_cave_150_81 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 147,95. Force:false
[Terrain] Building Added: cave at (147, 95) Size:1x1. Total: 3
GoblinManager: Cave registered at 147,95 
[GoblinManager] Clan clan_cave_147_95 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 107,125. Force:false
[Terrain] Building Added: cave at (107, 125) Size:1x1. Total: 4
GoblinManager: Cave registered at 107,125 
[GoblinManager] Clan clan_cave_107_125 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 62,77. Force:false
[Terrain] Building Added: cave at (62, 77) Size:1x1. Total: 5
GoblinManager: Cave registered at 62,77 
[GoblinManager] Clan clan_cave_62_77 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 8 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould pickup NEXT job if current is cancelled
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Request Added: build at (-20,0) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
[Game] Cancelling active job for Unit 1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould handle cancellation while Working (arrived)
[22m[39m[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 146,115. Force:false
[Terrain] Building Added: cave at (146, 115) Size:1x1. Total: 1
GoblinManager: Cave registered at 146,115 
[GoblinManager] Clan clan_cave_146_115 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 91,115. Force:false
[Terrain] Building Added: cave at (91, 115) Size:1x1. Total: 2
GoblinManager: Cave registered at 91,115 
[GoblinManager] Clan clan_cave_91_115 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 8,79. Force:false
[Terrain] Building Added: cave at (8, 79) Size:1x1. Total: 3
GoblinManager: Cave registered at 8,79 
[GoblinManager] Clan clan_cave_8_79 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 8,104. Force:false
[Terrain] Building Added: cave at (8, 104) Size:1x1. Total: 4
GoblinManager: Cave registered at 8,104 
[GoblinManager] Clan clan_cave_8_104 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 116,143. Force:false
[Terrain] Building Added: cave at (116, 143) Size:1x1. Total: 5
GoblinManager: Cave registered at 116,143 
[GoblinManager] Clan clan_cave_116_143 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 9 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould handle cancellation while Working (arrived)
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)

 [32mç¬¨ãƒ»[39m src/tests/ComplexInteraction.test.js [2m([22m[2m3 tests[22m[2m)[22m[33m 7798[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should immediately stop unit when job is cancelled mid-approach [33m 3135[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should pickup NEXT job if current is cancelled [33m 2627[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should handle cancellation while Working (arrived) [33m 2033[2mms[22m[39m

[2m Test Files [22m [1m[32m4 passed[39m[22m[90m (4)[39m
[2m      Tests [22m [1m[32m6 passed[39m[22m[90m (6)[39m
[2m   Start at [22m 14:33:57
[2m   Duration [22m 9.67s[2m (transform 1.50s, setup 167ms, import 2.48s, tests 13.83s, environment 3.13s)[22m

