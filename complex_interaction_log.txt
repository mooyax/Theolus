
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould immediately stop unit when job is cancelled mid-approach
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 25,98. Force:false
[Terrain] Building Added: cave at (25, 98) Size:1x1. Total: 1
GoblinManager: Cave registered at 25,98 
[GoblinManager] Clan clan_cave_25_98 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 134,45. Force:false
[Terrain] Building Added: cave at (134, 45) Size:1x1. Total: 2
GoblinManager: Cave registered at 134,45 
[GoblinManager] Clan clan_cave_134_45 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 63,105. Force:false
[Terrain] Building Added: cave at (63, 105) Size:1x1. Total: 3
GoblinManager: Cave registered at 63,105 
[GoblinManager] Clan clan_cave_63_105 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 48,85. Force:false
[Terrain] Building Added: cave at (48, 85) Size:1x1. Total: 4
GoblinManager: Cave registered at 48,85 
[GoblinManager] Clan clan_cave_48_85 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 27,52. Force:false
[Terrain] Building Added: cave at (27, 52) Size:1x1. Total: 5
GoblinManager: Cave registered at 27,52 
[GoblinManager] Clan clan_cave_27_52 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 6 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould immediately stop unit when job is cancelled mid-approach
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Cancelling active job for Unit 1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould pickup NEXT job if current is cancelled
[22m[39m[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 19,9. Force:false
[Terrain] Building Added: cave at (19, 9) Size:1x1. Total: 1
GoblinManager: Cave registered at 19,9 
[GoblinManager] Clan clan_cave_19_9 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 140,93. Force:false
[Terrain] Building Added: cave at (140, 93) Size:1x1. Total: 2
GoblinManager: Cave registered at 140,93 
[GoblinManager] Clan clan_cave_140_93 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 136,22. Force:false
[Terrain] Building Added: cave at (136, 22) Size:1x1. Total: 3
GoblinManager: Cave registered at 136,22 
[GoblinManager] Clan clan_cave_136_22 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 39,79. Force:false
[Terrain] Building Added: cave at (39, 79) Size:1x1. Total: 4
GoblinManager: Cave registered at 39,79 
[GoblinManager] Clan clan_cave_39_79 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 150,62. Force:false
[Terrain] Building Added: cave at (150, 62) Size:1x1. Total: 5
GoblinManager: Cave registered at 150,62 
[GoblinManager] Clan clan_cave_150_62 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 8 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould pickup NEXT job if current is cancelled
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Request Added: build at (-20,0) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Cancelling active job for Unit 1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 99,0 H:10 (Speed Penalty)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould handle cancellation while Working (arrived)
[22m[39m[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 145,155. Force:false
[Terrain] Building Added: cave at (145, 155) Size:1x1. Total: 1
GoblinManager: Cave registered at 145,155 
[GoblinManager] Clan clan_cave_145_155 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 105,54. Force:false
[Terrain] Building Added: cave at (105, 54) Size:1x1. Total: 2
GoblinManager: Cave registered at 105,54 
[GoblinManager] Clan clan_cave_105_54 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 73,35. Force:false
[Terrain] Building Added: cave at (73, 35) Size:1x1. Total: 3
GoblinManager: Cave registered at 73,35 
[GoblinManager] Clan clan_cave_73_35 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 156,114. Force:false
[Terrain] Building Added: cave at (156, 114) Size:1x1. Total: 4
GoblinManager: Cave registered at 156,114 
[GoblinManager] Clan clan_cave_156_114 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 77,46. Force:false
[Terrain] Building Added: cave at (77, 46) Size:1x1. Total: 5
GoblinManager: Cave registered at 77,46 
[GoblinManager] Clan clan_cave_77_46 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 27 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

[90mstdout[2m | src/tests/ComplexInteraction.test.js[2m > [22m[2mComplex Job Interaction and Cancellation[2m > [22m[2mshould handle cancellation while Working (arrived)
[22m[39m[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None

 [32mç¬¨ãƒ»[39m src/tests/ComplexInteraction.test.js [2m([22m[2m3 tests[22m[2m)[22m[33m 6771[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should immediately stop unit when job is cancelled mid-approach [33m 2499[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should pickup NEXT job if current is cancelled [33m 1974[2mms[22m[39m
     [33m[2mç¬¨ãƒ»[22m[39m should handle cancellation while Working (arrived) [33m 2296[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m   Start at [22m 22:06:25
[2m   Duration [22m 8.42s[2m (transform 410ms, setup 50ms, import 570ms, tests 6.77s, environment 691ms)[22m

