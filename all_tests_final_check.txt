
 RUN  v4.0.15 C:/Users/mooya/develop/test

[Test] ReleaseRequest Calls: 1
[Test] Unit HP: 0. isDead: true. TargetReq: null
stdout | src/tests/CombatRequestHandoff.test.js > Request Responsiveness & Combat Handoff > Worker releases job when died
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
Run Logic...
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[JobState] smartMove failed(Wait).Budget ? 0 
[JobState] Entered.Target: undefined.Resume: UnitWanderState 
Simulate Death. Role: worker Req: { id: [32m'req_1'[39m, x: [33m15[39m, z: [33m15[39m, status: [32m'assigned'[39m, assignedTo: [33m0[39m } Game: [33mtrue[39m
Unit 0 (worker) DIED. R.I.P.
[Unit 0] Releasing request via this.game
[Test] Unit Dead? true Health: undefined
[Test] ReleaseRequest Calls: [33m1[39m

stdout | src/tests/SimpleRegion.test.js > Simple Region Connectivity > should identify a single island
Running calculateRegions...
Done.
Region ID at 5,5: 1

 ç¬¨ãƒ»src/tests/CombatRequestHandoff.test.js > Request Responsiveness & Combat Handoff > Worker releases job when died 270ms
stdout | src/tests/BuildingDestruction.test.js > Building Destruction Logic > should successfully remove a building from the list
[Terrain] addBuilding: house at 10,10. Force:true
[Terrain] Building Added: house at (10, 10) Size:2x2. Total: 1
[Terrain] Building removed at 10,10

stdout | src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > triggerWave should mobilize idle goblins
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.

stdout | src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > triggerWave should mobilize idle goblins
[GoblinManager] TRIGGERING WAVE Level 1 for Clan test_clan!
[Wave] Spawning 1 goblins at cave 10,10 (Lvl 1)
[GoblinManager] Mobilized 2 idle goblins from Clan test_clan to raid target!

 ç¬¨ãƒ»src/tests/SimpleRegion.test.js > Simple Region Connectivity > should identify a single island 262ms
 ç¬¨ãƒ»src/tests/SimpleRegion.test.js > Simple Region Connectivity > should split two islands 195ms
 ç¬¨ãƒ»src/tests/WorkerReachability.test.js > Worker Job Reachability > findBestRequest filters out unreachable jobs 596ms
stdout | src/tests/CombatRequestHandoff.test.js > Request Responsiveness & Combat Handoff > forceAssignRequest prioritizes idle unit over busy unit
[Game] forceAssignRequest FOUND Unit 2 (DistSq:2888). Scanned:2
[Game] Force-Assigned Request req_hot to Unit 2 (Score: 2888.0)

 ç¬¨ãƒ»src/tests/CombatRequestHandoff.test.js > Request Responsiveness & Combat Handoff > forceAssignRequest prioritizes idle unit over busy unit 322ms
 ç¬¨ãƒ»src/tests/WorkerReachability.test.js > Worker Job Reachability > forceAssignRequest skips unreachable units 14ms
 ç¬¨ãƒ»src/tests/GoblinFixes.test.js > Goblin Fixes Verification > Entity.getDistance should handle wrapping 213ms
 ç¬¨ãƒ»src/tests/BuildingDestruction.test.js > Building Destruction Logic > should successfully remove a building from the list 182ms
stdout | src/tests/BuildingDestruction.test.js > Building Destruction Logic > should allow a goblin to destroy a building
[Terrain] addBuilding: house at 10,10. Force:true
[Terrain] Building Added: house at (10, 10) Size:2x2. Total: 1
Goblin 0 hitting Empty house. HP: 2
Goblin 0 hitting Empty house. HP: -7
[Terrain] Building removed at 10,10
Goblin 0 destroyed house!

 ç¬¨ãƒ»src/tests/BuildingDestruction.test.js > Building Destruction Logic > should allow a goblin to destroy a building 260ms
stdout | src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > mobilizeClan should rely on getClanRaidTarget fallback
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.

 ç¬¨ãƒ»src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > triggerWave should mobilize idle goblins 253ms
stdout | src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > mobilizeClan should rely on getClanRaidTarget fallback
[GoblinManager] Mobilized 1 idle goblins from Clan test_clan_fallback to raid target!

 ç¬¨ãƒ»src/tests/GoblinMobilization.test.js > Goblin Mobilization Verification > mobilizeClan should rely on getClanRaidTarget fallback 236ms
stdout | src/tests/BuildingDestruction.test.js > Building Destruction Logic > should handle identity mismatch (Ghost Building)
[Terrain] addBuilding: house at 20,20. Force:true
[Terrain] Building Added: house at (20, 20) Size:2x2. Total: 1
[Terrain] removeBuilding: Identity mismatch! searching by coord 20,20
[Terrain] Swapping ghost building object for authoritative one.
[Terrain] Building removed at 20,20

 ç¬¨ãƒ»src/tests/BuildingDestruction.test.js > Building Destruction Logic > should handle identity mismatch (Ghost Building) 183ms
 ç¬¨ãƒ»src/tests/GoblinFixes.test.js > Goblin Fixes Verification > Terrain.findBestTarget should find wrapped targets 145ms
 ç¬¨ãƒ»src/tests/GoblinFixes.test.js > Goblin Fixes Verification > Terrain.findBestTarget should handle non-wrapping case correctly (sanity) 92ms
stdout | src/tests/GoblinFixes.test.js > Goblin Fixes Verification > GoblinManager difficulty scaling increases stronger goblin probability
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
Lvl 1 - King: 14, Shaman: 44, Hob: 99
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
îžè˜ Goblin King Spawned!
Lvl 20 - King: 63, Shaman: 127, Hob: 286

 ç¬¨ãƒ»src/tests/GoblinFixes.test.js > Goblin Fixes Verification > GoblinManager difficulty scaling increases stronger goblin probability 287ms
stdout | src/tests/ForceBuild.test.js > Terrain Force Build Logic > should clear existing buildings when placing a new one
[Terrain] addBuilding: house at 10,10. Force:false
[Terrain] Building Added: house at (10, 10) Size:2x2. Total: 1
[Terrain] Clearing obstacle: house for new construction.
[Terrain] Building removed at 10,10
[Terrain] addBuilding: barracks at 10,10. Force:false
[Terrain] Building Added: barracks at (10, 10) Size:3x3. Total: 1

stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should tag new requests with createdAt timestamp
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 12,142. Force:false
[Terrain] Building Added: cave at (12, 142) Size:1x1. Total: 1
GoblinManager: Cave registered at 12,142 
[GoblinManager] Clan clan_cave_12_142 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 124,104. Force:false
[Terrain] Building Added: cave at (124, 104) Size:1x1. Total: 2
GoblinManager: Cave registered at 124,104 
[GoblinManager] Clan clan_cave_124_104 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 139,81. Force:false
[Terrain] Building Added: cave at (139, 81) Size:1x1. Total: 3
GoblinManager: Cave registered at 139,81 
[GoblinManager] Clan clan_cave_139_81 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 60,20. Force:false
[Terrain] Building Added: cave at (60, 20) Size:1x1. Total: 4
GoblinManager: Cave registered at 60,20 
[GoblinManager] Clan clan_cave_60_20 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 75,104. Force:false
[Terrain] Building Added: cave at (75, 104) Size:1x1. Total: 5
GoblinManager: Cave registered at 75,104 
[GoblinManager] Clan clan_cave_75_104 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 6 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

 ç¬¨ãƒ»src/tests/ForceBuild.test.js > Terrain Force Build Logic > should clear existing buildings when placing a new one 1481ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should tag new requests with createdAt timestamp
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0

 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Population Update > should correctly sum housing population excluding farms 1158ms
 ç¬¨ãƒ»src/tests/SpatialSearch.test.js > Spatial Partitioning > should register and retrieve an entity 1168ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should save game data correctly
Saving Game Data: {
  slotId: [33m1[39m,
  timestamp: [33m1767114950017[39m,
  resources: { grain: [33m100[39m, fish: [33m50[39m, meat: [33m25[39m },
  gameTime: [33m12[39m,
  gameTotalTime: [33m0[39m,
  currentSeasonIndex: [90mundefined[39m,
  daysPassed: [90mundefined[39m,
  terrain: {
    logicalWidth: [33m160[39m,
    logicalDepth: [33m160[39m,
    version: [33m2[39m,
    h: [
      [33m11[39m, [33m10[39m,  [33m9[39m,  [33m8[39m,  [33m7[39m,  [33m6[39m,  [33m4[39m,  [33m3[39m,  [33m2[39m,  [33m1[39m,  [33m1[39m, [33m-0[39m,
      [33m-1[39m, [33m-2[39m, [33m-3[39m, [33m-4[39m, [33m-4[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-4[39m, [33m-4[39m, [33m-4[39m, [33m-4[39m, [33m-4[39m, [33m-4[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      [33m-5[39m, [33m-5[39m, [33m-5[39m, [33m-5[39m,
      ... 25500 more items
    ],
    n: [
       [33m0.01[39m,    [33m-0[39m,  [33m0.02[39m,  [33m0.02[39m,  [33m0.01[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.01[39m,
      [33m-0.01[39m, [33m-0.02[39m,  [33m0.02[39m,    [33m-0[39m,  [33m0.02[39m,  [33m0.01[39m,     [33m0[39m,    [33m-0[39m, [33m-0.02[39m,
      [33m-0.01[39m,  [33m0.01[39m,  [33m0.01[39m,     [33m0[39m,     [33m0[39m,  [33m0.01[39m, [33m-0.02[39m, [33m-0.01[39m, [33m-0.02[39m,
      [33m-0.02[39m,  [33m0.01[39m, [33m-0.01[39m,    [33m-0[39m, [33m-0.02[39m, [33m-0.01[39m, [33m-0.01[39m, [33m-0.02[39m,  [33m0.01[39m,
         [33m-0[39m, [33m-0.01[39m, [33m-0.01[39m,  [33m0.02[39m,    [33m-0[39m,  [33m0.02[39m,    [33m-0[39m, [33m-0.02[39m,     [33m0[39m,
      [33m-0.02[39m, [33m-0.01[39m, [33m-0.01[39m,    [33m-0[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.01[39m,  [33m0.02[39m,    [33m-0[39m,
      [33m-0.02[39m,    [33m-0[39m,  [33m0.02[39m, [33m-0.01[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.01[39m,     [33m0[39m, [33m-0.02[39m,
         [33m-0[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.02[39m, [33m-0.02[39m,    [33m-0[39m,  [33m0.01[39m,  [33m0.02[39m,  [33m0.01[39m,
       [33m0.01[39m, [33m-0.01[39m,  [33m0.02[39m,  [33m0.01[39m, [33m-0.02[39m, [33m-0.01[39m,  [33m0.02[39m, [33m-0.02[39m, [33m-0.01[39m,
      [33m-0.01[39m,  [33m0.02[39m,    [33m-0[39m,     [33m0[39m, [33m-0.01[39m, [33m-0.01[39m,    [33m-0[39m,     [33m0[39m,  [33m0.02[39m,
       [33m0.02[39m, [33m-0.01[39m,     [33m0[39m, [33m-0.02[39m, [33m-0.01[39m, [33m-0.02[39m,  [33m0.01[39m, [33m-0.02[39m,  [33m0.01[39m,
      [33m-0.02[39m,
      ... 25500 more items
    ],
    b: [],
    m: [
      [33m0.07[39m, [33m0.08[39m, [33m0.11[39m, [33m0.15[39m, [33m0.18[39m, [33m0.21[39m, [33m0.24[39m, [33m0.26[39m, [33m0.28[39m, [33m0.31[39m,
      [33m0.32[39m, [33m0.34[39m, [33m0.36[39m, [33m0.37[39m, [33m0.38[39m, [33m0.39[39m,  [33m0.4[39m, [33m0.41[39m, [33m0.43[39m, [33m0.45[39m,
      [33m0.46[39m, [33m0.47[39m, [33m0.47[39m, [33m0.48[39m, [33m0.48[39m, [33m0.48[39m, [33m0.46[39m, [33m0.45[39m, [33m0.44[39m, [33m0.43[39m,
      [33m0.44[39m, [33m0.45[39m, [33m0.45[39m, [33m0.46[39m, [33m0.46[39m, [33m0.47[39m, [33m0.48[39m, [33m0.48[39m, [33m0.48[39m, [33m0.48[39m,
      [33m0.47[39m, [33m0.46[39m, [33m0.46[39m, [33m0.45[39m, [33m0.44[39m, [33m0.43[39m, [33m0.41[39m, [33m0.39[39m, [33m0.38[39m, [33m0.38[39m,
      [33m0.38[39m, [33m0.37[39m, [33m0.36[39m, [33m0.33[39m, [33m0.31[39m, [33m0.28[39m, [33m0.26[39m, [33m0.25[39m, [33m0.24[39m, [33m0.23[39m,
      [33m0.23[39m, [33m0.24[39m, [33m0.25[39m, [33m0.26[39m, [33m0.26[39m, [33m0.26[39m, [33m0.27[39m, [33m0.28[39m, [33m0.29[39m,  [33m0.3[39m,
      [33m0.31[39m, [33m0.33[39m, [33m0.34[39m, [33m0.35[39m, [33m0.34[39m, [33m0.34[39m, [33m0.34[39m, [33m0.35[39m, [33m0.36[39m, [33m0.38[39m,
      [33m0.38[39m, [33m0.37[39m, [33m0.36[39m, [33m0.34[39m, [33m0.34[39m, [33m0.34[39m, [33m0.34[39m, [33m0.34[39m, [33m0.34[39m, [33m0.34[39m,
      [33m0.36[39m, [33m0.37[39m, [33m0.37[39m, [33m0.36[39m, [33m0.34[39m, [33m0.33[39m, [33m0.33[39m, [33m0.33[39m, [33m0.33[39m, [33m0.33[39m,
      ... 25500 more items
    ]
  },
  units: [],
  goblinManager: {},
  camera: {
    position: { x: [33m20[39m, y: [33m20[39m, z: [33m20[39m },
    zoom: [33m1[39m,
    target: { x: [90mundefined[39m, y: [90mundefined[39m, z: [90mundefined[39m }
  },
  requests: []
}
Saved to slot 1 (Compressed). Size: 24585 chars (Original: 312523)

 ç¬¨ãƒ»src/tests/SaveLoad.test.js > Save/Load System > should save game data correctly 1786ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cleanup expired pending requests
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 154,88. Force:false
[Terrain] Building Added: cave at (154, 88) Size:1x1. Total: 1
GoblinManager: Cave registered at 154,88 
[GoblinManager] Clan clan_cave_154_88 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 142,89. Force:false
[Terrain] Building Added: cave at (142, 89) Size:1x1. Total: 2
GoblinManager: Cave registered at 142,89 
[GoblinManager] Clan clan_cave_142_89 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 87,41. Force:false
[Terrain] Building Added: cave at (87, 41) Size:1x1. Total: 3
GoblinManager: Cave registered at 87,41 
[GoblinManager] Clan clan_cave_87_41 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 22,88. Force:false
[Terrain] Building Added: cave at (22, 88) Size:1x1. Total: 4
GoblinManager: Cave registered at 22,88 
[GoblinManager] Clan clan_cave_22_88 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 76,39. Force:false
[Terrain] Building Added: cave at (76, 39) Size:1x1. Total: 5
GoblinManager: Cave registered at 76,39 
[GoblinManager] Clan clan_cave_76_39 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 19 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

 ç¬¨ãƒ»src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should tag new requests with createdAt timestamp 959ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cleanup expired pending requests
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Added: raise at (20,20) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] forceAssignRequest FAILED for Req req_1. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request req_0 pending for 0.3s.
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Timed Out: raise ID:req_0

 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Population Update > should handle massive population overflow loop correctly 738ms
stdout | src/tests/ForceBuild.test.js > Terrain Force Build Logic > should clear buildings partially in the way
[Terrain] addBuilding: house at 10,10. Force:false
[Terrain] Building Added: house at (10, 10) Size:2x2. Total: 1
Pre-Barracks Buildings: [ [32m'house'[39m ]
[Terrain] Clearing obstacle: house for new construction.
[Terrain] Building removed at 10,10
[Terrain] addBuilding: barracks at 9,9. Force:false
[Terrain] Building Added: barracks at (9, 9) Size:3x3. Total: 1
Post-Barracks Buildings: [ [32m'barracks'[39m ]

 ç¬¨ãƒ»src/tests/ForceBuild.test.js > Terrain Force Build Logic > should clear buildings partially in the way 1329ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should NOT cleanup assigned requests even if old
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 44,113. Force:false
[Terrain] Building Added: cave at (44, 113) Size:1x1. Total: 1
GoblinManager: Cave registered at 44,113 
[GoblinManager] Clan clan_cave_44_113 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 51,45. Force:false
[Terrain] Building Added: cave at (51, 45) Size:1x1. Total: 2
GoblinManager: Cave registered at 51,45 
[GoblinManager] Clan clan_cave_51_45 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 83,21. Force:false
[Terrain] Building Added: cave at (83, 21) Size:1x1. Total: 3
GoblinManager: Cave registered at 83,21 
[GoblinManager] Clan clan_cave_83_21 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 92,137. Force:false
[Terrain] Building Added: cave at (92, 137) Size:1x1. Total: 4
GoblinManager: Cave registered at 92,137 
[GoblinManager] Clan clan_cave_92_137 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 48,24. Force:false
[Terrain] Building Added: cave at (48, 24) Size:1x1. Total: 5
GoblinManager: Cave registered at 48,24 
[GoblinManager] Clan clan_cave_48_24 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 20 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

 ç¬¨ãƒ»src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cleanup expired pending requests 954ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should NOT cleanup assigned requests even if old
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0

 ç¬¨ãƒ»src/tests/SpatialSearch.test.js > Spatial Partitioning > should move entity correctly between cells 995ms
stdout | src/tests/Pathfinding.test.js > Terrain Pathfinding Costs > Prefers a longer flat route over a shorter mountain route
Path Length: 31
Goes through gap: true
Goes through mountain: false

 ç¬¨ãƒ»src/tests/Pathfinding.test.js > Terrain Pathfinding Costs > Prefers a longer flat route over a shorter mountain route 110ms
stdout | src/tests/GhostHouse.test.js > Terrain Ghost House Test > should NOT accumulate ghost buildings (cleared during deserialize)
[Terrain] addBuilding: house at 5,5. Force:false
[Terrain] Building Added: house at (5, 5) Size:2x2. Total: 1
Debug: Buildings Count: 1

stdout | src/tests/GhostHouse.test.js > Terrain Ghost House Test > should NOT accumulate ghost buildings (cleared during deserialize)
[Terrain] Deserializing Legacy Format...

stdout | src/tests/GhostHouse.test.js > Terrain Ghost House Test > should NOT accumulate ghost buildings (cleared during deserialize)
[Terrain] addBuilding: house at 5,5. Force:true
[Terrain] Building Added: house at (5, 5) Size:2x2. Total: 1

 ç¬¨ãƒ»src/tests/GhostHouse.test.js > Terrain Ghost House Test > should NOT accumulate ghost buildings (cleared during deserialize) 242ms
 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should grow crops using simDeltaTime (Not raw deltaTime) 938ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
Load Started...

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports
[Game] New Battle Hotspot at 10,10 (Region:1)

 ç¬¨ãƒ»src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Clusters nearby battle reports 315ms
stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Decays intensity
[Game] New Battle Hotspot at 10,10 (Region:1)

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Mobilizes idle squads to intense hotspots (Updated Threshold)
[Game] Mobilizing Squad 1 to Hotspot at 100,20 (Intensity:100.0)

stdout | src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Mobilizes idle squads
[Game] Mobilizing Squad 1 to Hotspot at 50,50 (Intensity:100.0)

 ç¬¨ãƒ»src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Decays intensity 2ms
 ç¬¨ãƒ»src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Mobilizes idle squads to intense hotspots (Updated Threshold) 4ms
 ç¬¨ãƒ»src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Triggers autonomous patrol for idle Knights 4ms
 ç¬¨ãƒ»src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Mobilizes idle squads 2ms
 ç¬¨ãƒ»src/tests/Hotspot.test.js > Global Battle Hotspots Logic > Does not mobilize across regions 1ms
stdout | src/tests/StuckDebug.test.js > Unit Stuck Debugging > should log reason for blockage
[UnitCore.js] Unit Created ID:0 Role:undefined Pos:undefined,undefined Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:20,20
--- Testing Slope Block ---
[Unit 0] Blocked by Slope at 11,10 H:2->6
--- Testing Building Pass ---
--- Testing Water Block ---
[Unit 0] Blocked by Water at 30,30 H:0

 ç¬¨ãƒ»src/tests/StuckDebug.test.js > Unit Stuck Debugging > should log reason for blockage 296ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cancel request via Proximity Search
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 31,48. Force:false
[Terrain] Building Added: cave at (31, 48) Size:1x1. Total: 1
GoblinManager: Cave registered at 31,48 
[GoblinManager] Clan clan_cave_31_48 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 28,90. Force:false
[Terrain] Building Added: cave at (28, 90) Size:1x1. Total: 2
GoblinManager: Cave registered at 28,90 
[GoblinManager] Clan clan_cave_28_90 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 136,9. Force:false
[Terrain] Building Added: cave at (136, 9) Size:1x1. Total: 3
GoblinManager: Cave registered at 136,9 
[GoblinManager] Clan clan_cave_136_9 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 130,61. Force:false
[Terrain] Building Added: cave at (130, 61) Size:1x1. Total: 4
GoblinManager: Cave registered at 130,61 
[GoblinManager] Clan clan_cave_130_61 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 47,94. Force:false
[Terrain] Building Added: cave at (47, 94) Size:1x1. Total: 5
GoblinManager: Cave registered at 47,94 
[GoblinManager] Clan clan_cave_47_94 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 13 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

 ç¬¨ãƒ»src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should NOT cleanup assigned requests even if old 736ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cancel request via Proximity Search
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Added: raise at (20,20) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Canceled at 10,10 (Target: 11,11)

 ç¬¨ãƒ»src/tests/UnitVisibility.test.js > UnitRenderer Visibility > should set matrix with valid scale when unit is visible 134ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
Loading slot 1, Raw length: 101
Load: Decompressed successfully.
Parsed Data for slot 1: {
  timestamp: [33m1767114951734[39m,
  data: {
    resources: { grain: [33m999[39m, fish: [33m888[39m },
    gameTime: [33m6[39m,
    terrain: { logicalWidth: [33m10[39m, logicalDepth: [33m10[39m, grid: [], buildings: [] },
    units: [],
    camera: { position: [36m[Object][39m, target: [36m[Object][39m }
  }
}
Load Game: Data found {
  resources: { grain: [33m999[39m, fish: [33m888[39m },
  gameTime: [33m6[39m,
  terrain: { logicalWidth: [33m10[39m, logicalDepth: [33m10[39m, grid: [], buildings: [] },
  units: [],
  camera: { position: { x: [33m0[39m, y: [33m0[39m, z: [33m0[39m }, target: { x: [33m0[39m, y: [33m0[39m, z: [33m0[39m } }
}
Clearing 0 projectiles...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[DEBUG] Terrain.setSeason: Changing from undefined to Spring
[Game] Restored Camera Zoom: 1

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

 ç¬¨ãƒ»src/tests/SafeSpawn.test.js > Safe Population Zero > should NOT destroy house when spawning unit resets population to 0 365ms
 ç¬¨ãƒ»src/tests/UnitVisibility.test.js > UnitRenderer Visibility > should render correct count of instances 80ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly
[Game] calling BR.update. BR exists: true, Buildings: 0

 ç¬¨ãƒ»src/tests/SaveLoad.test.js > Save/Load System > should load game data correctly 1687ms
 ç¬¨ãƒ»src/tests/SpatialSearch.test.js > Spatial Partitioning > should unregister entity 1049ms
 ç¬¨ãƒ»src/tests/SpatialSearch.test.js > Spatial Partitioning > should find nearest entity using spatial search 1084ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should prioritize nearest request when cancelling
[Mock] createElement called with tag: canvas
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 102,64. Force:false
[Terrain] Building Added: cave at (102, 64) Size:1x1. Total: 1
GoblinManager: Cave registered at 102,64 
[GoblinManager] Clan clan_cave_102_64 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 117,54. Force:false
[Terrain] Building Added: cave at (117, 54) Size:1x1. Total: 2
GoblinManager: Cave registered at 117,54 
[GoblinManager] Clan clan_cave_117_54 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 84,123. Force:false
[Terrain] Building Added: cave at (84, 123) Size:1x1. Total: 3
GoblinManager: Cave registered at 84,123 
[GoblinManager] Clan clan_cave_84_123 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 50,65. Force:false
[Terrain] Building Added: cave at (50, 65) Size:1x1. Total: 4
GoblinManager: Cave registered at 50,65 
[GoblinManager] Clan clan_cave_50_65 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 15,8. Force:false
[Terrain] Building Added: cave at (15, 8) Size:1x1. Total: 5
GoblinManager: Cave registered at 15,8 
[GoblinManager] Clan clan_cave_15_8 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
[Mock] createElement called with tag: div
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Geometry Initialized (Split Mode)
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
Tower Debug: Generated High-Res Tower Texture + Cap Material
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas
[Mock] createElement called with tag: canvas

 ç¬¨ãƒ»src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should cancel request via Proximity Search 591ms
stdout | src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should prioritize nearest request when cancelling
[Game] Request Added: raise at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Added: raise at (12,12) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:0 (RoleSkipped:0) Busy:0 Valid:0. TotalUnits:0
[Game] Request Canceled at 10,10 (Target: 10,11)

 ç¬¨ãƒ»src/tests/RequestLifecycle.test.js > Game Request Lifecycle > should prioritize nearest request when cancelling 591ms
 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Farm Logic > should preserve overflow when harvesting 958ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
Load Started...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should scale farm yield based on moisture 917ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
Loading slot 1, Raw length: 113
Load: Decompressed successfully.
Parsed Data for slot 1: {
  timestamp: [33m1767114953097[39m,
  data: {
    resources: {},
    gameTime: [33m10[39m,
    terrain: { logicalWidth: [33m80[39m, grid: [], buildings: [] },
    units: [],
    requests: [ [36m[Object][39m, [36m[Object][39m ]
  }
}
Load Game: Data found {
  resources: {},
  gameTime: [33m10[39m,
  terrain: { logicalWidth: [33m80[39m, grid: [], buildings: [] },
  units: [],
  requests: [
    { id: [32m'req_1'[39m, type: [32m'raise'[39m, x: [33m5[39m, z: [33m5[39m, status: [32m'pending'[39m },
    { id: [32m'req_2'[39m, type: [32m'lower'[39m, x: [33m10[39m, z: [33m10[39m, status: [32m'completed'[39m }
  ]
}
Clearing 0 projectiles...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Terrain] Deserializing Legacy Format...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

 ç¬¨ãƒ»src/tests/StartupCrash.test.js > Startup Crash Verification > UnitRenderer should initialize without null materials 114ms
stdout | src/tests/StartupCrash.test.js > Startup Crash Verification > UnitRenderer update should not crash with active units
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10

 ç¬¨ãƒ»src/tests/StartupCrash.test.js > Startup Crash Verification > UnitRenderer update should not crash with active units 17ms
 ç¬¨ãƒ»src/tests/StartupCrash.test.js > Startup Crash Verification > FaceMesh should be present if split logic is active 1ms
stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[DEBUG] Terrain.setSeason: Changing from undefined to Spring
[Game] Restoring 2 requests...

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1,"Unnamed_CylinderGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1}

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0

stdout | src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder
[Game] calling BR.update. BR exists: true, Buildings: 0
[Scene Audit] Objects: {"Unnamed_PlaneGeometry":2,"[Instanced] BoxGeometry (Active:50000/50000)":3,"[Instanced] ConeGeometry (Active:100000/100000)":1,"[Instanced] BoxGeometry (Active:100000/100000)":2,"[Instanced] CylinderGeometry (Active:50000/50000)":1,"Unnamed_CylinderGeometry":2}

 ç¬¨ãƒ»src/tests/SaveLoad.test.js > Save/Load System > should restore request markers with correct renderOrder 1712ms
 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should reduce food consumption at night 699ms
stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins deal population damage to player buildings
Goblin 0 attacking house. Pop: 9.00

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins deal structural damage to empty player buildings
Goblin 1 hitting Empty house. HP: 40

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins destroy player buildings when HP reaches 0
Goblin 2 hitting Empty house. HP: 0
Goblin 2 destroyed house!

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Buildings retaliate against melee goblins
Goblin 3 attacking house. Pop: 9.92

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Towers have massive retaliation
Goblin 4 attacking tower. Pop: 4.92

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > No retaliation for distant attackers (Shamans)
Goblin 5 attacking house. Pop: 9.20

stdout | src/tests/BuildingDefense.test.js > Building Defense Logic > Standard HP logic for Goblin buildings
[UnitCore.js] Unit Created ID:0 Role:knight Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:20,20

 ç¬¨ãƒ»src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins deal population damage to player buildings 12ms
 ç¬¨ãƒ»src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins deal structural damage to empty player buildings 2ms
 ç¬¨ãƒ»src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins destroy player buildings when HP reaches 0 5ms
 ç¬¨ãƒ»src/tests/BuildingDefense.test.js > Building Defense Logic > Buildings retaliate against melee goblins 2ms
 ç¬¨ãƒ»src/tests/BuildingDefense.test.js > Building Defense Logic > Towers have massive retaliation 2ms
 ç¬¨ãƒ»src/tests/BuildingDefense.test.js > Building Defense Logic > No retaliation for distant attackers (Shamans) 2ms
 ç¬¨ãƒ»src/tests/BuildingDefense.test.js > Building Defense Logic > Goblins can target buildings with 0 population but > 0 structural HP 2ms
 ç¬¨ãƒ»src/tests/BuildingDefense.test.js > Building Defense Logic > Standard HP logic for Goblin buildings 3ms
stdout | src/tests/JobPathFailure.test.js > Job Pathfinding Failure Handling > should abandon job if smartMove fails repeatedly
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 138,92. Force:false
[Terrain] Building Added: cave at (138, 92) Size:1x1. Total: 1
GoblinManager: Cave registered at 138,92 
[GoblinManager] Clan clan_cave_138_92 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 151,98. Force:false
[Terrain] Building Added: cave at (151, 98) Size:1x1. Total: 2
GoblinManager: Cave registered at 151,98 
[GoblinManager] Clan clan_cave_151_98 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 53,60. Force:false
[Terrain] Building Added: cave at (53, 60) Size:1x1. Total: 3
GoblinManager: Cave registered at 53,60 
[GoblinManager] Clan clan_cave_53_60 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 133,136. Force:false
[Terrain] Building Added: cave at (133, 136) Size:1x1. Total: 4
GoblinManager: Cave registered at 133,136 
[GoblinManager] Clan clan_cave_133_136 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 114,133. Force:false
[Terrain] Building Added: cave at (114, 133) Size:1x1. Total: 5
GoblinManager: Cave registered at 114,133 
[GoblinManager] Clan clan_cave_114_133 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 9 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/JobPathFailure.test.js > Job Pathfinding Failure Handling > should abandon job if smartMove fails repeatedly
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 1,0 H:10 (Speed Penalty)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] forceAssignRequest FAILED for Req 101. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
Success: Job released after repeated failures.

 ç¬¨ãƒ»src/tests/JobPathFailure.test.js > Job Pathfinding Failure Handling > should abandon job if smartMove fails repeatedly 6113ms
stdout | src/tests/Unit.test.js > Unit Logic > Resource Gathering > should gather fish if checking neighbors finds water
[UnitCore.js] Unit Created ID:0 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Resource Gathering > should NOT gather fish if completely inland
[UnitCore.js] Unit Created ID:1 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should prioritize Farm and ABORT house if farm fails during famine
[UnitCore.js] Unit Created ID:2 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should prioritize Farm and ABORT house if farm fails during famine
[Unit 2] Moving onto Rock at 5,6 H:10 (Speed Penalty)
[Unit 2] Blocked by Slope at 5,6 H:1->10

stdout | src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should fallback to House if NOT in famine
[UnitCore.js] Unit Created ID:3 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should fallback to House if NOT in famine
[Unit 3] Moving onto Rock at 5,6 H:10 (Speed Penalty)
[Unit 3] Blocked by Slope at 5,6 H:1->10

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should accept role in constructor
[UnitCore.js] Unit Created ID:4 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should accept role in constructor
[UnitCore.js] Unit Created ID:5 Role:hunter Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:5 Role:hunter Pos:5,5
[UnitCore.js] Unit Created ID:6 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:5,5
[UnitCore.js] Unit Created ID:7 Role:true Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should FAIL buildFarm and IMPROVE LAND if moisture is poor (simulated)
[UnitCore.js] Unit Created ID:8 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:8 Role:worker Pos:5,5

DEBUG TEST: Moisture: 0
stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should FAIL buildFarm and IMPROVE LAND if moisture is poor (simulated)
Unit improved land at 5,5. Moisture 0.50 -> 0.50
[Unit 8] Moving onto Rock at 5,6 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 5,6 H:1->10
[Unit 8] Moving onto Rock at 6,5 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 6,5 H:1->10
[Unit 8] Moving onto Rock at 6,6 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 6,6 H:1->10
[Unit 8] Moving onto Rock at 5,6 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 5,6 H:1->10
[Unit 8] Moving onto Rock at 6,5 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 6,5 H:1->10
Unit improved land at 5,5. Moisture 0.50 -> 0.50
[Unit 8] Moving onto Rock at 5,6 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 5,6 H:1->10
[Unit 8] Moving onto Rock at 6,5 H:10 (Speed Penalty)
[Unit 8] Blocked by Slope at 6,5 H:1->10

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should succeed buildFarm if moisture is optimal
[UnitCore.js] Unit Created ID:9 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:9 Role:worker Pos:5,5

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should succeed buildFarm if moisture is optimal
[Unit 9] Moving onto Rock at 5,6 H:10 (Speed Penalty)

stdout | src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should check heights during moveRandomly
[UnitCore.js] Unit Created ID:10 Role:worker Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:10 Role:worker Pos:5,5

 ç¬¨ãƒ»src/tests/Unit.test.js > Unit Logic > Resource Gathering > should gather fish if checking neighbors finds water 15ms
 ç¬¨ãƒ»src/tests/Unit.test.js > Unit Logic > Resource Gathering > should NOT gather fish if completely inland 5ms
 ç¬¨ãƒ»src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should prioritize Farm and ABORT house if farm fails during famine 5ms
 ç¬¨ãƒ»src/tests/Unit.test.js > Unit Logic > Build Priority (Famine) > should fallback to House if NOT in famine 14ms
 ç¬¨ãƒ»src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should accept role in constructor 9ms
 ç¬¨ãƒ»src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should FAIL buildFarm and IMPROVE LAND if moisture is poor (simulated) 12ms
 ç¬¨ãƒ»src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should succeed buildFarm if moisture is optimal 3ms
 ç¬¨ãƒ»src/tests/Unit.test.js > Unit Logic > Advanced Mechanics - Unit > should check heights during moveRandomly 2ms
stdout | src/tests/Lighting.test.js > BuildingRenderer Lighting > should turn on barracks lights at night
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should set very long moveDuration for Unit on Rock
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should set normal moveDuration on Flat
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10

 ç¬¨ãƒ»src/tests/Lighting.test.js > BuildingRenderer Lighting > should turn on barracks lights at night 42ms
stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should prevent Unit from moving/building on Rock checks?
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10

stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should increase Goblin Hut population and spawn goblin
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10

stdout | src/tests/Movement.test.js > Terrain Movement and Logic Tests > should increase Goblin Hut population and spawn goblin
GoblinManager: Generation started...
GoblinManager: Cave registered at 50,50 
[GoblinManager] Clan clan_cave_50_50 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin
Goblin born from Hut! Clan: test. Global Pop: 1

 ç¬¨ãƒ»src/tests/Movement.test.js > Terrain Movement and Logic Tests > should set very long moveDuration for Unit on Rock 11ms
 ç¬¨ãƒ»src/tests/Movement.test.js > Terrain Movement and Logic Tests > should set normal moveDuration on Flat 3ms
 ç¬¨ãƒ»src/tests/Movement.test.js > Terrain Movement and Logic Tests > should prevent Unit from moving/building on Rock checks? 4ms
 ç¬¨ãƒ»src/tests/Movement.test.js > Terrain Movement and Logic Tests > should increase Goblin Hut population and spawn goblin 32ms
stdout | src/tests/StuckAndMarker.test.js > Stuck and Marker Debugging > should move IMMEDIATELY when assigned a job (no 3s delay)
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:0
[Game] Request Added: move at (50,50) ID:req_0
[Game] forceAssignRequest FOUND Unit 0 (DistSq:3200). Scanned:1
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[JobState] smartMove failed(Wait).Budget ? 0 
[JobState] Entered.Target: move.Resume: UnitWanderState 
[Game] Force-Assigned Request req_0 to Unit 0 (Score: 3200.0)
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:false isBusy:true force:true PassedGoblins:None

 ç¬¨ãƒ»src/tests/StuckAndMarker.test.js > Stuck and Marker Debugging > should move IMMEDIATELY when assigned a job (no 3s delay) 44ms
stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign a manual request to an Idle worker
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should NOT assign to a Busy worker (already working)
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Wandering worker (Low Priority)
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Moving worker (Low Priority)
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:200). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 200.0)

stdout | src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should re-assign a unit that is "Moving" to a job (Not yet Working)
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0
[Game] forceAssignRequest FOUND Unit 10 (DistSq:200). Scanned:1
[Game] forceAssignRequest FAILED for Req req_old. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 10] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 10] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Game] Force-Assigned Request req_new to Unit 10 (Score: 200.0)

 ç¬¨ãƒ»src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign a manual request to an Idle worker 29ms
 ç¬¨ãƒ»src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should NOT assign to a Busy worker (already working) 8ms
 ç¬¨ãƒ»src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Wandering worker (Low Priority) 7ms
 ç¬¨ãƒ»src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should assign to a Moving worker (Low Priority) 6ms
 ç¬¨ãƒ»src/tests/ManualAssignment.test.js > Manual Assignment Debugging > should re-assign a unit that is "Moving" to a job (Not yet Working) 4ms
stdout | src/tests/JobIdempotency.test.js > Job Assignment Idempotency > should NOT reset movement if claiming the same job twice
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 132,128. Force:false
[Terrain] Building Added: cave at (132, 128) Size:1x1. Total: 1
GoblinManager: Cave registered at 132,128 
[GoblinManager] Clan clan_cave_132_128 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 23,54. Force:false
[Terrain] Building Added: cave at (23, 54) Size:1x1. Total: 2
GoblinManager: Cave registered at 23,54 
[GoblinManager] Clan clan_cave_23_54 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 57,87. Force:false
[Terrain] Building Added: cave at (57, 87) Size:1x1. Total: 3
GoblinManager: Cave registered at 57,87 
[GoblinManager] Clan clan_cave_57_87 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 93,156. Force:false
[Terrain] Building Added: cave at (93, 156) Size:1x1. Total: 4
GoblinManager: Cave registered at 93,156 
[GoblinManager] Clan clan_cave_93_156 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 67,150. Force:false
[Terrain] Building Added: cave at (67, 150) Size:1x1. Total: 5
GoblinManager: Cave registered at 67,150 
[GoblinManager] Clan clan_cave_67_150 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 11 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

stdout | src/tests/JobIdempotency.test.js > Job Assignment Idempotency > should NOT reset movement if claiming the same job twice
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None

 ç¬¨ãƒ»src/tests/JobIdempotency.test.js > Job Assignment Idempotency > should NOT reset movement if claiming the same job twice 6725ms
stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should retry migration after 30 seconds timeout
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should retry migration after 30 seconds timeout
Unit test-migrant migrating to 50,50 (Region undefined)
Unit test-migrant (Worker) migration target invalid for build. Searching nearby...
Unit test-migrant migrating to 50,50 (Region undefined)
Unit test-migrant (Worker) migration target invalid for build. Searching nearby...

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority)
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority)
Unit test-migrant migrating to 50,50 (Region undefined)

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should stop migrating if construction succeeds
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > should stop migrating if construction succeeds
Unit test-migrant migrating to 50,50 (Region undefined)

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > DEBUG: should log blockage reasons correctly
[UnitCore.js] Unit Created ID:3 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:50,50

stdout | src/tests/MigrationImprovement.test.js > Migration Improvements > DEBUG: should log blockage reasons correctly
[Unit test-migrant] Blocked by Slope at 21,20 H:2->6

 ç¬¨ãƒ»src/tests/MigrationImprovement.test.js > Migration Improvements > should retry migration after 30 seconds timeout 15ms
 ç¬¨ãƒ»src/tests/MigrationImprovement.test.js > Migration Improvements > should interrupt migration if enemy is found (Priority) 3ms
 ç¬¨ãƒ»src/tests/MigrationImprovement.test.js > Migration Improvements > should stop migrating if construction succeeds 2ms
 ç¬¨ãƒ»src/tests/MigrationImprovement.test.js > Migration Improvements > DEBUG: should log blockage reasons correctly 2ms
 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > should consume normal amount during day 1104ms
stdout | src/tests/GoblinSpawn.test.js > Goblin Hut Spawning > should spawn goblin when hut population reaches 10
GoblinManager: Generation started...
GoblinManager: Cave registered at 38,36 
[GoblinManager] Clan clan_cave_38_36 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 51,21 
[GoblinManager] Clan clan_cave_51_21 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 18,73 
[GoblinManager] Clan clan_cave_18_73 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 33,21 
[GoblinManager] Clan clan_cave_33_21 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 36,86 
[GoblinManager] Clan clan_cave_36_86 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin

stdout | src/tests/GoblinSpawn.test.js > Goblin Hut Spawning > should spawn goblin when hut population reaches 10
Goblin born from Hut! Clan: clan_hut_10_10. Global Pop: 0

stdout | src/tests/GoblinSpawn.test.js > Goblin Hut Spawning > should NOT spawn if Global Cap is reached
GoblinManager: Generation started...
GoblinManager: Cave registered at 11,96 
[GoblinManager] Clan clan_cave_11_96 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 40,37 
[GoblinManager] Clan clan_cave_40_37 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 23,57 
[GoblinManager] Clan clan_cave_23_57 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 81,1 
[GoblinManager] Clan clan_cave_81_1 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 7,28 
[GoblinManager] Clan clan_cave_7_28 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin

 ç¬¨ãƒ»src/tests/GoblinSpawn.test.js > Goblin Hut Spawning > should spawn goblin when hut population reaches 10 22ms
 ç¬¨ãƒ»src/tests/GoblinSpawn.test.js > Goblin Hut Spawning > should NOT spawn if Global Cap is reached 16ms
stdout | src/tests/GoblinTypes.test.js > Goblin Types & Stats > should correctly spawn types based on random probability
GoblinManager: Generation started...
GoblinManager: Cave registered at 50,50 
[GoblinManager] Clan clan_cave_50_50 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Cave registered at 50,50 
GoblinManager: Generated 5 goblin caves after 5 attempts.
GoblinManager: Force spawning Debug Goblin
îžè˜ Goblin King Spawned!

 ç¬¨ãƒ»src/tests/GoblinTypes.test.js > Goblin Types & Stats > should create Goblin King with correct stats 10ms
 ç¬¨ãƒ»src/tests/GoblinTypes.test.js > Goblin Types & Stats > should create Goblin Shaman with correct stats 5ms
 ç¬¨ãƒ»src/tests/GoblinTypes.test.js > Goblin Types & Stats > should correctly spawn types based on random probability 26ms
 ç¬¨ãƒ»src/tests/GoblinTypes.test.js > Goblin Types & Stats > should use staff visual for Shaman in Renderer logic 2ms
stdout | src/tests/MultiJob.test.js > Multi-Job Juggling Verification > should NOT interrupt busy units when a new job is added
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 88,113. Force:false
[Terrain] Building Added: cave at (88, 113) Size:1x1. Total: 1
GoblinManager: Cave registered at 88,113 
[GoblinManager] Clan clan_cave_88_113 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 45,152. Force:false
[Terrain] Building Added: cave at (45, 152) Size:1x1. Total: 2
GoblinManager: Cave registered at 45,152 
[GoblinManager] Clan clan_cave_45_152 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 94,82. Force:false
[Terrain] Building Added: cave at (94, 82) Size:1x1. Total: 3
GoblinManager: Cave registered at 94,82 
[GoblinManager] Clan clan_cave_94_82 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 96,93. Force:false
[Terrain] Building Added: cave at (96, 93) Size:1x1. Total: 4
GoblinManager: Cave registered at 96,93 
[GoblinManager] Clan clan_cave_96_93 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 103,94. Force:false
[Terrain] Building Added: cave at (103, 94) Size:1x1. Total: 5
GoblinManager: Cave registered at 103,94 
[GoblinManager] Clan clan_cave_103_94 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 14 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/MultiJob.test.js > Multi-Job Juggling Verification > should NOT interrupt busy units when a new job is added
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:2
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request 101 to Unit 1 (Score: 400.0)
[Game] forceAssignRequest FOUND Unit 2 (DistSq:400). Scanned:2
[Defense Debug 2] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request 102 to Unit 2 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 2] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Request Added: build at (10,10) ID:req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2
[Game] forceAssignRequest FAILED for Req req_0. Scanned:2 (RoleSkipped:0) Busy:2 Valid:0. TotalUnits:2

 ç¬¨ãƒ»src/tests/MultiJob.test.js > Multi-Job Juggling Verification > should NOT interrupt busy units when a new job is added 7495ms
stdout | src/tests/CombatBalance.test.js > Combat Balance Simulation > Knight vs Single Goblin (1v1) - AI Logic Check
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0
[CombatBalance Mock Check] [
  [32m'soundManager'[39m,
  [32m'inputManager'[39m,
  [32m'goblinManager'[39m,
  [32m'reportGlobalBattle'[39m,
  [32m'findBestRequest'[39m,
  [32m'claimRequest'[39m
]
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:1
[Unit Debug] ATTACKING Goblin 0
Goblin (normal) died. ID:0
[AI CHECK] KnightAction: Fighting GoblinHP: -66

stdout | src/tests/CombatBalance.test.js > Combat Balance Simulation > Wizard vs Single Goblin (1v1) - Wizard should win
[UnitCore.js] Unit Created ID:1 Role:wizard Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:wizard Pos:0,0
[Unit Debug] ATTACKING Goblin 1
Goblin (normal) died. ID:1

stdout | src/tests/CombatBalance.test.js > Combat Balance Simulation > Knight vs Swarm (1v5) - Knight should surviving
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0
[Unit Debug] ATTACKING Goblin g0
Goblin (normal) died. ID:g0
[Unit Debug] ATTACKING Goblin g1
Goblin (normal) died. ID:g1
[Unit Debug] ATTACKING Goblin g2
Goblin (normal) died. ID:g2
[Unit Debug] ATTACKING Goblin g3
Goblin (normal) died. ID:g3
[Unit Debug] ATTACKING Goblin g4
Goblin (normal) died. ID:g4

stdout | src/tests/CombatBalance.test.js > Combat Balance Simulation > Load Game Persistence - Should resume movement
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0
[Unit 3] Moving onto Rock at 0,1 H:10 (Speed Penalty)
[Defense Debug 3] shouldScan:true isBusy:false force:false PassedGoblins:0
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,1 Special:false
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,1
[Defense Debug 4] shouldScan:true isBusy:false force:false PassedGoblins:0

 ç¬¨ãƒ»src/tests/CombatBalance.test.js > Combat Balance Simulation > Knight vs Single Goblin (1v1) - AI Logic Check 15ms
 ç¬¨ãƒ»src/tests/CombatBalance.test.js > Combat Balance Simulation > Wizard vs Single Goblin (1v1) - Wizard should win 3ms
 ç¬¨ãƒ»src/tests/CombatBalance.test.js > Combat Balance Simulation > Knight vs Swarm (1v5) - Knight should surviving 4ms
 ç¬¨ãƒ»src/tests/CombatBalance.test.js > Combat Balance Simulation > Load Game Persistence - Should resume movement 5ms
stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should immediately stop unit when job is cancelled mid-approach
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 71,157. Force:false
[Terrain] Building Added: cave at (71, 157) Size:1x1. Total: 1
GoblinManager: Cave registered at 71,157 
[GoblinManager] Clan clan_cave_71_157 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 81,66. Force:false
[Terrain] Building Added: cave at (81, 66) Size:1x1. Total: 2
GoblinManager: Cave registered at 81,66 
[GoblinManager] Clan clan_cave_81_66 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 30,132. Force:false
[Terrain] Building Added: cave at (30, 132) Size:1x1. Total: 3
GoblinManager: Cave registered at 30,132 
[GoblinManager] Clan clan_cave_30_132 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 155,155. Force:false
[Terrain] Building Added: cave at (155, 155) Size:1x1. Total: 4
GoblinManager: Cave registered at 155,155 
[GoblinManager] Clan clan_cave_155_155 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 118,96. Force:false
[Terrain] Building Added: cave at (118, 96) Size:1x1. Total: 5
GoblinManager: Cave registered at 118,96 
[GoblinManager] Clan clan_cave_118_96 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 18 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should immediately stop unit when job is cancelled mid-approach
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
[Game] Cancelling active job for Unit 1
[Game] forceAssignRequest FOUND Unit 1 (DistSq:0). Scanned:1
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 0.0)
[Game] Request Canceled at 20,0 (Target: 20,0)
DEBUG: TargetRequest: [1mnull[22m
DEBUG: Queue Length: [33m0[39m

 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should return different colors for seasons 1131ms
 ç¬¨ãƒ»src/tests/Terrain.test.js > Terrain Logic > Advanced Mechanics > Seasonal Colors > should keep rock color even if dry (desert override check) 1212ms
stdout | src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should NOT snap back when arriving at a job during mid-move
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should NOT snap back when arriving at a job during mid-move
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[JobState] smartMove failed(Wait).Budget ? undefined 
[JobState] Entered.Target: build.Resume: UnitWanderState 
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None

stdout | src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should use visual position for chaining the next job
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0

stdout | src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should use visual position for chaining the next job
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
[DEBUG] Calling updateLogic...
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:1
[Unit 0] Moving onto Rock at 1,0 H:10 (Speed Penalty)
[DEBUG] updateLogic finished.
[DEBUG] Targets: G=g1, B=undefined

 ç¬¨ãƒ»src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should NOT snap back when arriving at a job during mid-move 15ms
 ç¬¨ãƒ»src/tests/RubberBanding.test.js > Rubber-banding and Chaining Verification > should use visual position for chaining the next job 12ms
stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are very close (Siege Mode)
[UnitCore.js] Unit Created ID:1 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are very close (Siege Mode)
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0
[Defense Debug 2] shouldScan:true isBusy:false force:false PassedGoblins:1
[Unit 2] Moving onto Rock at 1,0 H:10 (Speed Penalty)

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should NOT auto-target distant Huts (Workers are passive)
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should NOT auto-target distant Huts (Workers are passive)
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:0,0
[Defense Debug 4] shouldScan:true isBusy:false force:false PassedGoblins:0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should auto-target CLOSE Huts for self-defense (Workers)
[UnitCore.js] Unit Created ID:5 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:5 Role:knight Pos:0,0

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should auto-target CLOSE Huts for self-defense (Workers)
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0
[Defense Debug 6] shouldScan:true isBusy:false force:false PassedGoblins:0
[Unit 6] Moving onto Rock at 1,0 H:10 (Speed Penalty)

 ç¬¨ãƒ»src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building 14ms
 ç¬¨ãƒ»src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are very close (Siege Mode) 6ms
 ç¬¨ãƒ»src/tests/TargetingPriority.test.js > Unit Targeting Priority > should NOT auto-target distant Huts (Workers are passive) 3ms
 ç¬¨ãƒ»src/tests/TargetingPriority.test.js > Unit Targeting Priority > should auto-target CLOSE Huts for self-defense (Workers) 4ms
stdout | src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario A: Worker destroys Cave
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 11,10 H:10 (Speed Penalty)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
Approach Point: 11,10
Cave HP: 196 (Was: 200)

stdout | src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario B: Goblin destroys House
Goblin 0 SPAWNED FOR RAIDING! Target: NaN,NaN
[Goblin 0] ENTER RaidState. Goal: NaN,NaN
[MockTerrain] Searching 1 buildings. Range:25 Center:20,20
  - Checking Building at 22,20. Dist:2
    -> Score: 2
Goblin 0 attacking house. Pop: 1.92
Goblin 0 attacking house. Pop: 1.84
House Pop: 1.8399999999999999

stdout | src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario C: Goblin finds and destroys House
[MockTerrain] Searching 1 buildings. Range:12 Center:8,8
  - Checking Building at 10,10. Dist:2.8284271247461903
    -> Score: 2.8284271247461903
Goblin 1 hitting Empty house. HP: 92
Goblin 1 hitting Empty house. HP: 84
[Test] House HP reduced to 84

 ç¬¨ãƒ»src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario A: Worker destroys Cave 18ms
 ç¬¨ãƒ»src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario B: Goblin destroys House 8ms
 ç¬¨ãƒ»src/tests/CombatVerification.test.js > Combat Logic Verification > Scenario C: Goblin finds and destroys House 3ms
stdout | src/tests/UnitMigration.test.js > Unit Migration Logic > should return true on successful build
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:50,50

stdout | src/tests/UnitMigration.test.js > Unit Migration Logic > should increment stagnation on failed build
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50

stdout | src/tests/UnitMigration.test.js > Unit Migration Logic > should migrate after 20 seconds of stagnation
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:50,50

stdout | src/tests/UnitMigration.test.js > Unit Migration Logic > should migrate after 20 seconds of stagnation
Unit 1 migrating to 51,51 (Region 1)

 ç¬¨ãƒ»src/tests/UnitMigration.test.js > Unit Migration Logic > should return true on successful build 12ms
 ç¬¨ãƒ»src/tests/UnitMigration.test.js > Unit Migration Logic > should increment stagnation on failed build 5ms
 ç¬¨ãƒ»src/tests/UnitMigration.test.js > Unit Migration Logic > should migrate after 20 seconds of stagnation 4ms
stdout | src/tests/SquadAi.test.js > Squad AI & Region Logic > should share targets among squad members
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10
[UnitCore.js] Unit Created ID:1 Role:knight Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:1 Role:knight Pos:20,20

stdout | src/tests/SquadAi.test.js > Squad AI & Region Logic > Regression: Migration Stagnation Fix (Knight)
[UnitCore.js] Unit Created ID:2 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:knight Pos:10,10
Unit 2 (knight) finished migrating. Resuming Idle.

stdout | src/tests/SquadAi.test.js > Squad AI & Region Logic > Regression: Migration Stagnation Fix (Worker)
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10
Unit 3 (Worker) migration target invalid for build. Searching nearby...

stdout | src/tests/SquadAi.test.js > Squad AI & Region Logic > should allow cross-region movement if target is very close (Self Defense)
[UnitCore.js] Unit Created ID:4 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:4 Role:knight Pos:10,10

 ç¬¨ãƒ»src/tests/SquadAi.test.js > Squad AI & Region Logic > should register a squad and assign valid ID 5ms
 ç¬¨ãƒ»src/tests/SquadAi.test.js > Squad AI & Region Logic > should share targets among squad members 8ms
 ç¬¨ãƒ»src/tests/SquadAi.test.js > Squad AI & Region Logic > Regression: Migration Stagnation Fix (Knight) 2ms
 ç¬¨ãƒ»src/tests/SquadAi.test.js > Squad AI & Region Logic > Regression: Migration Stagnation Fix (Worker) 5ms
 ç¬¨ãƒ»src/tests/SquadAi.test.js > Squad AI & Region Logic > should allow cross-region movement if target is very close (Self Defense) 2ms
stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should damage building population
Goblin 0 attacking house. Pop: 9.92

stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should destroy building when Population AND HP are depleted
Goblin 1 attacking house. Pop: 0.00
Goblin 1 hitting Empty house. HP: -5
Goblin 1 destroyed house!

stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should destroy building even if fractional population remains (e.g. 0.5)
Goblin 2 attacking house. Pop: 0.00
Goblin 2 hitting Empty house. HP: -5
Goblin 2 destroyed house!

stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should NOT destroy building if population remains >= 1.0
Goblin 3 attacking house. Pop: 6.92

stdout | src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should take retaliation damage
Goblin 4 attacking house. Pop: 19.92

 ç¬¨ãƒ»src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should damage building population 12ms
 ç¬¨ãƒ»src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should destroy building when Population AND HP are depleted 5ms
 ç¬¨ãƒ»src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should destroy building even if fractional population remains (e.g. 0.5) 2ms
 ç¬¨ãƒ»src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should NOT destroy building if population remains >= 1.0 1ms
 ç¬¨ãƒ»src/tests/GoblinDestruction.test.js > Goblin Building Destruction > should take retaliation damage 2ms
stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should handle basic Unit update without crash
[UnitCore.js] Unit Created ID:0 Role:worker Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:20,20

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should handle basic Unit update without crash
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:None

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should NOT allow WanderState to interfere with Migration Movement
[UnitCore.js] Unit Created ID:1 Role:worker Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:20,20

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should NOT allow WanderState to interfere with Migration Movement
Unit 1 migrating to 30,30 (Region 1)

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should allow Migration Logic to control repeated movement
[UnitCore.js] Unit Created ID:2 Role:worker Pos:20,20 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:20,20

stdout | src/tests/ManaSystem.test.js > Mana System > InputManager Integration > should consume mana on raise terrain
[Input] Request Queued: Raise at 0,0

stdout | src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should allow Migration Logic to control repeated movement
Unit 2 migrating to 30,30 (Region 1)
[Defense Debug 2] shouldScan:true isBusy:false force:true PassedGoblins:None
[Defense Debug 2] shouldScan:true isBusy:false force:true PassedGoblins:None
[Defense Debug 2] shouldScan:true isBusy:false force:true PassedGoblins:None
Unit 2 (Worker) migration target invalid for build. Searching nearby...

 ç¬¨ãƒ»src/tests/ManaSystem.test.js > Mana System > should block actions when mana is negative 3ms
 ç¬¨ãƒ»src/tests/ManaSystem.test.js > Mana System > should allow actions when mana is positive 1ms
 ç¬¨ãƒ»src/tests/ManaSystem.test.js > Mana System > should consume mana correctly 3ms
 ç¬¨ãƒ»src/tests/ManaSystem.test.js > Mana System > InputManager Integration > should consume mana on raise terrain 10ms
 ç¬¨ãƒ»src/tests/ManaSystem.test.js > Mana System > InputManager Integration > should block raise terrain if mana is negative 3ms
 ç¬¨ãƒ»src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should handle basic Unit update without crash 11ms
 ç¬¨ãƒ»src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should NOT allow WanderState to interfere with Migration Movement 4ms
 ç¬¨ãƒ»src/tests/MigrationConflict.test.js > Migration Conflict Regression (Jitabata Bug) > should allow Migration Logic to control repeated movement 8ms
stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit finds and claims request when idle
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit finds and claims request when idle
[Defense Debug worker_1] shouldScan:true isBusy:false force:false PassedGoblins:None
[Defense Debug worker_1] shouldScan:false isBusy:true force:false PassedGoblins:None

stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit moves to target request
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit moves to target request
[Defense Debug worker_1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug worker_1] shouldScan:false isBusy:true force:false PassedGoblins:None

stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit completes request upon arrival
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0

stdout | src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit completes request upon arrival
[Defense Debug worker_1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Defense Debug worker_1] shouldScan:false isBusy:true force:false PassedGoblins:None

 ç¬¨ãƒ»src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit finds and claims request when idle 16ms
 ç¬¨ãƒ»src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit moves to target request 3ms
 ç¬¨ãƒ»src/tests/WorkerRequest.test.js > Worker Job Logic (Unit.js + States) > Unit completes request upon arrival 6ms
stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Patrol for Knight/Wizard when idle
[UnitCore.js] Unit Created ID:0 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Wander for Worker when idle
[UnitCore.js] Unit Created ID:1 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Combat when targetGoblin is set
[UnitCore.js] Unit Created ID:2 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Siege when targetBuilding is set
[UnitCore.js] Unit Created ID:3 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Working when targetRequest is set
[UnitCore.js] Unit Created ID:4 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Patrolling with coords when targetRaidPoint is set
[UnitCore.js] Unit Created ID:5 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:5 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Migrating when action is Migrating
[UnitCore.js] Unit Created ID:6 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:5,5

stdout | src/tests/UnitBehavior.test.js > Unit Behavior Mode > should prioritize Combat over Exploration
[UnitCore.js] Unit Created ID:7 Role:undefined Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:5,5

 ç¬¨ãƒ»src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Patrol for Knight/Wizard when idle 8ms
 ç¬¨ãƒ»src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Wander for Worker when idle 2ms
 ç¬¨ãƒ»src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Combat when targetGoblin is set 2ms
 ç¬¨ãƒ»src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Siege when targetBuilding is set 1ms
 ç¬¨ãƒ»src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Working when targetRequest is set 2ms
 ç¬¨ãƒ»src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Patrolling with coords when targetRaidPoint is set 1ms
 ç¬¨ãƒ»src/tests/UnitBehavior.test.js > Unit Behavior Mode > should return Migrating when action is Migrating 1ms
 ç¬¨ãƒ»src/tests/UnitBehavior.test.js > Unit Behavior Mode > should prioritize Combat over Exploration 1ms
stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should initialize with age 20
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should increment age when updateLogic is called
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should increment age when updateLogic is called
[Defense Debug 1] shouldScan:true isBusy:false force:false PassedGoblins:0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should die when age exceeds lifespan
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should age slower for Knights and Wizards (0.02 rate)
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should age slower for Knights and Wizards (0.02 rate)
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:4 Role:knight Pos:0,0
[UnitCore.js] Unit Created ID:5 Role:wizard Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:5 Role:wizard Pos:0,0
[Defense Debug 4] shouldScan:true isBusy:false force:false PassedGoblins:0
[Defense Debug 5] shouldScan:true isBusy:false force:false PassedGoblins:0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should have longer lifespan for Special units
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:6 Role:worker Pos:0,0

stdout | src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should have longer lifespan for Special units
[UnitCore.js] Unit Created ID:7 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:0,0

 ç¬¨ãƒ»src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should initialize with age 20 7ms
 ç¬¨ãƒ»src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should increment age when updateLogic is called 4ms
 ç¬¨ãƒ»src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should die when age exceeds lifespan 1ms
 ç¬¨ãƒ»src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should age slower for Knights and Wizards (0.02 rate) 3ms
 ç¬¨ãƒ»src/tests/UnitLifecycle.test.js > Unit Lifecycle and Aging > should have longer lifespan for Special units 1ms
stdout | src/tests/UnitSnatch.test.js > Unit Snatching and Race Conditions > should stop and wander if another unit snatches its job
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 0] Moving onto Rock at 11,10 H:10 (Speed Penalty)
[JobState] smartMove failed(Wait).Budget ? undefined 
[JobState] Entered.Target: build.Resume: UnitWanderState 
[Unit.js] ENTERED updateLogic. Dead=false
[JobState] Ownership LOST for Job job1.Someone snatched it or it was unassigned.Switching to Wander.

stdout | src/tests/UnitSnatch.test.js > Unit Snatching and Race Conditions > should stop if the job is completed by someone else
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Defense Debug 0] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 0] Moving onto Rock at 11,10 H:10 (Speed Penalty)
[JobState] smartMove failed(Wait).Budget ? undefined 
[JobState] Entered.Target: build.Resume: UnitWanderState 
[Unit.js] ENTERED updateLogic. Dead=false
[JobState] Job job1 is completed.Resuming.

 ç¬¨ãƒ»src/tests/UnitSnatch.test.js > Unit Snatching and Race Conditions > should stop and wander if another unit snatches its job 13ms
 ç¬¨ãƒ»src/tests/UnitSnatch.test.js > Unit Snatching and Race Conditions > should stop if the job is completed by someone else 4ms
stdout | src/tests/UnitAISearch.test.js > Unit AI Search Optimization > should use Spatial Search to find goblin
[UnitCore.js] Unit Created ID:0 Role:guard Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:guard Pos:0,0

 ç¬¨ãƒ»src/tests/UnitAISearch.test.js > Unit AI Search Optimization > should use Spatial Search to find goblin 14ms
 ç¬¨ãƒ»src/tests/UnitAISearch.test.js > Unit AI Search Optimization > should find Base using Spatial Search 5ms
stdout | src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn diverse roles (Worker/Hunter/Fisher) from a House
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:1 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:2 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:hunter Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:3 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:3 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:4 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:4 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:5 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:5 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:6 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:6 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:7 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:7 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:8 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:8 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:9 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:9 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:10 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:10 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:11 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:11 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:12 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:12 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:13 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:13 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:14 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:14 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:15 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:15 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:16 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:16 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:17 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:17 Role:hunter Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:18 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:18 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:19 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:19 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:20 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:20 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:21 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:21 Role:hunter Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:22 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:22 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:23 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:23 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:24 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:24 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:25 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:25 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:26 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:26 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:27 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:27 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:28 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:28 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:29 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:29 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:30 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:30 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:31 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:31 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:32 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:32 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:33 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:33 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:34 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:34 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:35 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:35 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:36 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:36 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:37 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:37 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:38 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:38 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:39 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:39 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:40 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:40 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:41 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:41 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:42 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:42 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:43 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:43 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:44 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:44 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:45 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:45 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:46 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:46 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:47 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:47 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:48 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:48 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:49 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:49 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:50 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:50 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:51 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:51 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:52 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:52 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:53 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:53 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:54 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:54 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:55 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:55 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:56 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:56 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:57 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:57 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:58 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:58 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:59 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:59 Role:fisher Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:60 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:60 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:61 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:61 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:62 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:62 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:63 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:63 Role:fisher Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:64 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:64 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:65 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:65 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:66 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:66 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:67 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:67 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:68 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:68 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:69 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:69 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:70 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:70 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:71 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:71 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:72 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:72 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:73 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:73 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:74 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:74 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:75 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:75 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:76 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:76 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:77 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:77 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:78 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:78 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:79 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:79 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:80 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:80 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:81 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:81 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:82 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:82 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:83 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:83 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:84 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:84 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:85 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:85 Role:hunter Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:86 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:86 Role:fisher Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:87 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:87 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:88 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:88 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:89 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:89 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:90 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:90 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:91 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:91 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:92 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:92 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:93 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:93 Role:worker Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:94 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:94 Role:worker Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:95 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:95 Role:hunter Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:96 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:96 Role:hunter Pos:10,10
Spawned worker linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:97 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:97 Role:worker Pos:10,10
Spawned fisher linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:98 Role:fisher Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:98 Role:fisher Pos:10,10
Spawned hunter linked to house at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:99 Role:hunter Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:99 Role:hunter Pos:10,10
Spawn Distribution (100 runs): { worker: [33m55[39m, hunter: [33m31[39m, fisher: [33m14[39m }

stdout | src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn Knights from Barracks
Spawned knight linked to barracks at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:100 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:100 Role:knight Pos:10,10

stdout | src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn Wizards from Towers
Spawned wizard linked to tower at 10,10 SquadID:null
[UnitCore.js] Unit Created ID:101 Role:wizard Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:101 Role:wizard Pos:10,10

 ç¬¨ãƒ»src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn diverse roles (Worker/Hunter/Fisher) from a House 22ms
 ç¬¨ãƒ»src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn Knights from Barracks 2ms
 ç¬¨ãƒ»src/tests/WorkerDiversity.test.js > Worker Diversity Spawning > should spawn Wizards from Towers 1ms
stdout | src/tests/ForceAssignment.test.js > Force Assignment Integration > should successfully triggerMove without infinite loop
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

stdout | src/tests/ForceAssignment.test.js > Force Assignment Integration > should handle Force Assignment logic block
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10

 ç¬¨ãƒ»src/tests/MovementReset.test.js > Actor Movement Reset > should NOT reset movement timer when calling smartMove frequently for the same target 7ms
 ç¬¨ãƒ»src/tests/MovementReset.test.js > Actor Movement Reset > should progress visually even with frequent smartMove calls 11ms
 ç¬¨ãƒ»src/tests/ForceAssignment.test.js > Force Assignment Integration > should successfully triggerMove without infinite loop 12ms
 ç¬¨ãƒ»src/tests/ForceAssignment.test.js > Force Assignment Integration > should handle Force Assignment logic block 4ms
stdout | src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should move normally for short distances
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should wrap LEFT if target is across right boundary
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

stdout | src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should wrap RIGHT if target is across left boundary
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0

stdout | src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should handle Z axis wrapping
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:0,0

 ç¬¨ãƒ»src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should move normally for short distances 8ms
 ç¬¨ãƒ»src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should wrap LEFT if target is across right boundary 2ms
 ç¬¨ãƒ»src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should wrap RIGHT if target is across left boundary 2ms
 ç¬¨ãƒ»src/tests/UnitWrapping.test.js > Unit Movement Wrapping > should handle Z axis wrapping 4ms
 ç¬¨ãƒ»src/tests/CombatFixes.test.js > Combat and Logic Fixes > should find target goblin 12ms
stdout | src/tests/NightLogic.test.js > Night Logic - Shelter Entry > Worker should engage pathfinding to House but is likely blocked
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,0
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:0
[SleepState] Entering Sleep logic.
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:None
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:None

 ç¬¨ãƒ»src/tests/NightLogic.test.js > Night Logic - Shelter Entry > Worker should engage pathfinding to House but is likely blocked 13ms
stdout | src/tests/CavePersistence.test.js > GoblinManager Cave Persistence > should update cave Y position when terrain height changes
[GoblinRenderer] Updating 0 goblins.

stdout | src/tests/CavePersistence.test.js > GoblinManager Cave Persistence > should destroy cave if submerged (height <= 0)
[GoblinManager] Cave destroyed: SUBMERGED(H = -1)
[GoblinRenderer] Updating 0 goblins.

 ç¬¨ãƒ»src/tests/CavePersistence.test.js > GoblinManager Cave Persistence > should update cave Y position when terrain height changes 10ms
 ç¬¨ãƒ»src/tests/CavePersistence.test.js > GoblinManager Cave Persistence > should destroy cave if submerged (height <= 0) 3ms
 ç¬¨ãƒ»src/tests/GoblinStats.test.js > Goblin Stats Verification > Normal Goblin should have sufficient lifespan and speed 8ms
 ç¬¨ãƒ»src/tests/GoblinStats.test.js > Goblin Stats Verification > King Goblin should be long lived 3ms
stdout | src/tests/UnitInit.test.js > Unit Initialization and Movement Start > should NOT freeze if started at time 0
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:0
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:0
Debug Unit Action after 6s: Moving

stdout | src/tests/UnitInit.test.js > Unit Initialization and Movement Start > should NOT freeze if started at time 0
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:0
[Unit.js] ENTERED updateLogic. Dead=false
[Defense Debug 0] shouldScan:true isBusy:false force:false PassedGoblins:0

 ç¬¨ãƒ»src/tests/UnitInit.test.js > Unit Initialization and Movement Start > should NOT freeze if started at time 0 13ms
stdout | src/tests/AdvancedUnits.test.js > Advanced Units > should initialize Knight with high stats
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10

stdout | src/tests/AdvancedUnits.test.js > Advanced Units > should initialize Wizard with low HP and high stats
[UnitCore.js] Unit Created ID:1 Role:wizard Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:wizard Pos:10,10

stdout | src/tests/AdvancedUnits.test.js > Advanced Units > should allow Wizard to attack from range
[UnitCore.js] Unit Created ID:2 Role:wizard Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:wizard Pos:10,10
[Unit Debug] ATTACKING Goblin g1

 ç¬¨ãƒ»src/tests/AdvancedUnits.test.js > Advanced Units > should initialize Knight with high stats 7ms
 ç¬¨ãƒ»src/tests/AdvancedUnits.test.js > Advanced Units > should initialize Wizard with low HP and high stats 2ms
 ç¬¨ãƒ»src/tests/AdvancedUnits.test.js > Advanced Units > should allow Wizard to attack from range 2ms
 ç¬¨ãƒ»src/tests/JobAssignment.test.js > Job Assignment & Continuation > should release old job when a new job is claimed (Sequential assignment) 5ms
 ç¬¨ãƒ»src/tests/JobAssignment.test.js > Job Assignment & Continuation > should continue to the next nearby job after completing current one (Chaining) 2ms
 ç¬¨ãƒ»src/tests/JobAssignment.test.js > Job Assignment & Continuation > should properly interrupt and change state if a job is snatched by another unit 2ms
 ç¬¨ãƒ»src/tests/WanderBehavior.test.js > Wander Behavior Verification > UnitWanderState should trigger moveRandomly after interval 7ms
 ç¬¨ãƒ»src/tests/WanderBehavior.test.js > Wander Behavior Verification > GoblinWanderState should also wander and scan for targets 2ms
stdout | src/tests/ShorelineLoop.test.js > Shoreline Loop Reproduction > should NOT target unrelated region goblin via findTargetGoblin
[UnitCore.js] Unit Created ID:0 Role:soldier Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:0 Role:soldier Pos:5,5

stdout | src/tests/ShorelineLoop.test.js > Shoreline Loop Reproduction > should NOT target land goblin when unit is in water (Region 0)
[UnitCore.js] Unit Created ID:1 Role:soldier Pos:5,5 Special:false
[UnitCore.js] Unit Created ID:1 Role:soldier Pos:5,5

 ç¬¨ãƒ»src/tests/ShorelineLoop.test.js > Shoreline Loop Reproduction > should NOT target unrelated region goblin via findTargetGoblin 7ms
 ç¬¨ãƒ»src/tests/ShorelineLoop.test.js > Shoreline Loop Reproduction > should NOT target land goblin when unit is in water (Region 0) 1ms
stdout | src/tests/ReproductionJitabata.test.js > Jitabata Bug Reproduction (Interrupt Loop) > should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:10,10

stdout | src/tests/ReproductionJitabata.test.js > Jitabata Bug Reproduction (Interrupt Loop) > should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration
[Unit.js] ENTERED updateLogic. Dead=false
[Test] Frame 1 Post-logic isMoving: true, action: Migrating
[Unit.js] ENTERED updateLogic. Dead=false
[Test] Frame 2 Post-logic isMoving: true, action: Migrating

 ç¬¨ãƒ»src/tests/ReproductionJitabata.test.js > Jitabata Bug Reproduction (Interrupt Loop) > should NOT trigger Jitabata (Stop-and-Go) when a distant Raid Point appears during Migration 13ms
stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should pickup NEXT job if current is cancelled
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 138,43. Force:false
[Terrain] Building Added: cave at (138, 43) Size:1x1. Total: 1
GoblinManager: Cave registered at 138,43 
[GoblinManager] Clan clan_cave_138_43 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 66,93. Force:false
[Terrain] Building Added: cave at (66, 93) Size:1x1. Total: 2
GoblinManager: Cave registered at 66,93 
[GoblinManager] Clan clan_cave_66_93 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 57,96. Force:false
[Terrain] Building Added: cave at (57, 96) Size:1x1. Total: 3
GoblinManager: Cave registered at 57,96 
[GoblinManager] Clan clan_cave_57_96 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 12,1. Force:false
[Terrain] Building Added: cave at (12, 1) Size:1x1. Total: 4
GoblinManager: Cave registered at 12,1 
[GoblinManager] Clan clan_cave_12_1 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 82,7. Force:false
[Terrain] Building Added: cave at (82, 7) Size:1x1. Total: 5
GoblinManager: Cave registered at 82,7 
[GoblinManager] Clan clan_cave_82_7 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 11 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

 ç¬¨ãƒ»src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should immediately stop unit when job is cancelled mid-approach 8165ms
stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should pickup NEXT job if current is cancelled
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Game] Request Added: build at (-20,0) ID:req_1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
[Game] Cancelling active job for Unit 1
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1
[Game] Request Canceled at 20,0 (Target: 20,0)
[Unit 1] Moving onto Rock at 18,0 H:10 (Speed Penalty)

stdout | src/tests/MinimalUnit.test.js > Minimal Unit Sanity > can instantiate Unit
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0

 ç¬¨ãƒ»src/tests/MinimalUnit.test.js > Minimal Unit Sanity > can instantiate Unit 4ms
stdout | src/tests/WrapDistance.test.js > Unit Distance Wrap Logic > should calculate short distance across wrap (0,0 -> 79,0)
[UnitCore.js] Unit Created ID:0 Role:undefined Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:0,0

stdout | src/tests/WrapDistance.test.js > Unit Distance Wrap Logic > should calculate diagonal wrap correctly (0,0 -> 79,79)
[UnitCore.js] Unit Created ID:1 Role:undefined Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:0,0

 ç¬¨ãƒ»src/tests/WrapDistance.test.js > Unit Distance Wrap Logic > should calculate short distance across wrap (0,0 -> 79,0) 8ms
 ç¬¨ãƒ»src/tests/WrapDistance.test.js > Unit Distance Wrap Logic > should calculate diagonal wrap correctly (0,0 -> 79,79) 2ms
 ç¬¨ãƒ»src/tests/SquadMemory.test.js > Squad-Based Memory (Decoupled) > should link manually spawned units to nearby barracks 3ms
 ç¬¨ãƒ»src/tests/SquadMemory.test.js > Squad-Based Memory (Decoupled) > should report enemy immediately on hit 2ms
 ç¬¨ãƒ»src/tests/Minimal.test.js > Minimal Test > should pass 2ms
stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived)
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:0,0
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
[Terrain] addBuilding: cave at 37,158. Force:false
[Terrain] Building Added: cave at (37, 158) Size:1x1. Total: 1
GoblinManager: Cave registered at 37,158 
[GoblinManager] Clan clan_cave_37_158 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 12,14. Force:false
[Terrain] Building Added: cave at (12, 14) Size:1x1. Total: 2
GoblinManager: Cave registered at 12,14 
[GoblinManager] Clan clan_cave_12_14 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 132,37. Force:false
[Terrain] Building Added: cave at (132, 37) Size:1x1. Total: 3
GoblinManager: Cave registered at 132,37 
[GoblinManager] Clan clan_cave_132_37 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 4,142. Force:false
[Terrain] Building Added: cave at (4, 142) Size:1x1. Total: 4
GoblinManager: Cave registered at 4,142 
[GoblinManager] Clan clan_cave_4_142 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
[Terrain] addBuilding: cave at 33,49. Force:false
[Terrain] Building Added: cave at (33, 49) Size:1x1. Total: 5
GoblinManager: Cave registered at 33,49 
[GoblinManager] Clan clan_cave_33_49 ACTIVATED! Wave 1 in 30s. Target: [1mnull[22m
GoblinManager: Generated 5 goblin caves after 16 attempts.
GoblinManager: Force spawning Debug Goblin
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.
Tower Geometry Initialized (Split Mode)
Tower Debug: Generated High-Res Tower Texture + Cap Material

 ç¬¨ãƒ»src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should pickup NEXT job if current is cancelled 4556ms
stdout | src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived)
[Game] Request Added: build at (20,0) ID:req_0
[Game] forceAssignRequest FOUND Unit 1 (DistSq:400). Scanned:1
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Game] Force-Assigned Request req_0 to Unit 1 (Score: 400.0)
[Defense Debug 1] shouldScan:false isBusy:true force:false PassedGoblins:None
[Unit 1] Moving onto Rock at 19,0 H:10 (Speed Penalty)
[Game] Unit 1 completing Request build at 20,0

 ç¬¨ãƒ»src/tests/ComplexInteraction.test.js > Complex Job Interaction and Cancellation > should handle cancellation while Working (arrived) 2262ms

 Test Files  63 passed (63)
      Tests  185 passed (185)
   Start at  02:15:45
   Duration  18.00s (transform 5.55s, setup 2.54s, import 15.82s, tests 66.71s, environment 96.11s)

