
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90mC:/Users/mooya/develop/test[39m

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould immediately switch to JobState and target the job upon assignment
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould immediately switch to JobState and target the job upon assignment
[22m[39m[Test] Assigning request...
[JobState] Entered. Target: lower. ResumeCtx: Approaching Job
[Test] Update Frame 1...

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould immediately switch to JobState and target the job upon assignment
[22m[39m[Test] Unit Moving? true Target: 50,10

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould NOT be distracted by WanderState updates during Job
[22m[39m[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould NOT be distracted by WanderState updates during Job
[22m[39m[JobState] Entered. Target: lower. ResumeCtx: Idle

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould not freeze due to throttle at low game time
[22m[39m[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould not freeze due to throttle at low game time
[22m[39m[JobState] Entered. Target: raise. ResumeCtx: Idle

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould not freeze due to throttle at low game time
[22m[39m[LowTimeTest] Moving? true State: JobState

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould NOT Ping-Pong between two manual requests
[22m[39m[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:3 Role:worker Pos:10,10

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould NOT Ping-Pong between two manual requests
[22m[39m[JobState] Entered. Target: lower. ResumeCtx: Idle
[PingPong] Unit Busy with Manual? true
[PingPong] New Req Manual? true
[PingPong] Calculated Penalty: 1000

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould NOT build a house immediately if pathfinding fails temporarily
[22m[39m[UnitCore.js] Unit Created ID:4 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:4 Role:worker Pos:10,10

stderr | src/tests/WorkerDistraction.test.js > Worker Distraction Investigation > should NOT build a house immediately if pathfinding fails temporarily
[JobState 0] ABORTING JOB req_3. Reason: Fail:1, Stuck:0, Unreach:true. Ignore Expiry: 160

[90mstdout[2m | src/tests/WorkerDistraction.test.js[2m > [22m[2mWorker Distraction Investigation[2m > [22m[2mshould NOT build a house immediately if pathfinding fails temporarily
[22m[39m[JobState] Entered. Target: lower. ResumeCtx: Idle
[JobState DEBUG] ABORTING. Moved:false Fail:1 Unreach:true Stuck:0

 [32mç¬¨ãƒ»[39m src/tests/WorkerDistraction.test.js [2m([22m[2m5 tests[22m[2m)[22m[32m 50[2mms[22m[39m
[90mstdout[2m | src/tests/StuckReassignment.test.js[2m > [22m[2mStuck/Throttled Job Reassignment[2m > [22m[2mshould release job if throttled and not moving for 45s
[22m[39mScene created: [33mtrue[39m Pos: object
Camera created: [33mtrue[39m Pos: object
Camera setup done
SheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/ComplexAI.test.js[2m > [22m[2mComplex AI Scenarios[2m > [22m[2mshould drop job gracefully if target building is destroyed
[22m[39mSheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/ComplexAI.test.js[2m > [22m[2mComplex AI Scenarios[2m > [22m[2mshould drop job gracefully if target building is destroyed
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Game] Request Added: cultivate at (20,20) ID:req_0
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Idle, TargetReq: none
[Game] forceAssignRequest FOUND Unit 0 (DistSq:200). Scanned:1
[JobState] Entered. Target: cultivate. ResumeCtx: Approaching Job
[Game] Request req_0 assigned/switched to Unit 0
[JobState 0] Target building destroyed. Releasing job.
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Approaching Job, TargetReq: req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1

stderr | src/tests/StuckReassignment.test.js > Stuck/Throttled Job Reassignment > should release job if throttled and not moving for 45s
[JobState 0] STUCK TIMEOUT. Aborting.
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 116
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 117
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 118
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 119
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 120
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 121
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 122
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 123
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 124
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 125
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 126
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 127
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 128
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 129
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 130
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 131
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 132
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 133
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 134
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 135
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 136
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 137
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 138
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 139
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 140
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 141
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 142
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 143
[Game] Skipping ignored request req_0 for Unit 0. Exp: 145 Now: 144
[Game] Ignored request req_0 EXPIRED for Unit 0. Exp: 145 Now: 145 - Re-allowing.

[90mstdout[2m | src/tests/StuckReassignment.test.js[2m > [22m[2mStuck/Throttled Job Reassignment[2m > [22m[2mshould release job if throttled and not moving for 45s
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:50,50
[Game] Request Added: raise at (80,80) ID:req_0
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Idle, TargetReq: none
[Assign] Checking Unit 1 (Dead:false)
[Assign] Unit 1 Action: Idle, TargetReq: none
[Game] forceAssignRequest FOUND Unit 0 (DistSq:1800). Scanned:2
[JobState] Entered. Target: raise. ResumeCtx: Approaching Job
[Game] Request req_0 assigned/switched to Unit 0
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Approaching Job, TargetReq: req_0
[Assign] Checking Unit 1 (Dead:false)
[Assign] Unit 1 Action: Idle, TargetReq: none
[Game] forceAssignRequest FOUND Unit 1 (DistSq:1800). Scanned:2
[Game] Request req_0 assigned/switched to Unit 1

 [32mç¬¨ãƒ»[39m src/tests/StuckReassignment.test.js [2m([22m[2m1 test[22m[2m)[22m[32m 133[2mms[22m[39m
[90mstdout[2m | src/tests/ComplexAI.test.js[2m > [22m[2mComplex AI Scenarios[2m > [22m[2mshould prioritize manual jobs even when closer auto jobs appear
[22m[39mSheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/ComplexAI.test.js[2m > [22m[2mComplex AI Scenarios[2m > [22m[2mshould prioritize manual jobs even when closer auto jobs appear
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Game] Request Added: raise at (50,50) ID:req_0
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Idle, TargetReq: none
[Game] forceAssignRequest FOUND Unit 0 (DistSq:3200). Scanned:1
[JobState] Entered. Target: raise. ResumeCtx: Approaching Job
[Game] Request req_0 assigned/switched to Unit 0
[Game] Request Added: raise at (11,11) ID:req_1
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Approaching Job, TargetReq: req_0
[Game] forceAssignRequest FAILED for Req req_1. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1

[90mstdout[2m | src/tests/ComplexAI.test.js[2m > [22m[2mComplex AI Scenarios[2m > [22m[2mshould NOT drop manual job when switching to SleepState at night
[22m[39mSheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

[90mstdout[2m | src/tests/ComplexAI.test.js[2m > [22m[2mComplex AI Scenarios[2m > [22m[2mshould NOT drop manual job when switching to SleepState at night
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Game] Request Added: raise at (50,50) ID:req_0
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Idle, TargetReq: none
[Game] forceAssignRequest FOUND Unit 0 (DistSq:3200). Scanned:1
[JobState] Entered. Target: raise. ResumeCtx: Approaching Job
[Game] Request req_0 assigned/switched to Unit 0

[90mstdout[2m | src/tests/ComplexAI.test.js[2m > [22m[2mComplex AI Scenarios[2m > [22m[2mshould ignore unreachable job to prevent flicker (Regression Test)
[22m[39mSheepManager Refactored: Initialized with Entity-based Sheep.
GoblinManager: Generation started...
GoblinManager: Generated 0 goblin caves after 5000 attempts.
Spawned initial fish.
FishManager Refactored: Initialized with Entity-based Fish.

stderr | src/tests/ComplexAI.test.js > Complex AI Scenarios > should ignore unreachable job to prevent flicker (Regression Test)
[Game] Skipping ignored request req_0 for Unit 0. Exp: 10.1 Now: 0.2

[90mstdout[2m | src/tests/ComplexAI.test.js[2m > [22m[2mComplex AI Scenarios[2m > [22m[2mshould ignore unreachable job to prevent flicker (Regression Test)
[22m[39m[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[Game] Request Added: raise at (90,90) ID:req_0
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Idle, TargetReq: none
[Game] forceAssignRequest FOUND Unit 0 (DistSq:800). Scanned:1
[JobState] Entered. Target: raise. ResumeCtx: Approaching Job
[Game] Request req_0 assigned/switched to Unit 0
[Assign] Checking Unit 0 (Dead:false)
[Assign] Unit 0 Action: Approaching Job, TargetReq: req_0
[Game] forceAssignRequest FAILED for Req req_0. Scanned:1 (RoleSkipped:0) Busy:1 Valid:0. TotalUnits:1

 [32mç¬¨ãƒ»[39m src/tests/ComplexAI.test.js [2m([22m[2m4 tests[22m[2m)[22m[33m 348[2mms[22m[39m

[2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[32m10 passed[39m[22m[90m (10)[39m
[2m   Start at [22m 18:48:01
[2m   Duration [22m 2.59s[2m (transform 1.21s, setup 250ms, import 2.01s, tests 532ms, environment 2.85s)[22m

