
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
[UnitCore.js] Unit Created ID:0 Role:knight Pos:0,0 Special:false

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
[Unit Debug V3] Start Logic. Night=false, Sleep=false, Action=undefined

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are similar (Bonus check)
[UnitCore.js] Unit Created ID:1 Role:knight Pos:0,0 Special:false

stdout | src/tests/TargetingPriority.test.js > Unit Targeting Priority > should allow Workers to target Huts at range 25 (New Range: 30)
[UnitCore.js] Unit Created ID:2 Role:knight Pos:0,0 Special:false

 ﾃ・src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building 20ms
   竊・Cannot read properties of undefined (reading 'type')
 ﾃ・src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are similar (Bonus check) 2ms
   竊・Cannot read properties of undefined (reading 'type')
 ﾃ・src/tests/TargetingPriority.test.js > Unit Targeting Priority > should allow Workers to target Huts at range 25 (New Range: 30) 3ms
   竊・this.terrain.getRandomPointInRegion is not a function

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ Failed Tests 3 竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ

 FAIL  src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Goblin if it is much closer than Building
TypeError: Cannot read properties of undefined (reading 'type')
 笶ｯ Unit.updateLogic src/Unit.js:877:40
    875|                     for (const b of this.terrain.buildings) {
    876|                         if (this.role === 'worker' && b.userData.type 窶ｦ
    877|                         if (b.userData.type === 'goblin_hut' || b.user窶ｦ
       |                                        ^
    878|                             if (b.userData && b.userData.hp <= 0) cont窶ｦ
    879| 
 笶ｯ src/tests/TargetingPriority.test.js:58:14

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[1/3]竡ｯ

 FAIL  src/tests/TargetingPriority.test.js > Unit Targeting Priority > should prioritize Building if distances are similar (Bonus check)
TypeError: Cannot read properties of undefined (reading 'type')
 笶ｯ Unit.updateLogic src/Unit.js:877:40
    875|                     for (const b of this.terrain.buildings) {
    876|                         if (this.role === 'worker' && b.userData.type 窶ｦ
    877|                         if (b.userData.type === 'goblin_hut' || b.user窶ｦ
       |                                        ^
    878|                             if (b.userData && b.userData.hp <= 0) cont窶ｦ
    879| 
 笶ｯ src/tests/TargetingPriority.test.js:74:14

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[2/3]竡ｯ

 FAIL  src/tests/TargetingPriority.test.js > Unit Targeting Priority > should allow Workers to target Huts at range 25 (New Range: 30)
TypeError: this.terrain.getRandomPointInRegion is not a function
 笶ｯ Unit.moveRandomly src/Unit.js:2071:37
    2069| 
    2070|         // 3. Find Valid Point in SAME Region
    2071|         const target = this.terrain.getRandomPointInRegion(currentRegi窶ｦ
       |                                     ^
    2072| 
    2073|         if (target) {
 笶ｯ UnitWanderState.update src/ai/states/State.js:64:24
 笶ｯ UnitWanderState.update src/ai/states/UnitStates.js:49:15
 笶ｯ Unit.updateLogic src/Unit.js:674:24
 笶ｯ src/tests/TargetingPriority.test.js:87:14

竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ竡ｯ[3/3]竡ｯ


 Test Files  1 failed (1)
      Tests  3 failed (3)
   Start at  20:14:59
   Duration  810ms (transform 110ms, setup 34ms, import 146ms, tests 27ms, environment 406ms)

