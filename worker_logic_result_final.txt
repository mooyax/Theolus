
 RUN  v4.0.15 C:/Users/mooya/develop/test

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Actor.ts loaded

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Building.ts loaded

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Terrain.ts top-level load

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Goblin.ts loaded

stdout | src/tests/Regression_WorkerLogic.test.js
[Import Debug] Raid: function, Combat: function, Wander: function

stdout | src/tests/Regression_WorkerLogic.test.js
[DEBUG] Game.ts top-level load

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should NOT abort job during long async pathfinding (prevent oscillation)
[Entity 0] CONSTRUCTOR START: type=unit at 10,10
[Entity 0] Calling updatePosition...
[Entity 0] updatePosition returned.
[DIAG] Actor Created ID: 0
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10 Special:false
[Unit 0] State Change: None -> Wander
[UnitCore.js] Unit Created ID:0 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:0

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should NOT abort job during long async pathfinding (prevent oscillation)
[Actor 1] Resetting Unreachable (Target changed or initializing)

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should NOT abort job during long async pathfinding (prevent oscillation)
[Actor 1] Pathfinding SUCCESS: Got 2 nodes to 50,50
[Entity 1] startMove -> isMoving:true. Target:50,50 StartTime:0.0000

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin Hut when idle (Passive Worker Fix)
Disposing detached game instance

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin Hut when idle (Passive Worker Fix)
[Entity 1] CONSTRUCTOR START: type=unit at 10,10
[Entity 1] Calling updatePosition...
[Entity 1] updatePosition returned.
[DIAG] Actor Created ID: 1
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:1 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:1

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin Hut when idle (Passive Worker Fix)
[Actor 1] Resetting Unreachable (Target changed or initializing)

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin Hut when idle (Passive Worker Fix)
[Actor 1] Pathfinding SUCCESS: Got 2 nodes to 50,50
[Entity 1] startMove -> isMoving:true. Target:50,50 StartTime:100.0160

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin even if holding a job (Self Defense)
Disposing detached game instance

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin even if holding a job (Self Defense)
[Entity 2] CONSTRUCTOR START: type=unit at 10,10
[Entity 2] Calling updatePosition...
[Entity 2] updatePosition returned.
[DIAG] Actor Created ID: 2
[DIAG] Actor smartMove type: function
[DIAG] Actor smartMove body snapshot: smartMove(tx, tz, time, depth = 0) {
    if (isNaN(tx) || isNaN(tz)) {
      console.error(`[Actor $
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10 Special:false
[UnitCore.js] Unit Created ID:2 Role:worker Pos:10,10
[UnitCore.js] Unit Construction Finished ID:2

stdout | src/tests/Regression_WorkerLogic.test.js > Regression: Worker Logic & Stability > should attack nearby Goblin even if holding a job (Self Defense)
[Actor 1] Resetting Unreachable (Target changed or initializing)
[DEBUG Unit 1] i=30 id=gob1 gx=10 gz=10 tGx=11 tGz=11 myCell=true gCell=true
Target set: {
  id: [32m'gob1'[39m,
  gridX: [33m11[39m,
  gridZ: [33m11[39m,
  position: { x: [33m11[39m, y: [33m0[39m, z: [33m11[39m },
  isDead: [33mfalse[39m,
  hp: [33m10[39m,
  type: [32m'goblin'[39m,
  takeDamage: [36m[Function: takeDamage][39m
}
[Actor 1] Pathfinding SUCCESS: Got 2 nodes to 80,80
[Entity 1] startMove -> isMoving:true. Target:80,80 StartTime:0.0000

 ç¬¨ãƒ»src/tests/Regression_WorkerLogic.test.js (3 tests) 163ms

 Test Files  1 passed (1)
      Tests  3 passed (3)
   Start at  00:00:43
   Duration  1.41s (transform 471ms, setup 81ms, import 529ms, tests 163ms, environment 454ms)

